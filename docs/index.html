<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="Summarise patient-level drug utilisation cohorts using data mapped 
    to the Observational Medical Outcomes Partnership (OMOP) common data model. 
    New users and prevalent users cohorts can be generated and their 
    characteristics, indication and drug use summarised.">
<title>Summarise Patient-Level Drug Utilisation in Data Mapped to the OMOP 
    Common Data Model  • DrugUtilisation</title>
<script src="deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="deps/bootstrap-5.2.2/bootstrap.min.css" rel="stylesheet">
<script src="deps/bootstrap-5.2.2/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="pkgdown.js"></script><meta property="og:title" content="Summarise Patient-Level Drug Utilisation in Data Mapped to the OMOP 
    Common Data Model ">
<meta property="og:description" content="Summarise patient-level drug utilisation cohorts using data mapped 
    to the Observational Medical Outcomes Partnership (OMOP) common data model. 
    New users and prevalent users cohorts can be generated and their 
    characteristics, indication and drug use summarised.">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="index.html">DrugUtilisation</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.3.1</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="reference/index.html">Reference</a>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="articles/pareReport.html">Pare report: DrugUtilisation</a>
  </div>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav"></ul>
</div>

    
  </div>
</nav><div class="container template-home">
<div class="row">
  <main id="main" class="col-md-9"><div class="section level1">
<div class="page-header"><h1 id="drugutilisation-">DrugUtilisation <img src="reference/figures/hex-HELPWANTED.png" align="right" height="139"><a class="anchor" aria-label="anchor" href="#drugutilisation-"></a>
</h1></div>
<p><a href="https://CRAN.R-project.org/package=DrugUtilisation" class="external-link"><img src="https://www.r-pkg.org/badges/version/DrugUtilisation" alt="CRANstatus"></a> <a href="https://app.codecov.io/github/darwin-eu/DrugUtilisation?branch=main" class="external-link"><img src="https://codecov.io/github/darwin-eu/DrugUtilisation/coverage.svg?branch=main" alt="codecov.io"></a> <a href="https://github.com/darwin-eu/DrugUtilisation/actions" class="external-link"><img src="https://github.com/darwin-eu/DrugUtilisation/workflows/R-CMD-check/badge.svg" alt="R-CMD-check"></a> <a href="https://lifecycle.r-lib.org/articles/stages.html" class="external-link"><img src="https://img.shields.io/badge/Lifecycle-Experimental-339999" alt="Lifecycle:Experimental"></a></p>
<div class="section level2">
<h2 id="warning-this-package-is-under-development">WARNING: This package is under development.<a class="anchor" aria-label="anchor" href="#warning-this-package-is-under-development"></a>
</h2>
<ul><li>
<strong>addDailyDose</strong> function works for the following patterns in the drug_strength table:</li></ul>
<table class="table">
<thead><tr class="header">
<th align="center">pattern_id</th>
<th align="center">amount_unit</th>
<th align="center">numerator_unit</th>
<th align="center">denominator_unit</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="center">1</td>
<td align="center">international unit</td>
<td align="center">NA</td>
<td align="center">NA</td>
</tr>
<tr class="even">
<td align="center">2</td>
<td align="center">microgram</td>
<td align="center">NA</td>
<td align="center">NA</td>
</tr>
<tr class="odd">
<td align="center">3</td>
<td align="center">milliequivalent</td>
<td align="center">NA</td>
<td align="center">NA</td>
</tr>
<tr class="even">
<td align="center">4</td>
<td align="center">milligram</td>
<td align="center">NA</td>
<td align="center">NA</td>
</tr>
<tr class="odd">
<td align="center">5</td>
<td align="center">millimiter</td>
<td align="center">NA</td>
<td align="center">NA</td>
</tr>
<tr class="even">
<td align="center">6</td>
<td align="center">NA</td>
<td align="center">microgram</td>
<td align="center">hour</td>
</tr>
<tr class="odd">
<td align="center">7</td>
<td align="center">NA</td>
<td align="center">milligram</td>
<td align="center">actuation</td>
</tr>
<tr class="even">
<td align="center">8</td>
<td align="center">NA</td>
<td align="center">microgram</td>
<td align="center">hour</td>
</tr>
<tr class="odd">
<td align="center">9</td>
<td align="center">NA</td>
<td align="center">milligram</td>
<td align="center">hour</td>
</tr>
</tbody>
</table>
</div>
<div class="section level2">
<h2 id="package-overview">Package overview<a class="anchor" aria-label="anchor" href="#package-overview"></a>
</h2>
<p>DrugUtilisation contains functions to instantiate and characterize the cohorts used in a Drug Utilisation Study in the OMOP common data model. Main functionalities are:</p>
<ul>
<li><p>Create DrugUsilisation cohorts</p></li>
<li><p>Add indications to this cohort</p></li>
<li><p>Add the dosage of a certain ingredient (subseted for a list of drugs)</p></li>
<li><p>Calculate the daily dose</p></li>
<li><p>Create Concept based cohorts</p></li>
<li><p>Read concepts from json files</p></li>
<li><p>Summarise the drug use in a certain cohort</p></li>
<li><p>Summarise the indications in a certain cohort</p></li>
<li><p>Summarise the patients characteristics in a certain cohort</p></li>
<li><p>Summarise the patients large scale characterics in a certain cohort</p></li>
</ul>
</div>
<div class="section level2">
<h2 id="example">Example<a class="anchor" aria-label="anchor" href="#example"></a>
</h2>
<p>First, we need to create a cdm reference for the data we´ll be using. Here we´ll generate an example with simulated data, but to see how you would set this up for your database please consult the CDMConnector package <a href="https://darwin-eu.github.io/CDMConnector/articles/a04_DBI_connection_examples.html" class="external-link">connection examples</a>.</p>
<p>The package also provides a functionality to generate a mockDrugUtilisation cdm reference:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://darwin-eu-dev.github.io/DrugUtilisation/">DrugUtilisation</a></span><span class="op">)</span></span>
<span><span class="va">cdm</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/mockDrugUtilisation.html">mockDrugUtilisation</a></span><span class="op">(</span>numberIndividual <span class="op">=</span> <span class="fl">100</span><span class="op">)</span></span></code></pre></div>
<div class="section level3">
<h3 id="create-a-cohort-of-drug-use">Create a cohort of drug use<a class="anchor" aria-label="anchor" href="#create-a-cohort-of-drug-use"></a>
</h3>
<p>To create a cohort we will need a conceptList, this can be read from json files:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">conceptList</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/readConceptList.html">readConceptList</a></span><span class="op">(</span><span class="fu">here</span><span class="fu">::</span><span class="fu"><a href="https://here.r-lib.org//reference/here.html" class="external-link">here</a></span><span class="op">(</span><span class="st">"Concepts"</span><span class="op">)</span>, <span class="va">cdm</span><span class="op">)</span></span></code></pre></div>
<p>Or we can build our own list using other packages (e.g. CodelistGenerator)</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://darwin-eu.github.io/CodelistGenerator/" class="external-link">CodelistGenerator</a></span><span class="op">)</span></span>
<span><span class="va">conceptList</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://darwin-eu.github.io/CodelistGenerator/reference/getDrugIngredientCodes.html" class="external-link">getDrugIngredientCodes</a></span><span class="op">(</span><span class="va">cdm</span>, <span class="st">"acetaminophen"</span><span class="op">)</span></span>
<span><span class="va">conceptList</span></span>
<span><span class="co">#&gt; $`Ingredient: acetaminophen (1125315)`</span></span>
<span><span class="co">#&gt; [1]  1125315 43135274  2905077  1125360</span></span></code></pre></div>
<p>To generate the cohort of drug use we will use <code>generateDrugUtilisationCohortSet</code>:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">cdm</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/generateDrugUtilisationCohortSet.html">generateDrugUtilisationCohortSet</a></span><span class="op">(</span></span>
<span>  cdm <span class="op">=</span> <span class="va">cdm</span>,</span>
<span>  name <span class="op">=</span> <span class="st">"dus_cohort"</span>,</span>
<span>  conceptSetList <span class="op">=</span> <span class="va">conceptList</span>,</span>
<span>  summariseMode <span class="op">=</span> <span class="st">"FirstEra"</span>, </span>
<span>  daysPriorObservation <span class="op">=</span> <span class="fl">365</span>,</span>
<span>  gapEra <span class="op">=</span> <span class="fl">30</span>,</span>
<span>  priorUseWashout <span class="op">=</span> <span class="fl">0</span>,</span>
<span>  imputeDuration <span class="op">=</span> <span class="st">"eliminate"</span>, </span>
<span>  durationRange <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="cn">Inf</span><span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre></div>
<div class="section level4">
<h4 id="cohort-attributes">Cohort attributes<a class="anchor" aria-label="anchor" href="#cohort-attributes"></a>
</h4>
<p>The generated cohort will have the <code>GeneratedCohortSet</code> as seen in CDMConnector</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/class.html" class="external-link">class</a></span><span class="op">(</span><span class="va">cdm</span><span class="op">$</span><span class="va">dus_cohort</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "GeneratedCohortSet"    "tbl_duckdb_connection" "tbl_dbi"              </span></span>
<span><span class="co">#&gt; [4] "tbl_sql"               "tbl_lazy"              "tbl"</span></span></code></pre></div>
<p>Cohort set:</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va">CDMConnector</span><span class="op">)</span></span>
<span><span class="co">#&gt; Warning: package 'CDMConnector' was built under R version 4.2.3</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a></span><span class="op">)</span></span>
<span><span class="co">#&gt; Warning: package 'dplyr' was built under R version 4.2.3</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Attaching package: 'dplyr'</span></span>
<span><span class="co">#&gt; The following objects are masked from 'package:stats':</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;     filter, lag</span></span>
<span><span class="co">#&gt; The following objects are masked from 'package:base':</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;     intersect, setdiff, setequal, union</span></span>
<span><span class="fu"><a href="https://rdrr.io/pkg/CDMConnector/man/cohortSet.html" class="external-link">cohortSet</a></span><span class="op">(</span><span class="va">cdm</span><span class="op">$</span><span class="va">dus_cohort</span><span class="op">)</span> <span class="op"><a href="reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://pillar.r-lib.org/reference/glimpse.html" class="external-link">glimpse</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt; Rows: 1</span></span>
<span><span class="co">#&gt; Columns: 12</span></span>
<span><span class="co">#&gt; $ cohort_definition_id    &lt;int&gt; 1</span></span>
<span><span class="co">#&gt; $ cohort_name             &lt;chr&gt; "Ingredient: acetaminophen (1125315)"</span></span>
<span><span class="co">#&gt; $ summarise_mode          &lt;chr&gt; "FirstEra"</span></span>
<span><span class="co">#&gt; $ fixed_time              &lt;chr&gt; NA</span></span>
<span><span class="co">#&gt; $ days_prior_observation  &lt;chr&gt; "365"</span></span>
<span><span class="co">#&gt; $ gap_era                 &lt;chr&gt; "30"</span></span>
<span><span class="co">#&gt; $ prior_use_washout       &lt;chr&gt; "0"</span></span>
<span><span class="co">#&gt; $ cohort_date_range_start &lt;chr&gt; NA</span></span>
<span><span class="co">#&gt; $ cohort_date_range_end   &lt;chr&gt; NA</span></span>
<span><span class="co">#&gt; $ impute_duration         &lt;chr&gt; "eliminate"</span></span>
<span><span class="co">#&gt; $ duration_range_min      &lt;chr&gt; "0"</span></span>
<span><span class="co">#&gt; $ duration_range_max      &lt;chr&gt; "Inf"</span></span></code></pre></div>
<p>Cohort count:</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/pkg/CDMConnector/man/cohortCount.html" class="external-link">cohortCount</a></span><span class="op">(</span><span class="va">cdm</span><span class="op">$</span><span class="va">dus_cohort</span><span class="op">)</span></span>
<span><span class="co">#&gt; # A tibble: 1 × 3</span></span>
<span><span class="co">#&gt;   cohort_definition_id number_records number_subjects</span></span>
<span><span class="co">#&gt;                  &lt;int&gt;          &lt;dbl&gt;           &lt;dbl&gt;</span></span>
<span><span class="co">#&gt; 1                    1             46              46</span></span></code></pre></div>
<p>Cohort attrition:</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/pkg/CDMConnector/man/cohortAttrition.html" class="external-link">cohortAttrition</a></span><span class="op">(</span><span class="va">cdm</span><span class="op">$</span><span class="va">dus_cohort</span><span class="op">)</span> <span class="op"><a href="reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://pillar.r-lib.org/reference/glimpse.html" class="external-link">glimpse</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt; Rows: 8</span></span>
<span><span class="co">#&gt; Columns: 7</span></span>
<span><span class="co">#&gt; $ cohort_definition_id &lt;int&gt; 1, 1, 1, 1, 1, 1, 1, 1</span></span>
<span><span class="co">#&gt; $ number_records       &lt;dbl&gt; 109, 109, 83, 52, 52, 52, 52, 46</span></span>
<span><span class="co">#&gt; $ number_subjects      &lt;dbl&gt; 69, 69, 69, 46, 46, 46, 46, 46</span></span>
<span><span class="co">#&gt; $ reason_id            &lt;dbl&gt; 1, 2, 3, 4, 5, 6, 7, 8</span></span>
<span><span class="co">#&gt; $ reason               &lt;chr&gt; "Qualifying initial records", "Duration imputatio…</span></span>
<span><span class="co">#&gt; $ excluded_records     &lt;dbl&gt; 0, 0, 26, 31, 0, 0, 0, 6</span></span>
<span><span class="co">#&gt; $ excluded_subjects    &lt;dbl&gt; 0, 0, 0, 23, 0, 0, 0, 0</span></span></code></pre></div>
</div>
</div>
<div class="section level3">
<h3 id="indication">Indication<a class="anchor" aria-label="anchor" href="#indication"></a>
</h3>
<p>Indications will always be cohorts. An option that the package has is to create concept based cohorts using <code>generateConceptCohortSet</code>.</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">indications</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>headache <span class="op">=</span> <span class="fl">378253</span>, influenza <span class="op">=</span> <span class="fl">4266367</span><span class="op">)</span></span>
<span><span class="va">cdm</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/generateConceptCohortSet.html">generateConceptCohortSet</a></span><span class="op">(</span><span class="va">cdm</span>, <span class="st">"indications_cohort"</span>, <span class="va">indications</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/pkg/CDMConnector/man/cohortCount.html" class="external-link">cohortCount</a></span><span class="op">(</span><span class="va">cdm</span><span class="op">$</span><span class="va">indications_cohort</span><span class="op">)</span></span>
<span><span class="co">#&gt; # A tibble: 2 × 3</span></span>
<span><span class="co">#&gt;   cohort_definition_id number_records number_subjects</span></span>
<span><span class="co">#&gt;                  &lt;int&gt;          &lt;dbl&gt;           &lt;dbl&gt;</span></span>
<span><span class="co">#&gt; 1                    1             71              59</span></span>
<span><span class="co">#&gt; 2                    2             59              52</span></span></code></pre></div>
<p>Then we can add the indication using the function <code>addIndication</code>. That will add a new column for each indication gap and indication.</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">x</span> <span class="op">&lt;-</span> <span class="va">cdm</span><span class="op">$</span><span class="va">dus_cohort</span> <span class="op"><a href="reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="reference/addIndication.html">addIndication</a></span><span class="op">(</span></span>
<span>    cdm <span class="op">=</span> <span class="va">cdm</span>, indicationCohortName <span class="op">=</span> <span class="st">"indications_cohort"</span>, indicationGap <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">30</span>, <span class="fl">365</span><span class="op">)</span>, </span>
<span>    unknownIndicationTable <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"condition_occurrence"</span><span class="op">)</span></span>
<span>  <span class="op">)</span></span>
<span><span class="fu"><a href="https://pillar.r-lib.org/reference/glimpse.html" class="external-link">glimpse</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span></span>
<span><span class="co">#&gt; Rows: ??</span></span>
<span><span class="co">#&gt; Columns: 16</span></span>
<span><span class="co">#&gt; Database: DuckDB 0.7.1 [martics@Windows 10 x64:R 4.2.1/:memory:]</span></span>
<span><span class="co">#&gt; $ cohort_definition_id         &lt;int&gt; 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1,…</span></span>
<span><span class="co">#&gt; $ subject_id                   &lt;dbl&gt; 37, 61, 81, 84, 60, 47, 70, 90, 96, 75, 9…</span></span>
<span><span class="co">#&gt; $ cohort_start_date            &lt;date&gt; 2005-02-07, 2019-01-22, 1995-09-13, 2011…</span></span>
<span><span class="co">#&gt; $ cohort_end_date              &lt;date&gt; 2005-04-15, 2019-03-27, 1997-11-17, 2013…</span></span>
<span><span class="co">#&gt; $ indication_gap_0_influenza   &lt;dbl&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,…</span></span>
<span><span class="co">#&gt; $ indication_gap_0_headache    &lt;dbl&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,…</span></span>
<span><span class="co">#&gt; $ indication_gap_0_none        &lt;dbl&gt; 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1,…</span></span>
<span><span class="co">#&gt; $ indication_gap_30_influenza  &lt;dbl&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,…</span></span>
<span><span class="co">#&gt; $ indication_gap_30_headache   &lt;dbl&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,…</span></span>
<span><span class="co">#&gt; $ indication_gap_30_none       &lt;dbl&gt; 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1,…</span></span>
<span><span class="co">#&gt; $ indication_gap_365_influenza &lt;dbl&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,…</span></span>
<span><span class="co">#&gt; $ indication_gap_365_headache  &lt;dbl&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,…</span></span>
<span><span class="co">#&gt; $ indication_gap_365_none      &lt;dbl&gt; 1, 1, 1, 1, 0, 1, 1, 1, 1, 0, 1, 0, 1, 1,…</span></span>
<span><span class="co">#&gt; $ indication_gap_0_unknown     &lt;dbl&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,…</span></span>
<span><span class="co">#&gt; $ indication_gap_30_unknown    &lt;dbl&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,…</span></span>
<span><span class="co">#&gt; $ indication_gap_365_unknown   &lt;dbl&gt; 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 1, 0, 0,…</span></span></code></pre></div>
<p>We can combine the indications in a single column using the <code><a href="reference/indicationToStrata.html">indicationToStrata()</a></code> function. This column can be used as stratification of the results if needed:</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">x</span> <span class="op">&lt;-</span> <span class="va">x</span> <span class="op"><a href="reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="reference/indicationToStrata.html">indicationToStrata</a></span><span class="op">(</span>keep <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://pillar.r-lib.org/reference/glimpse.html" class="external-link">glimpse</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span></span>
<span><span class="co">#&gt; Rows: ??</span></span>
<span><span class="co">#&gt; Columns: 19</span></span>
<span><span class="co">#&gt; Database: DuckDB 0.7.1 [martics@Windows 10 x64:R 4.2.1/:memory:]</span></span>
<span><span class="co">#&gt; $ cohort_definition_id         &lt;int&gt; 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1,…</span></span>
<span><span class="co">#&gt; $ subject_id                   &lt;dbl&gt; 37, 61, 81, 84, 60, 47, 70, 90, 96, 75, 9…</span></span>
<span><span class="co">#&gt; $ cohort_start_date            &lt;date&gt; 2005-02-07, 2019-01-22, 1995-09-13, 2011…</span></span>
<span><span class="co">#&gt; $ cohort_end_date              &lt;date&gt; 2005-04-15, 2019-03-27, 1997-11-17, 2013…</span></span>
<span><span class="co">#&gt; $ indication_gap_0_influenza   &lt;dbl&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,…</span></span>
<span><span class="co">#&gt; $ indication_gap_0_headache    &lt;dbl&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,…</span></span>
<span><span class="co">#&gt; $ indication_gap_0_none        &lt;dbl&gt; 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1,…</span></span>
<span><span class="co">#&gt; $ indication_gap_30_influenza  &lt;dbl&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,…</span></span>
<span><span class="co">#&gt; $ indication_gap_30_headache   &lt;dbl&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,…</span></span>
<span><span class="co">#&gt; $ indication_gap_30_none       &lt;dbl&gt; 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1,…</span></span>
<span><span class="co">#&gt; $ indication_gap_365_influenza &lt;dbl&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,…</span></span>
<span><span class="co">#&gt; $ indication_gap_365_headache  &lt;dbl&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,…</span></span>
<span><span class="co">#&gt; $ indication_gap_365_none      &lt;dbl&gt; 1, 1, 1, 1, 0, 1, 1, 1, 1, 0, 1, 0, 1, 1,…</span></span>
<span><span class="co">#&gt; $ indication_gap_0_unknown     &lt;dbl&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,…</span></span>
<span><span class="co">#&gt; $ indication_gap_30_unknown    &lt;dbl&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,…</span></span>
<span><span class="co">#&gt; $ indication_gap_365_unknown   &lt;dbl&gt; 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 1, 0, 0,…</span></span>
<span><span class="co">#&gt; $ indication_gap_0             &lt;chr&gt; "None", "None", "None", "None", "None", "…</span></span>
<span><span class="co">#&gt; $ indication_gap_30            &lt;chr&gt; "None", "None", "None", "None", "None", "…</span></span>
<span><span class="co">#&gt; $ indication_gap_365           &lt;chr&gt; "None", "None", "None", "None", "Unknown"…</span></span></code></pre></div>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/table.html" class="external-link">table</a></span><span class="op">(</span><span class="va">x</span> <span class="op"><a href="reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/pull.html" class="external-link">pull</a></span><span class="op">(</span><span class="st">"indication_gap_365"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;               Headache              Influenza Influenza and Headache </span></span>
<span><span class="co">#&gt;                      1                      4                      1 </span></span>
<span><span class="co">#&gt;                   None                Unknown </span></span>
<span><span class="co">#&gt;                     35                      5</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="summarise-the-indication">Summarise the indication<a class="anchor" aria-label="anchor" href="#summarise-the-indication"></a>
</h3>
<p>We can summarise the indication results using the <code>summariseIndication</code> function:</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="reference/summariseIndication.html">summariseIndication</a></span><span class="op">(</span><span class="va">x</span>, <span class="va">cdm</span><span class="op">)</span></span>
<span><span class="co">#&gt; # A tibble: 40 × 11</span></span>
<span><span class="co">#&gt;    group_name  group_level      strata_name strata_level variable variable_level</span></span>
<span><span class="co">#&gt;    &lt;chr&gt;       &lt;chr&gt;            &lt;chr&gt;       &lt;chr&gt;        &lt;chr&gt;    &lt;chr&gt;         </span></span>
<span><span class="co">#&gt;  1 Cohort name Ingredient: ace… Overall     Overall      number … &lt;NA&gt;          </span></span>
<span><span class="co">#&gt;  2 Cohort name Ingredient: ace… Overall     Overall      number … &lt;NA&gt;          </span></span>
<span><span class="co">#&gt;  3 Cohort name Ingredient: ace… Overall     Overall      indicat… &lt;NA&gt;          </span></span>
<span><span class="co">#&gt;  4 Cohort name Ingredient: ace… Overall     Overall      indicat… &lt;NA&gt;          </span></span>
<span><span class="co">#&gt;  5 Cohort name Ingredient: ace… Overall     Overall      indicat… &lt;NA&gt;          </span></span>
<span><span class="co">#&gt;  6 Cohort name Ingredient: ace… Overall     Overall      indicat… &lt;NA&gt;          </span></span>
<span><span class="co">#&gt;  7 Cohort name Ingredient: ace… Overall     Overall      indicat… &lt;NA&gt;          </span></span>
<span><span class="co">#&gt;  8 Cohort name Ingredient: ace… Overall     Overall      indicat… &lt;NA&gt;          </span></span>
<span><span class="co">#&gt;  9 Cohort name Ingredient: ace… Overall     Overall      indicat… &lt;NA&gt;          </span></span>
<span><span class="co">#&gt; 10 Cohort name Ingredient: ace… Overall     Overall      indicat… &lt;NA&gt;          </span></span>
<span><span class="co">#&gt; # ℹ 30 more rows</span></span>
<span><span class="co">#&gt; # ℹ 5 more variables: variable_type &lt;chr&gt;, estimate_type &lt;chr&gt;, estimate &lt;chr&gt;,</span></span>
<span><span class="co">#&gt; #   cdm_name &lt;chr&gt;, result_type &lt;chr&gt;</span></span></code></pre></div>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="reference/summariseIndication.html">summariseIndication</a></span><span class="op">(</span><span class="va">x</span>, <span class="va">cdm</span><span class="op">)</span> <span class="op"><a href="reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://pillar.r-lib.org/reference/glimpse.html" class="external-link">glimpse</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt; Rows: 40</span></span>
<span><span class="co">#&gt; Columns: 11</span></span>
<span><span class="co">#&gt; $ group_name     &lt;chr&gt; "Cohort name", "Cohort name", "Cohort name", "Cohort na…</span></span>
<span><span class="co">#&gt; $ group_level    &lt;chr&gt; "Ingredient: acetaminophen (1125315)", "Ingredient: ace…</span></span>
<span><span class="co">#&gt; $ strata_name    &lt;chr&gt; "Overall", "Overall", "Overall", "Overall", "Overall", …</span></span>
<span><span class="co">#&gt; $ strata_level   &lt;chr&gt; "Overall", "Overall", "Overall", "Overall", "Overall", …</span></span>
<span><span class="co">#&gt; $ variable       &lt;chr&gt; "number subjects", "number records", "indication_gap_0_…</span></span>
<span><span class="co">#&gt; $ variable_level &lt;chr&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA,…</span></span>
<span><span class="co">#&gt; $ variable_type  &lt;chr&gt; NA, NA, "binary", "binary", "binary", "binary", "binary…</span></span>
<span><span class="co">#&gt; $ estimate_type  &lt;chr&gt; "count", "count", "count", "%", "count", "%", "count", …</span></span>
<span><span class="co">#&gt; $ estimate       &lt;chr&gt; "46", "46", "0", "0", "0", "0", "46", "100", "0", "0", …</span></span>
<span><span class="co">#&gt; $ cdm_name       &lt;chr&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA,…</span></span>
<span><span class="co">#&gt; $ result_type    &lt;chr&gt; "Summary indication", "Summary indication", "Summary in…</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="add-strata">Add strata<a class="anchor" aria-label="anchor" href="#add-strata"></a>
</h3>
<p>All summarise functions have the option to add strata. Strata will always point to preexisting columns. Here we can see an example where we create a <code>age_group</code> and <code>sex</code> columns using PatientProfiles and then we use it as strata</p>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://darwin-eu-dev.github.io/PatientProfiles/" class="external-link">PatientProfiles</a></span><span class="op">)</span></span>
<span><span class="va">x</span> <span class="op">&lt;-</span> <span class="va">x</span> <span class="op"><a href="reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://darwin-eu-dev.github.io/PatientProfiles/reference/addAge.html" class="external-link">addAge</a></span><span class="op">(</span><span class="va">cdm</span>, ageGroup <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">19</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">20</span>, <span class="fl">39</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">40</span>, <span class="fl">59</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">60</span>, <span class="fl">79</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">80</span>, <span class="fl">150</span><span class="op">)</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://darwin-eu-dev.github.io/PatientProfiles/reference/addSex.html" class="external-link">addSex</a></span><span class="op">(</span><span class="va">cdm</span><span class="op">)</span></span>
<span><span class="fu"><a href="reference/summariseIndication.html">summariseIndication</a></span><span class="op">(</span><span class="va">x</span>, <span class="va">cdm</span>, strata <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="st">"age"</span> <span class="op">=</span> <span class="st">"age_group"</span>, <span class="st">"sex"</span> <span class="op">=</span> <span class="st">"sex"</span>, <span class="st">"age &amp; sex"</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"age_group"</span>, <span class="st">"sex"</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; # A tibble: 560 × 11</span></span>
<span><span class="co">#&gt;    group_name  group_level      strata_name strata_level variable variable_level</span></span>
<span><span class="co">#&gt;    &lt;chr&gt;       &lt;chr&gt;            &lt;chr&gt;       &lt;chr&gt;        &lt;chr&gt;    &lt;chr&gt;         </span></span>
<span><span class="co">#&gt;  1 Cohort name Ingredient: ace… Overall     Overall      number … &lt;NA&gt;          </span></span>
<span><span class="co">#&gt;  2 Cohort name Ingredient: ace… Overall     Overall      number … &lt;NA&gt;          </span></span>
<span><span class="co">#&gt;  3 Cohort name Ingredient: ace… Overall     Overall      indicat… &lt;NA&gt;          </span></span>
<span><span class="co">#&gt;  4 Cohort name Ingredient: ace… Overall     Overall      indicat… &lt;NA&gt;          </span></span>
<span><span class="co">#&gt;  5 Cohort name Ingredient: ace… Overall     Overall      indicat… &lt;NA&gt;          </span></span>
<span><span class="co">#&gt;  6 Cohort name Ingredient: ace… Overall     Overall      indicat… &lt;NA&gt;          </span></span>
<span><span class="co">#&gt;  7 Cohort name Ingredient: ace… Overall     Overall      indicat… &lt;NA&gt;          </span></span>
<span><span class="co">#&gt;  8 Cohort name Ingredient: ace… Overall     Overall      indicat… &lt;NA&gt;          </span></span>
<span><span class="co">#&gt;  9 Cohort name Ingredient: ace… Overall     Overall      indicat… &lt;NA&gt;          </span></span>
<span><span class="co">#&gt; 10 Cohort name Ingredient: ace… Overall     Overall      indicat… &lt;NA&gt;          </span></span>
<span><span class="co">#&gt; # ℹ 550 more rows</span></span>
<span><span class="co">#&gt; # ℹ 5 more variables: variable_type &lt;chr&gt;, estimate_type &lt;chr&gt;, estimate &lt;chr&gt;,</span></span>
<span><span class="co">#&gt; #   cdm_name &lt;chr&gt;, result_type &lt;chr&gt;</span></span></code></pre></div>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="reference/summariseIndication.html">summariseIndication</a></span><span class="op">(</span><span class="va">x</span>, <span class="va">cdm</span>, strata <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="st">"age"</span> <span class="op">=</span> <span class="st">"age_group"</span>, <span class="st">"sex"</span> <span class="op">=</span> <span class="st">"sex"</span>, <span class="st">"age &amp; sex"</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"age_group"</span>, <span class="st">"sex"</span><span class="op">)</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://pillar.r-lib.org/reference/glimpse.html" class="external-link">glimpse</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt; Rows: 560</span></span>
<span><span class="co">#&gt; Columns: 11</span></span>
<span><span class="co">#&gt; $ group_name     &lt;chr&gt; "Cohort name", "Cohort name", "Cohort name", "Cohort na…</span></span>
<span><span class="co">#&gt; $ group_level    &lt;chr&gt; "Ingredient: acetaminophen (1125315)", "Ingredient: ace…</span></span>
<span><span class="co">#&gt; $ strata_name    &lt;chr&gt; "Overall", "Overall", "Overall", "Overall", "Overall", …</span></span>
<span><span class="co">#&gt; $ strata_level   &lt;chr&gt; "Overall", "Overall", "Overall", "Overall", "Overall", …</span></span>
<span><span class="co">#&gt; $ variable       &lt;chr&gt; "number subjects", "number records", "indication_gap_0_…</span></span>
<span><span class="co">#&gt; $ variable_level &lt;chr&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA,…</span></span>
<span><span class="co">#&gt; $ variable_type  &lt;chr&gt; NA, NA, "binary", "binary", "binary", "binary", "binary…</span></span>
<span><span class="co">#&gt; $ estimate_type  &lt;chr&gt; "count", "count", "count", "%", "count", "%", "count", …</span></span>
<span><span class="co">#&gt; $ estimate       &lt;chr&gt; "46", "46", "0", "0", "0", "0", "46", "100", "0", "0", …</span></span>
<span><span class="co">#&gt; $ cdm_name       &lt;chr&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA,…</span></span>
<span><span class="co">#&gt; $ result_type    &lt;chr&gt; "Summary indication", "Summary indication", "Summary in…</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="daily-dose">Daily dose<a class="anchor" aria-label="anchor" href="#daily-dose"></a>
</h3>
<p>We can compute daily dose for a certain ingredient from a subset of drug_exposure or the whole drug exposure (can be very computationally expensive).</p>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#cdm$drug_exposure %&gt;%</span></span>
<span><span class="co">#  addDailyDose(cdm, ingredientConceptId = 1125315) %&gt;%</span></span>
<span><span class="co">#  glimpse()</span></span></code></pre></div>
<div class="section level4">
<h4 id="coverage">Coverage<a class="anchor" aria-label="anchor" href="#coverage"></a>
</h4>
<p>Currently you can evaluate the coverage of daily dose for a conceptList or overall using <code>dailyDoseCoverage</code>. You can restrict to a certain ingredient, otherwise the result will be stratified by ingredient.</p>
<div class="sourceCode" id="cb18"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#dailyDoseCoverage(cdm = cdm, sample = NULL, ingredient = NULL, conceptList = NULL) </span></span></code></pre></div>
</div>
</div>
<div class="section level3">
<h3 id="druguse">DrugUse<a class="anchor" aria-label="anchor" href="#druguse"></a>
</h3>
<p>You can add columns related to the drug use using <code>addDrugUse</code>. You always have to provide a reference ingredient.</p>
<div class="sourceCode" id="cb19"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#x &lt;- x %&gt;%</span></span>
<span><span class="co">#  addDrugUse(</span></span>
<span><span class="co">#    cdm = cdm,</span></span>
<span><span class="co">#    ingredientConceptId = 1125315,</span></span>
<span><span class="co">#    initialDailyDose = TRUE,</span></span>
<span><span class="co">#    numberExposures = TRUE,</span></span>
<span><span class="co">#    duration = TRUE,</span></span>
<span><span class="co">#    cumulativeDose = TRUE,</span></span>
<span><span class="co">#    numberEras = TRUE</span></span>
<span><span class="co">#  )</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="summarise-the-drug-use">Summarise the drug use<a class="anchor" aria-label="anchor" href="#summarise-the-drug-use"></a>
</h3>
<p>You can summarise the drug use using <code>summariseDrugUse</code> function</p>
<div class="sourceCode" id="cb20"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#summariseDrugUse(x, cdm)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="summarise-patient-characteristics">Summarise patient characteristics<a class="anchor" aria-label="anchor" href="#summarise-patient-characteristics"></a>
</h3>
<p>You can summarise the patient characteristics with <code>summariseCharacteristics</code> function:</p>
<div class="sourceCode" id="cb21"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://darwin-eu-dev.github.io/PatientProfiles/reference/summariseCharacteristics.html" class="external-link">summariseCharacteristics</a></span><span class="op">(</span></span>
<span>  <span class="va">x</span>, <span class="va">cdm</span>, ageGroup <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">24</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">25</span>, <span class="fl">49</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">50</span>, <span class="fl">74</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">75</span>, <span class="fl">150</span><span class="op">)</span><span class="op">)</span>,</span>
<span>  tableIntersect <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>    <span class="st">"Visits"</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>      tableName <span class="op">=</span> <span class="st">"visit_occurrence"</span>, value <span class="op">=</span> <span class="st">"count"</span>, window <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="op">-</span><span class="fl">365</span>, <span class="fl">0</span><span class="op">)</span></span>
<span>    <span class="op">)</span></span>
<span>  <span class="op">)</span>,</span>
<span>  cohortIntersect <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>    <span class="st">"Indications"</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>      targetCohortTable  <span class="op">=</span> <span class="st">"indications_cohort"</span>, value <span class="op">=</span> <span class="st">"flag"</span>, </span>
<span>      window <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="op">-</span><span class="fl">365</span>, <span class="fl">0</span><span class="op">)</span></span>
<span>    <span class="op">)</span></span>
<span>  <span class="op">)</span></span>
<span><span class="op">)</span></span>
<span><span class="co">#&gt; # A tibble: 46 × 11</span></span>
<span><span class="co">#&gt;    cdm_name result_type group_name group_level strata_name strata_level variable</span></span>
<span><span class="co">#&gt;    &lt;chr&gt;    &lt;chr&gt;       &lt;chr&gt;      &lt;chr&gt;       &lt;chr&gt;       &lt;chr&gt;        &lt;chr&gt;   </span></span>
<span><span class="co">#&gt;  1 &lt;NA&gt;     Summary ch… Cohort na… Ingredient… Overall     Overall      Number …</span></span>
<span><span class="co">#&gt;  2 &lt;NA&gt;     Summary ch… Cohort na… Ingredient… Overall     Overall      Number …</span></span>
<span><span class="co">#&gt;  3 &lt;NA&gt;     Summary ch… Cohort na… Ingredient… Overall     Overall      Age     </span></span>
<span><span class="co">#&gt;  4 &lt;NA&gt;     Summary ch… Cohort na… Ingredient… Overall     Overall      Age     </span></span>
<span><span class="co">#&gt;  5 &lt;NA&gt;     Summary ch… Cohort na… Ingredient… Overall     Overall      Age     </span></span>
<span><span class="co">#&gt;  6 &lt;NA&gt;     Summary ch… Cohort na… Ingredient… Overall     Overall      Age     </span></span>
<span><span class="co">#&gt;  7 &lt;NA&gt;     Summary ch… Cohort na… Ingredient… Overall     Overall      Age     </span></span>
<span><span class="co">#&gt;  8 &lt;NA&gt;     Summary ch… Cohort na… Ingredient… Overall     Overall      Future …</span></span>
<span><span class="co">#&gt;  9 &lt;NA&gt;     Summary ch… Cohort na… Ingredient… Overall     Overall      Future …</span></span>
<span><span class="co">#&gt; 10 &lt;NA&gt;     Summary ch… Cohort na… Ingredient… Overall     Overall      Future …</span></span>
<span><span class="co">#&gt; # ℹ 36 more rows</span></span>
<span><span class="co">#&gt; # ℹ 4 more variables: variable_level &lt;chr&gt;, variable_type &lt;chr&gt;,</span></span>
<span><span class="co">#&gt; #   estimate_type &lt;chr&gt;, estimate &lt;chr&gt;</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="summarise-patients-large-scale-characteristics">Summarise patients large scale characteristics<a class="anchor" aria-label="anchor" href="#summarise-patients-large-scale-characteristics"></a>
</h3>
<p>You can summarise the patient characteristics with <code>summariseLargeScaleCharacteristics</code> function:</p>
<div class="sourceCode" id="cb22"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="reference/summariseLargeScaleCharacteristics.html">summariseLargeScaleCharacteristics</a></span><span class="op">(</span></span>
<span>  <span class="va">x</span>, <span class="va">cdm</span>, tablesToCharacterize <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"drug_exposure"</span>, <span class="st">"condition_occurrence"</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span><span class="co">#&gt; # A tibble: 124 × 12</span></span>
<span><span class="co">#&gt;    cohort_name        strata_name strata_level table_name window_name concept_id</span></span>
<span><span class="co">#&gt;    &lt;chr&gt;              &lt;chr&gt;       &lt;chr&gt;        &lt;chr&gt;      &lt;chr&gt;            &lt;dbl&gt;</span></span>
<span><span class="co">#&gt;  1 Ingredient: aceta… Overall     Overall      condition… -inf to -3…     317009</span></span>
<span><span class="co">#&gt;  2 Ingredient: aceta… Overall     Overall      condition… -inf to -3…     378253</span></span>
<span><span class="co">#&gt;  3 Ingredient: aceta… Overall     Overall      condition… -inf to -3…    4266367</span></span>
<span><span class="co">#&gt;  4 Ingredient: aceta… Overall     Overall      condition… -365 to -91     317009</span></span>
<span><span class="co">#&gt;  5 Ingredient: aceta… Overall     Overall      condition… -365 to -91     378253</span></span>
<span><span class="co">#&gt;  6 Ingredient: aceta… Overall     Overall      condition… -365 to -91    4266367</span></span>
<span><span class="co">#&gt;  7 Ingredient: aceta… Overall     Overall      condition… -365 to -31     317009</span></span>
<span><span class="co">#&gt;  8 Ingredient: aceta… Overall     Overall      condition… -365 to -31     378253</span></span>
<span><span class="co">#&gt;  9 Ingredient: aceta… Overall     Overall      condition… -365 to -31    4266367</span></span>
<span><span class="co">#&gt; 10 Ingredient: aceta… Overall     Overall      condition… -90 to -1       317009</span></span>
<span><span class="co">#&gt; # ℹ 114 more rows</span></span>
<span><span class="co">#&gt; # ℹ 6 more variables: concept_name &lt;chr&gt;, count &lt;chr&gt;, denominator_count &lt;chr&gt;,</span></span>
<span><span class="co">#&gt; #   `%` &lt;dbl&gt;, cdm_name &lt;chr&gt;, result_type &lt;chr&gt;</span></span></code></pre></div>
</div>
</div>
<div class="section level2">
<h2 id="reportgenerator">ReportGenerator<a class="anchor" aria-label="anchor" href="#reportgenerator"></a>
</h2>
<p>This package is included in the <code>ReportGenerator</code> environment. See exportable elements:</p>
<div class="sourceCode" id="cb23"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">DrugUtilisation</span><span class="fu">::</span><span class="va">ReportGenerator</span></span></code></pre></div>
</div>
</div>
  </main><aside class="col-md-3"><div class="links">
<h2 data-toc-skip>Links</h2>
<ul class="list-unstyled">
<li><a href="https://cloud.r-project.org/package=DrugUtilisation" class="external-link">View on CRAN</a></li>
</ul>
</div>

<div class="license">
<h2 data-toc-skip>License</h2>
<ul class="list-unstyled">
<li><a href="LICENSE.html">Full license</a></li>
<li><small>Apache License (&gt;= 2)</small></li>
</ul>
</div>


<div class="citation">
<h2 data-toc-skip>Citation</h2>
<ul class="list-unstyled">
<li><a href="authors.html#citation">Citing DrugUtilisation</a></li>
</ul>
</div>

<div class="developers">
<h2 data-toc-skip>Developers</h2>
<ul class="list-unstyled">
<li>Marti Catala <br><small class="roles"> Author, maintainer </small> <a href="https://orcid.org/0000-0003-3308-9905" target="orcid.widget" aria-label="ORCID" class="external-link"><span class="fab fa-orcid orcid" aria-hidden="true"></span></a> </li>
<li>Mike Du <br><small class="roles"> Author </small> <a href="https://orcid.org/0000-0002-9517-8834" target="orcid.widget" aria-label="ORCID" class="external-link"><span class="fab fa-orcid orcid" aria-hidden="true"></span></a> </li>
<li>Yuchen Guo <br><small class="roles"> Author </small> <a href="https://orcid.org/0000-0002-0847-4855" target="orcid.widget" aria-label="ORCID" class="external-link"><span class="fab fa-orcid orcid" aria-hidden="true"></span></a> </li>
<li>Kim Lopez-Guell <br><small class="roles"> Author </small> <a href="https://orcid.org/0000-0002-8462-8668" target="orcid.widget" aria-label="ORCID" class="external-link"><span class="fab fa-orcid orcid" aria-hidden="true"></span></a> </li>
<li><a href="authors.html">More about authors...</a></li>
</ul>
</div>



  </aside>
</div>


    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by Marti Catala, Mike Du, Yuchen Guo, Kim Lopez-Guell.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
