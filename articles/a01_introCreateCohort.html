<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="DrugUtilisation">
<title>Use DrugUtilisation to create a cohort â€¢ DrugUtilisation</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.11/clipboard.min.js" integrity="sha512-7O5pXpc0oCRrxk8RUfDYFgn0nO1t+jLuIOQdOMRp4APB7uZ4vSjspzp5y6YDtDs4VzUSTbWzBFZ/LKJhnyFOKw==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Use DrugUtilisation to create a cohort">
<meta property="og:description" content="DrugUtilisation">
<meta property="og:image" content="https://darwin-eu-dev.github.io/DrugUtilisation/logo.png">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light" data-bs-theme="light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">DrugUtilisation</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.9.0.900</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="active nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/a01_introCreateCohort.html">Use DrugUtilisation to create a cohort</a>
    <a class="dropdown-item" href="../articles/a02_scalingOfInstantiateCohorts.html">Scaling of instantiate cohorts</a>
    <a class="dropdown-item" href="../articles/a03_addIndications-example.html">Add indications to Drug Utilisation Cohort</a>
    <a class="dropdown-item" href="../articles/a04_addDrugInfo.html">Add drug related information to a Drug Utilisation cohort</a>
    <a class="dropdown-item" href="../articles/a05_treatmentDiscontinuation.html">Add treatment discontinuation to a Drug Utilisation cohort</a>
    <a class="dropdown-item" href="../articles/a06_treatmentSummary.html">Add treatment summary to a Drug Utilisation cohort</a>
    <a class="dropdown-item" href="../articles/a07_characteriseACohort.html">Characterise a cohort using Drug Utilisation</a>
    <a class="dropdown-item" href="../articles/routePatternDose.html">Guide on using DrugUtilisataion package to compute drug use related information</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav"></ul>
</div>

    
  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Use DrugUtilisation to create a cohort</h1>
                        <h4 data-toc-skip class="author">Marti Catala,
Mike Du, Yuchen Guo, Kim Lopez-Guell, Edward Burn, Xintong Li</h4>
            
            <h4 data-toc-skip class="date">2024-07-04</h4>
      
      
      <div class="d-none name"><code>a01_introCreateCohort.Rmd</code></div>
    </div>

    
    
<div class="section level2">
<h2 id="introduction">Introduction<a class="anchor" aria-label="anchor" href="#introduction"></a>
</h2>
<p>In this vignette we will introduce different ways to create a drug
utilisation cohort using DrugUtilisation.</p>
<div class="section level3">
<h3 id="create-a-cdm-object">Create a cdm object<a class="anchor" aria-label="anchor" href="#create-a-cdm-object"></a>
</h3>
<p>To create a cdm_reference object you will need to use the package
CDMConnector. For this vignette we will use mock data contained in the
DrugUtilisation package.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://darwin-eu-dev.github.io/DrugUtilisation/">DrugUtilisation</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://darwin-eu.github.io/CodelistGenerator/" class="external-link">CodelistGenerator</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://darwin-eu.github.io/CDMConnector/" class="external-link">CDMConnector</a></span><span class="op">)</span></span>
<span></span>
<span><span class="va">cdm</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/mockDrugUtilisation.html">mockDrugUtilisation</a></span><span class="op">(</span>numberIndividual <span class="op">=</span> <span class="fl">200</span><span class="op">)</span></span></code></pre></div>
</div>
</div>
<div class="section level2">
<h2 id="get-the-concept-code">Get the concept code<a class="anchor" aria-label="anchor" href="#get-the-concept-code"></a>
</h2>
<p>The first thing that we need is a concept list. The concept list can
be obtained through different ways:</p>
<ol style="list-style-type: decimal">
<li>Read from .json file</li>
<li>Use concept code directly</li>
<li>Use CodelistGenerator</li>
</ol>
<div class="section level3">
<h3 id="concept-list-from-a--json-file">Concept list from a .json file<a class="anchor" aria-label="anchor" href="#concept-list-from-a--json-file"></a>
</h3>
<p>To create a cohort with a concept list from a .json file, use
<code><a href="https://darwin-eu.github.io/CodelistGenerator/reference/codesFromConceptSet.html" class="external-link">codesFromConceptSet()</a></code> from CodelistGenerator package. Letâ€™s
see an example:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">conceptSet_json</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://darwin-eu.github.io/CodelistGenerator/reference/codesFromConceptSet.html" class="external-link">codesFromConceptSet</a></span><span class="op">(</span><span class="fu">here</span><span class="fu">::</span><span class="fu"><a href="https://here.r-lib.org//reference/here.html" class="external-link">here</a></span><span class="op">(</span><span class="st">"inst/Concept"</span><span class="op">)</span>, <span class="va">cdm</span><span class="op">)</span></span>
<span><span class="va">conceptSet_json</span></span>
<span><span class="co">#&gt; $asthma</span></span>
<span><span class="co">#&gt; [1] 317009</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="concept-list-listed-directly">Concept list listed directly<a class="anchor" aria-label="anchor" href="#concept-list-listed-directly"></a>
</h3>
<p>The concept list can also be created manually:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#get concept using code directly</span></span>
<span><span class="va">conceptSet_code</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>asthma <span class="op">=</span> <span class="fl">317009</span><span class="op">)</span></span>
<span><span class="va">conceptSet_code</span></span>
<span><span class="co">#&gt; $asthma</span></span>
<span><span class="co">#&gt; [1] 317009</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="concept-list-of-an-ingredient">Concept list of an ingredient<a class="anchor" aria-label="anchor" href="#concept-list-of-an-ingredient"></a>
</h3>
<p>In case there is a certain ingredient of interest, the code can also
be obtained by <code><a href="https://darwin-eu.github.io/CodelistGenerator/reference/getDrugIngredientCodes.html" class="external-link">getDrugIngredientCodes()</a></code> from the package
CodelistGenerator.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#get concept by ingredient</span></span>
<span><span class="va">conceptSet_ingredient</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://darwin-eu.github.io/CodelistGenerator/reference/getDrugIngredientCodes.html" class="external-link">getDrugIngredientCodes</a></span><span class="op">(</span><span class="va">cdm</span>, name <span class="op">=</span> <span class="st">"simvastatin"</span><span class="op">)</span></span>
<span><span class="va">conceptSet_ingredient</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; - simvastatin (3 codes)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="concept-list-from-an-atc-code">Concept list from an ATC code<a class="anchor" aria-label="anchor" href="#concept-list-from-an-atc-code"></a>
</h3>
<p>We can also obtain the ATC code by using <code><a href="https://darwin-eu.github.io/CodelistGenerator/reference/getATCCodes.html" class="external-link">getATCCodes()</a></code>
from CodelistGenerator package.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#get concept from ATC codes</span></span>
<span><span class="va">conceptSet_ATC</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://darwin-eu.github.io/CodelistGenerator/reference/getATCCodes.html" class="external-link">getATCCodes</a></span><span class="op">(</span><span class="va">cdm</span>, </span>
<span>                              level <span class="op">=</span> <span class="st">"ATC 1st"</span>, </span>
<span>                              name <span class="op">=</span> <span class="st">"ALIMENTARY TRACT AND METABOLISM"</span><span class="op">)</span></span>
<span><span class="va">conceptSet_ATC</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; - alimentary_tract_and_metabolism (1 codes)</span></span></code></pre></div>
</div>
</div>
<div class="section level2">
<h2 id="create-a-cohort">Create a cohort<a class="anchor" aria-label="anchor" href="#create-a-cohort"></a>
</h2>
<p>Once we have the <code>conceptSet</code>, we can proceed to generate
a cohort. There are two functions in this package to do that:</p>
<ol style="list-style-type: decimal">
<li><p><code><a href="https://darwin-eu.github.io/CDMConnector/reference/generateConceptCohortSet.html" class="external-link">CDMConnector::generateConceptCohortSet()</a></code>: to
generate a cohort for a certain list of concepts (they do not have to be
a drug). This function is exported from CDMConnector package.</p></li>
<li><p><code><a href="../reference/generateDrugUtilisationCohortSet.html">generateDrugUtilisationCohortSet()</a></code>: to generate a
cohort of the drug use.</p></li>
</ol>
<div class="section level3">
<h3 id="use-cdmconnectorgenerateconceptcohortset-to-create-a-cohort">Use CDMConnector::generateConceptCohortSet() to create a cohort<a class="anchor" aria-label="anchor" href="#use-cdmconnectorgenerateconceptcohortset-to-create-a-cohort"></a>
</h3>
<p>Letâ€™s try to use <code><a href="https://darwin-eu.github.io/CDMConnector/reference/generateConceptCohortSet.html" class="external-link">generateConceptCohortSet()</a></code> to get the
asthma cohort using the <code>conceptSet_code</code> created before. We
could also use <code>conceptSet_json_1</code> or
<code>conceptSet_json_2</code> to obtain the same result.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">cdm</span> <span class="op">&lt;-</span> <span class="fu">CDMConnector</span><span class="fu">::</span><span class="fu"><a href="https://darwin-eu.github.io/CDMConnector/reference/generateConceptCohortSet.html" class="external-link">generateConceptCohortSet</a></span><span class="op">(</span><span class="va">cdm</span>,</span>
<span>  conceptSet <span class="op">=</span> <span class="va">conceptSet_code</span>,</span>
<span>  name <span class="op">=</span> <span class="st">"asthma_1"</span>,</span>
<span>  overwrite <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span>
<span><span class="va">cdm</span><span class="op">$</span><span class="va">asthma_1</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># Source:   table&lt;asthma_1&gt; [?? x 4]</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># Database: DuckDB v1.0.0 [unknown@Linux 6.5.0-1022-azure:R 4.4.1/:memory:]</span></span></span>
<span><span class="co">#&gt;    cohort_definition_id subject_id cohort_start_date cohort_end_date</span></span>
<span><span class="co">#&gt;                   <span style="color: #949494; font-style: italic;">&lt;int&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;date&gt;</span>            <span style="color: #949494; font-style: italic;">&lt;date&gt;</span>         </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span>                    1         13 2021-10-06        2022-01-05     </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span>                    1         19 2019-07-19        2022-07-04     </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span>                    1         41 2001-02-25        2010-04-09     </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span>                    1         58 2016-03-28        2020-07-23     </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span>                    1         98 2017-05-03        2018-11-21     </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span>                    1         35 2006-10-26        2019-06-27     </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span>                    1         54 1993-04-25        2010-12-15     </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span>                    1          2 2013-08-11        2013-08-18     </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span>                    1         17 2017-07-25        2022-06-10     </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span>                    1         79 2022-10-04        2022-11-08     </span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># â„¹ more rows</span></span></span></code></pre></div>
<p>The count of the cohort can be assessed using
<code><a href="https://darwin-eu-dev.github.io/omopgenerics/reference/cohortCount.html" class="external-link">cohortCount()</a></code> from CDMConnector.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://darwin-eu-dev.github.io/omopgenerics/reference/cohortCount.html" class="external-link">cohortCount</a></span><span class="op">(</span><span class="va">cdm</span><span class="op">$</span><span class="va">asthma_1</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 1 Ã— 3</span></span></span>
<span><span class="co">#&gt;   cohort_definition_id number_records number_subjects</span></span>
<span><span class="co">#&gt;                  <span style="color: #949494; font-style: italic;">&lt;int&gt;</span>          <span style="color: #949494; font-style: italic;">&lt;int&gt;</span>           <span style="color: #949494; font-style: italic;">&lt;int&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span>                    1            100             100</span></span></code></pre></div>
<p>Cohort attrition can be assessed using <code><a href="https://darwin-eu-dev.github.io/omopgenerics/reference/attrition.html" class="external-link">attrition()</a></code> from
CDMConnector.</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://darwin-eu-dev.github.io/omopgenerics/reference/attrition.html" class="external-link">attrition</a></span><span class="op">(</span><span class="va">cdm</span><span class="op">$</span><span class="va">asthma_1</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 1 Ã— 7</span></span></span>
<span><span class="co">#&gt;   cohort_definition_id number_records number_subjects reason_id reason          </span></span>
<span><span class="co">#&gt;                  <span style="color: #949494; font-style: italic;">&lt;int&gt;</span>          <span style="color: #949494; font-style: italic;">&lt;int&gt;</span>           <span style="color: #949494; font-style: italic;">&lt;int&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>           </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span>                    1            100             100         1 Initial qualifyâ€¦</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># â„¹ 2 more variables: excluded_records &lt;int&gt;, excluded_subjects &lt;int&gt;</span></span></span></code></pre></div>
<div class="section level4">
<h4 id="end-parameter">end parameter<a class="anchor" aria-label="anchor" href="#end-parameter"></a>
</h4>
<p>You can use the <code>end</code> parameter to set how the cohort end
date will be defined. By default,
<code>end = observation_period_end_date</code>, but it can also be
defined as <code>event_end_date</code> or by defining a numeric scalar.
See an example below:</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">cdm</span> <span class="op">&lt;-</span> <span class="fu">CDMConnector</span><span class="fu">::</span><span class="fu"><a href="https://darwin-eu.github.io/CDMConnector/reference/generateConceptCohortSet.html" class="external-link">generateConceptCohortSet</a></span><span class="op">(</span><span class="va">cdm</span>,</span>
<span>  conceptSet <span class="op">=</span> <span class="va">conceptSet_code</span>,</span>
<span>  name <span class="op">=</span> <span class="st">"asthma_2"</span>,</span>
<span>  end <span class="op">=</span> <span class="st">"event_end_date"</span>,</span>
<span>  overwrite <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span>
<span><span class="va">cdm</span><span class="op">$</span><span class="va">asthma_2</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># Source:   table&lt;asthma_2&gt; [?? x 4]</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># Database: DuckDB v1.0.0 [unknown@Linux 6.5.0-1022-azure:R 4.4.1/:memory:]</span></span></span>
<span><span class="co">#&gt;    cohort_definition_id subject_id cohort_start_date cohort_end_date</span></span>
<span><span class="co">#&gt;                   <span style="color: #949494; font-style: italic;">&lt;int&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;date&gt;</span>            <span style="color: #949494; font-style: italic;">&lt;date&gt;</span>         </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span>                    1         66 2018-06-21        2018-09-05     </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span>                    1        102 2011-04-07        2011-11-25     </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span>                    1        140 2019-08-25        2019-09-26     </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span>                    1          3 2011-08-09        2016-10-30     </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span>                    1         38 2013-06-10        2013-08-27     </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span>                    1         73 2021-03-01        2021-04-04     </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span>                    1        105 2018-11-29        2020-03-04     </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span>                    1        164 2022-11-11        2022-11-12     </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span>                    1        178 2006-06-19        2006-12-05     </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span>                    1         45 2021-10-06        2021-10-24     </span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># â„¹ more rows</span></span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="requiredobservation-parameter">requiredObservation parameter<a class="anchor" aria-label="anchor" href="#requiredobservation-parameter"></a>
</h4>
<p>The <code>requiredObservation</code> parameter is a numeric vector of
length 2, that defines the number of days of required observation time
prior to index and post index for an event to be included in the cohort.
The default value is <code>c(0,0)</code>. Letâ€™s check how the difference
between <strong>asthma_3</strong> and <strong>asthma_2</strong> when
changing this parameter.</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">cdm</span> <span class="op">&lt;-</span> <span class="fu">CDMConnector</span><span class="fu">::</span><span class="fu"><a href="https://darwin-eu.github.io/CDMConnector/reference/generateConceptCohortSet.html" class="external-link">generateConceptCohortSet</a></span><span class="op">(</span><span class="va">cdm</span>,</span>
<span>  conceptSet <span class="op">=</span> <span class="va">conceptSet_code</span>,</span>
<span>  name <span class="op">=</span> <span class="st">"asthma_3"</span>,</span>
<span>  end <span class="op">=</span> <span class="st">"observation_period_end_date"</span>,</span>
<span>  requiredObservation <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">10</span>, <span class="fl">10</span><span class="op">)</span>,</span>
<span>  overwrite <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span>
<span><span class="va">cdm</span><span class="op">$</span><span class="va">asthma_3</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># Source:   table&lt;asthma_3&gt; [?? x 4]</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># Database: DuckDB v1.0.0 [unknown@Linux 6.5.0-1022-azure:R 4.4.1/:memory:]</span></span></span>
<span><span class="co">#&gt;    cohort_definition_id subject_id cohort_start_date cohort_end_date</span></span>
<span><span class="co">#&gt;                   <span style="color: #949494; font-style: italic;">&lt;int&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;date&gt;</span>            <span style="color: #949494; font-style: italic;">&lt;date&gt;</span>         </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span>                    1        140 2019-08-25        2020-12-22     </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span>                    1         12 2006-08-09        2011-02-16     </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span>                    1         69 2020-09-02        2020-11-07     </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span>                    1         14 2003-12-26        2018-05-06     </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span>                    1        115 2010-12-19        2011-02-26     </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span>                    1        143 2017-12-15        2018-05-22     </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span>                    1        177 1987-03-03        1997-05-21     </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span>                    1        145 2001-09-17        2013-03-20     </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span>                    1         77 1998-05-01        1998-06-22     </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span>                    1         51 2021-05-11        2021-06-06     </span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># â„¹ more rows</span></span></span></code></pre></div>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="fu"><a href="https://darwin-eu-dev.github.io/omopgenerics/reference/cohortCount.html" class="external-link">cohortCount</a></span><span class="op">(</span><span class="va">cdm</span><span class="op">$</span><span class="va">asthma_3</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 1 Ã— 3</span></span></span>
<span><span class="co">#&gt;   cohort_definition_id number_records number_subjects</span></span>
<span><span class="co">#&gt;                  <span style="color: #949494; font-style: italic;">&lt;int&gt;</span>          <span style="color: #949494; font-style: italic;">&lt;int&gt;</span>           <span style="color: #949494; font-style: italic;">&lt;int&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span>                    1             94              94</span></span></code></pre></div>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="fu"><a href="https://darwin-eu-dev.github.io/omopgenerics/reference/attrition.html" class="external-link">attrition</a></span><span class="op">(</span><span class="va">cdm</span><span class="op">$</span><span class="va">asthma_3</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 1 Ã— 7</span></span></span>
<span><span class="co">#&gt;   cohort_definition_id number_records number_subjects reason_id reason          </span></span>
<span><span class="co">#&gt;                  <span style="color: #949494; font-style: italic;">&lt;int&gt;</span>          <span style="color: #949494; font-style: italic;">&lt;int&gt;</span>           <span style="color: #949494; font-style: italic;">&lt;int&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>           </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span>                    1             94              94         1 Initial qualifyâ€¦</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># â„¹ 2 more variables: excluded_records &lt;int&gt;, excluded_subjects &lt;int&gt;</span></span></span></code></pre></div>
</div>
</div>
<div class="section level3">
<h3 id="use-generatedrugutilisationcohortset-to-generate-a-cohort">Use generateDrugUtilisationCohortSet() to generate a cohort<a class="anchor" aria-label="anchor" href="#use-generatedrugutilisationcohortset-to-generate-a-cohort"></a>
</h3>
<p>Now letâ€™s try the function
<code><a href="../reference/generateDrugUtilisationCohortSet.html">generateDrugUtilisationCohortSet()</a></code> to get the drug cohort
for the ingredient <em>simvastatin</em>. See an example below:</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">cdm</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/generateDrugUtilisationCohortSet.html">generateDrugUtilisationCohortSet</a></span><span class="op">(</span><span class="va">cdm</span>,</span>
<span>  name <span class="op">=</span> <span class="st">"simvastin_1"</span>,</span>
<span>  conceptSet <span class="op">=</span> <span class="va">conceptSet_ingredient</span></span>
<span><span class="op">)</span></span>
<span><span class="va">cdm</span><span class="op">$</span><span class="va">simvastin_1</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># Source:   SQL [?? x 4]</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># Database: DuckDB v1.0.0 [unknown@Linux 6.5.0-1022-azure:R 4.4.1/:memory:]</span></span></span>
<span><span class="co">#&gt;    cohort_definition_id subject_id cohort_start_date cohort_end_date</span></span>
<span><span class="co">#&gt;                   <span style="color: #949494; font-style: italic;">&lt;int&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;date&gt;</span>            <span style="color: #949494; font-style: italic;">&lt;date&gt;</span>         </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span>                    1         25 1992-06-19        2009-01-18     </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span>                    1         99 1990-02-15        1990-02-16     </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span>                    1         36 2019-05-17        2019-08-31     </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span>                    1        186 2004-05-14        2010-05-23     </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span>                    1        154 2011-09-28        2011-09-29     </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span>                    1        184 2011-04-12        2012-11-06     </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span>                    1         22 2013-09-09        2016-05-19     </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span>                    1         88 1989-06-24        1990-02-10     </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span>                    1        129 2016-03-20        2019-07-16     </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span>                    1        127 2020-12-06        2022-01-10     </span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># â„¹ more rows</span></span></span></code></pre></div>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="fu"><a href="https://darwin-eu-dev.github.io/omopgenerics/reference/cohortCount.html" class="external-link">cohortCount</a></span><span class="op">(</span><span class="va">cdm</span><span class="op">$</span><span class="va">simvastin_1</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 1 Ã— 3</span></span></span>
<span><span class="co">#&gt;   cohort_definition_id number_records number_subjects</span></span>
<span><span class="co">#&gt;                  <span style="color: #949494; font-style: italic;">&lt;int&gt;</span>          <span style="color: #949494; font-style: italic;">&lt;int&gt;</span>           <span style="color: #949494; font-style: italic;">&lt;int&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span>                    1            109              99</span></span></code></pre></div>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="fu"><a href="https://darwin-eu-dev.github.io/omopgenerics/reference/attrition.html" class="external-link">attrition</a></span><span class="op">(</span><span class="va">cdm</span><span class="op">$</span><span class="va">simvastin_1</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 1 Ã— 7</span></span></span>
<span><span class="co">#&gt;   cohort_definition_id number_records number_subjects reason_id reason          </span></span>
<span><span class="co">#&gt;                  <span style="color: #949494; font-style: italic;">&lt;int&gt;</span>          <span style="color: #949494; font-style: italic;">&lt;int&gt;</span>           <span style="color: #949494; font-style: italic;">&lt;int&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>           </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span>                    1            109              99         1 Initial qualifyâ€¦</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># â„¹ 2 more variables: excluded_records &lt;int&gt;, excluded_subjects &lt;int&gt;</span></span></span></code></pre></div>
<div class="section level4">
<h4 id="imputeduration-and-durationrange-parameters">imputeDuration and durationRange parameters<a class="anchor" aria-label="anchor" href="#imputeduration-and-durationrange-parameters"></a>
</h4>
The parameter <code>durationRange</code> specifies the range within
which the duration must fall, where duration will be calculated as:
<p style="text-align:center;">
<code>duration = cohort_end_date - cohort_start_date + 1</code>
</p>
<p>The default value is <code>c(1, Inf)</code>. See that this parameter
must be a numeric vector of length two, with no NAs and with the first
value equal or bigger than the second one. Duration values outside of
<code>durationRange</code> will be imputed using
<code>imputeDuration</code>. <code>imputeDuration</code> can be set as:
<code>none</code>(default), <code>median</code>, <code>mean</code>,
<code>mode</code> or an integer (count).</p>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">cdm</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/generateDrugUtilisationCohortSet.html">generateDrugUtilisationCohortSet</a></span><span class="op">(</span><span class="va">cdm</span>,</span>
<span>  name <span class="op">=</span> <span class="st">"simvastin_2"</span>,</span>
<span>  conceptSet <span class="op">=</span> <span class="va">conceptSet_ingredient</span>,</span>
<span>  imputeDuration <span class="op">=</span> <span class="st">"none"</span>,</span>
<span>  durationRange <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="cn">Inf</span><span class="op">)</span> <span class="co"># default as c(1, Inf)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://darwin-eu-dev.github.io/omopgenerics/reference/attrition.html" class="external-link">attrition</a></span><span class="op">(</span><span class="va">cdm</span><span class="op">$</span><span class="va">simvastin_2</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 1 Ã— 7</span></span></span>
<span><span class="co">#&gt;   cohort_definition_id number_records number_subjects reason_id reason          </span></span>
<span><span class="co">#&gt;                  <span style="color: #949494; font-style: italic;">&lt;int&gt;</span>          <span style="color: #949494; font-style: italic;">&lt;int&gt;</span>           <span style="color: #949494; font-style: italic;">&lt;int&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>           </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span>                    1            109              99         1 Initial qualifyâ€¦</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># â„¹ 2 more variables: excluded_records &lt;int&gt;, excluded_subjects &lt;int&gt;</span></span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="gapera-paratemer">gapEra paratemer<a class="anchor" aria-label="anchor" href="#gapera-paratemer"></a>
</h4>
<p>The <code>gapEra</code> parameter defines the number of days between
two continuous drug exposures to be considered as a same era. Now letâ€™s
change it from 0 to a larger number to see what happens.</p>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">cdm</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/generateDrugUtilisationCohortSet.html">generateDrugUtilisationCohortSet</a></span><span class="op">(</span><span class="va">cdm</span>,</span>
<span>  name <span class="op">=</span> <span class="st">"simvastin_3"</span>,</span>
<span>  conceptSet <span class="op">=</span> <span class="va">conceptSet_ingredient</span>,</span>
<span>  imputeDuration <span class="op">=</span> <span class="st">"none"</span>,</span>
<span>  durationRange <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="cn">Inf</span><span class="op">)</span>,</span>
<span>  gapEra <span class="op">=</span> <span class="fl">30</span> <span class="co"># default as 0</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://darwin-eu-dev.github.io/omopgenerics/reference/attrition.html" class="external-link">attrition</a></span><span class="op">(</span><span class="va">cdm</span><span class="op">$</span><span class="va">simvastin_3</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="va">number_records</span>, <span class="va">reason</span>, <span class="va">excluded_records</span>, <span class="va">excluded_subjects</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 2 Ã— 4</span></span></span>
<span><span class="co">#&gt;   number_records reason                       excluded_records excluded_subjects</span></span>
<span><span class="co">#&gt;            <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                                   <span style="color: #949494; font-style: italic;">&lt;int&gt;</span>             <span style="color: #949494; font-style: italic;">&lt;int&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span>            109 Initial qualifying events                   0                 0</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span>            107 join exposures separated byâ€¦                2                 0</span></span></code></pre></div>
<p>From the <strong>simvastin_3</strong> cohort attrition, we can see
that when joining eras, it resulted in less records, compared to the
<strong>simvastin_2</strong> cohort, as exposures with less than 30 days
gaps are joined.</p>
</div>
<div class="section level4">
<h4 id="priorusewashout-parameter">priorUseWashout parameter<a class="anchor" aria-label="anchor" href="#priorusewashout-parameter"></a>
</h4>
<p>The <code>priorUseWashout</code> parameter specifies the number of
prior days without exposure (often termed as â€˜washoutâ€™) that are
required. By default, it is set to NULL, meaning no washout period is
necessary. See that when increasing this value, the number of records
decrease.</p>
<div class="sourceCode" id="cb18"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">cdm</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/generateDrugUtilisationCohortSet.html">generateDrugUtilisationCohortSet</a></span><span class="op">(</span><span class="va">cdm</span>,</span>
<span>  name <span class="op">=</span> <span class="st">"simvastin_4"</span>,</span>
<span>  conceptSet <span class="op">=</span> <span class="va">conceptSet_ingredient</span>,</span>
<span>  imputeDuration <span class="op">=</span> <span class="st">"none"</span>,</span>
<span>  durationRange <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="cn">Inf</span><span class="op">)</span>,</span>
<span>  gapEra <span class="op">=</span> <span class="fl">30</span>,</span>
<span>  priorUseWashout <span class="op">=</span> <span class="fl">30</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://darwin-eu-dev.github.io/omopgenerics/reference/attrition.html" class="external-link">attrition</a></span><span class="op">(</span><span class="va">cdm</span><span class="op">$</span><span class="va">simvastin_4</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="va">number_records</span>, <span class="va">reason</span>, <span class="va">excluded_records</span>, <span class="va">excluded_subjects</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 3 Ã— 4</span></span></span>
<span><span class="co">#&gt;   number_records reason                       excluded_records excluded_subjects</span></span>
<span><span class="co">#&gt;            <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                                   <span style="color: #949494; font-style: italic;">&lt;int&gt;</span>             <span style="color: #949494; font-style: italic;">&lt;int&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span>            109 Initial qualifying events                   0                 0</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span>            107 join exposures separated byâ€¦                2                 0</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span>            107 require prior use washout oâ€¦                0                 0</span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="priorobservation-parameter">priorObservation parameter<a class="anchor" aria-label="anchor" href="#priorobservation-parameter"></a>
</h4>
<p>The parameter <code>priorObservation</code> defines the minimum
number of days of prior observation necessary for drug eras to be taken
into account. If set to NULL, the drug eras are not required to fall
within the <em>observation_period</em>.</p>
<div class="sourceCode" id="cb19"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">cdm</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/generateDrugUtilisationCohortSet.html">generateDrugUtilisationCohortSet</a></span><span class="op">(</span><span class="va">cdm</span>,</span>
<span>  name <span class="op">=</span> <span class="st">"simvastin_5"</span>,</span>
<span>  conceptSet <span class="op">=</span> <span class="va">conceptSet_ingredient</span>,</span>
<span>  imputeDuration <span class="op">=</span> <span class="st">"none"</span>,</span>
<span>  durationRange <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="cn">Inf</span><span class="op">)</span>,</span>
<span>  gapEra <span class="op">=</span> <span class="fl">30</span>,</span>
<span>  priorUseWashout <span class="op">=</span> <span class="fl">30</span>,</span>
<span>  priorObservation <span class="op">=</span> <span class="fl">30</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://darwin-eu-dev.github.io/omopgenerics/reference/attrition.html" class="external-link">attrition</a></span><span class="op">(</span><span class="va">cdm</span><span class="op">$</span><span class="va">simvastin_5</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="va">number_records</span>, <span class="va">reason</span>, <span class="va">excluded_records</span>, <span class="va">excluded_subjects</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 3 Ã— 4</span></span></span>
<span><span class="co">#&gt;   number_records reason                       excluded_records excluded_subjects</span></span>
<span><span class="co">#&gt;            <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                                   <span style="color: #949494; font-style: italic;">&lt;int&gt;</span>             <span style="color: #949494; font-style: italic;">&lt;int&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span>            109 Initial qualifying events                   0                 0</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span>            107 join exposures separated byâ€¦                2                 0</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span>            107 require prior use washout oâ€¦                0                 0</span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="cohortdaterange-parameter">cohortDateRange parameter<a class="anchor" aria-label="anchor" href="#cohortdaterange-parameter"></a>
</h4>
<p>The <code>cohortDateRange</code> parameter defines the range for the
<em>cohort_start_date</em> and <em>cohort_end_date</em>.</p>
<div class="sourceCode" id="cb20"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">cdm</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/generateDrugUtilisationCohortSet.html">generateDrugUtilisationCohortSet</a></span><span class="op">(</span><span class="va">cdm</span>,</span>
<span>  name <span class="op">=</span> <span class="st">"simvastin_6"</span>,</span>
<span>  conceptSet <span class="op">=</span> <span class="va">conceptSet_ingredient</span>,</span>
<span>  imputeDuration <span class="op">=</span> <span class="st">"none"</span>,</span>
<span>  durationRange <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="cn">Inf</span><span class="op">)</span>,</span>
<span>  gapEra <span class="op">=</span> <span class="fl">30</span>,</span>
<span>  priorUseWashout <span class="op">=</span> <span class="fl">30</span>,</span>
<span>  priorObservation <span class="op">=</span> <span class="fl">30</span>,</span>
<span>  cohortDateRange <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/as.Date.html" class="external-link">as.Date</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"2010-01-01"</span>, <span class="st">"2011-01-01"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://darwin-eu-dev.github.io/omopgenerics/reference/attrition.html" class="external-link">attrition</a></span><span class="op">(</span><span class="va">cdm</span><span class="op">$</span><span class="va">simvastin_6</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="va">number_records</span>, <span class="va">reason</span>, <span class="va">excluded_records</span>, <span class="va">excluded_subjects</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 3 Ã— 4</span></span></span>
<span><span class="co">#&gt;   number_records reason                       excluded_records excluded_subjects</span></span>
<span><span class="co">#&gt;            <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                                   <span style="color: #949494; font-style: italic;">&lt;int&gt;</span>             <span style="color: #949494; font-style: italic;">&lt;int&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span>            109 Initial qualifying events                   0                 0</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span>            107 join exposures separated byâ€¦                2                 0</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span>            107 require prior use washout oâ€¦                0                 0</span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="limit-parameter">limit parameter<a class="anchor" aria-label="anchor" href="#limit-parameter"></a>
</h4>
<p>The input <code>limit</code> allows <code>all</code> (default) and
<code>first</code> options. If we set it to <code>first</code>, we will
only obtain the first record that fulfills all the criteria. Observe how
it impacts the attrition of the <strong>simvastin_7</strong> in
comparison to the <strong>simvastin_6</strong> cohort. The number of
records has decreased because of the <code>First</code> limit.</p>
<div class="sourceCode" id="cb21"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">cdm</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/generateDrugUtilisationCohortSet.html">generateDrugUtilisationCohortSet</a></span><span class="op">(</span><span class="va">cdm</span>,</span>
<span>  name <span class="op">=</span> <span class="st">"simvastin_7"</span>,</span>
<span>  conceptSet <span class="op">=</span> <span class="va">conceptSet_ingredient</span>,</span>
<span>  imputeDuration <span class="op">=</span> <span class="st">"none"</span>,</span>
<span>  durationRange <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="cn">Inf</span><span class="op">)</span>,</span>
<span>  gapEra <span class="op">=</span> <span class="fl">30</span>,</span>
<span>  priorUseWashout <span class="op">=</span> <span class="fl">30</span>,</span>
<span>  priorObservation <span class="op">=</span> <span class="fl">30</span>,</span>
<span>  cohortDateRange <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/as.Date.html" class="external-link">as.Date</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"2010-01-01"</span>, <span class="st">"2011-01-01"</span><span class="op">)</span><span class="op">)</span>,</span>
<span>  limit <span class="op">=</span> <span class="st">"First"</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://darwin-eu-dev.github.io/omopgenerics/reference/attrition.html" class="external-link">attrition</a></span><span class="op">(</span><span class="va">cdm</span><span class="op">$</span><span class="va">simvastin_7</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="va">number_records</span>, <span class="va">reason</span>, <span class="va">excluded_records</span>, <span class="va">excluded_subjects</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 3 Ã— 4</span></span></span>
<span><span class="co">#&gt;   number_records reason                       excluded_records excluded_subjects</span></span>
<span><span class="co">#&gt;            <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                                   <span style="color: #949494; font-style: italic;">&lt;int&gt;</span>             <span style="color: #949494; font-style: italic;">&lt;int&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span>            109 Initial qualifying events                   0                 0</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span>            107 join exposures separated byâ€¦                2                 0</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span>            107 require prior use washout oâ€¦                0                 0</span></span></code></pre></div>
<p>If we just wanted to get the first-ever era, we can also use this
parameter. To achieve that, try the following setting:</p>
<div class="sourceCode" id="cb22"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">cdm</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/generateDrugUtilisationCohortSet.html">generateDrugUtilisationCohortSet</a></span><span class="op">(</span><span class="va">cdm</span>,</span>
<span>  name <span class="op">=</span> <span class="st">"simvastin_8"</span>,</span>
<span>  conceptSet <span class="op">=</span> <span class="va">conceptSet_ingredient</span>,</span>
<span>  imputeDuration <span class="op">=</span> <span class="st">"none"</span>,</span>
<span>  durationRange <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="cn">Inf</span><span class="op">)</span>,</span>
<span>  gapEra <span class="op">=</span> <span class="fl">0</span>,</span>
<span>  priorUseWashout <span class="op">=</span> <span class="cn">Inf</span>,</span>
<span>  priorObservation <span class="op">=</span> <span class="fl">0</span>,</span>
<span>  cohortDateRange <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/as.Date.html" class="external-link">as.Date</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="cn">NA</span>, <span class="cn">NA</span><span class="op">)</span><span class="op">)</span>,</span>
<span>  limit <span class="op">=</span> <span class="st">"First"</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p>Constructing concept sets and generating various cohorts are the
initial steps in conducting a drug utilisation study. For further
guidance on using getting more information like characteristics from
these cohorts, please refer to the other vignettes.</p>
</div>
</div>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Marti Catala, Mike Du, Yuchen Guo, Kim Lopez-Guell.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.9.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
