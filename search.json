[{"path":"https://darwin-eu-dev.github.io/DrugUtilisation/LICENSE.html","id":null,"dir":"","previous_headings":"","what":"Apache License","title":"Apache License","text":"Version 2.0, January 2004 <http://www.apache.org/licenses/>","code":""},{"path":[]},{"path":"https://darwin-eu-dev.github.io/DrugUtilisation/LICENSE.html","id":"id_1-definitions","dir":"","previous_headings":"Terms and Conditions for use, reproduction, and distribution","what":"1. Definitions","title":"Apache License","text":"“License” shall mean terms conditions use, reproduction, distribution defined Sections 1 9 document. “Licensor” shall mean copyright owner entity authorized copyright owner granting License. “Legal Entity” shall mean union acting entity entities control, controlled , common control entity. purposes definition, “control” means () power, direct indirect, cause direction management entity, whether contract otherwise, (ii) ownership fifty percent (50%) outstanding shares, (iii) beneficial ownership entity. “” (“”) shall mean individual Legal Entity exercising permissions granted License. “Source” form shall mean preferred form making modifications, including limited software source code, documentation source, configuration files. “Object” form shall mean form resulting mechanical transformation translation Source form, including limited compiled object code, generated documentation, conversions media types. “Work” shall mean work authorship, whether Source Object form, made available License, indicated copyright notice included attached work (example provided Appendix ). “Derivative Works” shall mean work, whether Source Object form, based (derived ) Work editorial revisions, annotations, elaborations, modifications represent, whole, original work authorship. purposes License, Derivative Works shall include works remain separable , merely link (bind name) interfaces , Work Derivative Works thereof. “Contribution” shall mean work authorship, including original version Work modifications additions Work Derivative Works thereof, intentionally submitted Licensor inclusion Work copyright owner individual Legal Entity authorized submit behalf copyright owner. purposes definition, “submitted” means form electronic, verbal, written communication sent Licensor representatives, including limited communication electronic mailing lists, source code control systems, issue tracking systems managed , behalf , Licensor purpose discussing improving Work, excluding communication conspicuously marked otherwise designated writing copyright owner “Contribution.” “Contributor” shall mean Licensor individual Legal Entity behalf Contribution received Licensor subsequently incorporated within Work.","code":""},{"path":"https://darwin-eu-dev.github.io/DrugUtilisation/LICENSE.html","id":"id_2-grant-of-copyright-license","dir":"","previous_headings":"Terms and Conditions for use, reproduction, and distribution","what":"2. Grant of Copyright License","title":"Apache License","text":"Subject terms conditions License, Contributor hereby grants perpetual, worldwide, non-exclusive, -charge, royalty-free, irrevocable copyright license reproduce, prepare Derivative Works , publicly display, publicly perform, sublicense, distribute Work Derivative Works Source Object form.","code":""},{"path":"https://darwin-eu-dev.github.io/DrugUtilisation/LICENSE.html","id":"id_3-grant-of-patent-license","dir":"","previous_headings":"Terms and Conditions for use, reproduction, and distribution","what":"3. Grant of Patent License","title":"Apache License","text":"Subject terms conditions License, Contributor hereby grants perpetual, worldwide, non-exclusive, -charge, royalty-free, irrevocable (except stated section) patent license make, made, use, offer sell, sell, import, otherwise transfer Work, license applies patent claims licensable Contributor necessarily infringed Contribution(s) alone combination Contribution(s) Work Contribution(s) submitted. institute patent litigation entity (including cross-claim counterclaim lawsuit) alleging Work Contribution incorporated within Work constitutes direct contributory patent infringement, patent licenses granted License Work shall terminate date litigation filed.","code":""},{"path":"https://darwin-eu-dev.github.io/DrugUtilisation/LICENSE.html","id":"id_4-redistribution","dir":"","previous_headings":"Terms and Conditions for use, reproduction, and distribution","what":"4. Redistribution","title":"Apache License","text":"may reproduce distribute copies Work Derivative Works thereof medium, without modifications, Source Object form, provided meet following conditions: () must give recipients Work Derivative Works copy License; (b) must cause modified files carry prominent notices stating changed files; (c) must retain, Source form Derivative Works distribute, copyright, patent, trademark, attribution notices Source form Work, excluding notices pertain part Derivative Works; (d) Work includes “NOTICE” text file part distribution, Derivative Works distribute must include readable copy attribution notices contained within NOTICE file, excluding notices pertain part Derivative Works, least one following places: within NOTICE text file distributed part Derivative Works; within Source form documentation, provided along Derivative Works; , within display generated Derivative Works, wherever third-party notices normally appear. contents NOTICE file informational purposes modify License. may add attribution notices within Derivative Works distribute, alongside addendum NOTICE text Work, provided additional attribution notices construed modifying License. may add copyright statement modifications may provide additional different license terms conditions use, reproduction, distribution modifications, Derivative Works whole, provided use, reproduction, distribution Work otherwise complies conditions stated License.","code":""},{"path":"https://darwin-eu-dev.github.io/DrugUtilisation/LICENSE.html","id":"id_5-submission-of-contributions","dir":"","previous_headings":"Terms and Conditions for use, reproduction, and distribution","what":"5. Submission of Contributions","title":"Apache License","text":"Unless explicitly state otherwise, Contribution intentionally submitted inclusion Work Licensor shall terms conditions License, without additional terms conditions. Notwithstanding , nothing herein shall supersede modify terms separate license agreement may executed Licensor regarding Contributions.","code":""},{"path":"https://darwin-eu-dev.github.io/DrugUtilisation/LICENSE.html","id":"id_6-trademarks","dir":"","previous_headings":"Terms and Conditions for use, reproduction, and distribution","what":"6. Trademarks","title":"Apache License","text":"License grant permission use trade names, trademarks, service marks, product names Licensor, except required reasonable customary use describing origin Work reproducing content NOTICE file.","code":""},{"path":"https://darwin-eu-dev.github.io/DrugUtilisation/LICENSE.html","id":"id_7-disclaimer-of-warranty","dir":"","previous_headings":"Terms and Conditions for use, reproduction, and distribution","what":"7. Disclaimer of Warranty","title":"Apache License","text":"Unless required applicable law agreed writing, Licensor provides Work (Contributor provides Contributions) “” BASIS, WITHOUT WARRANTIES CONDITIONS KIND, either express implied, including, without limitation, warranties conditions TITLE, NON-INFRINGEMENT, MERCHANTABILITY, FITNESS PARTICULAR PURPOSE. solely responsible determining appropriateness using redistributing Work assume risks associated exercise permissions License.","code":""},{"path":"https://darwin-eu-dev.github.io/DrugUtilisation/LICENSE.html","id":"id_8-limitation-of-liability","dir":"","previous_headings":"Terms and Conditions for use, reproduction, and distribution","what":"8. Limitation of Liability","title":"Apache License","text":"event legal theory, whether tort (including negligence), contract, otherwise, unless required applicable law (deliberate grossly negligent acts) agreed writing, shall Contributor liable damages, including direct, indirect, special, incidental, consequential damages character arising result License use inability use Work (including limited damages loss goodwill, work stoppage, computer failure malfunction, commercial damages losses), even Contributor advised possibility damages.","code":""},{"path":"https://darwin-eu-dev.github.io/DrugUtilisation/LICENSE.html","id":"id_9-accepting-warranty-or-additional-liability","dir":"","previous_headings":"Terms and Conditions for use, reproduction, and distribution","what":"9. Accepting Warranty or Additional Liability","title":"Apache License","text":"redistributing Work Derivative Works thereof, may choose offer, charge fee , acceptance support, warranty, indemnity, liability obligations /rights consistent License. However, accepting obligations, may act behalf sole responsibility, behalf Contributor, agree indemnify, defend, hold Contributor harmless liability incurred , claims asserted , Contributor reason accepting warranty additional liability. END TERMS CONDITIONS","code":""},{"path":"https://darwin-eu-dev.github.io/DrugUtilisation/LICENSE.html","id":"appendix-how-to-apply-the-apache-license-to-your-work","dir":"","previous_headings":"","what":"APPENDIX: How to apply the Apache License to your work","title":"Apache License","text":"apply Apache License work, attach following boilerplate notice, fields enclosed brackets [] replaced identifying information. (Don’t include brackets!) text enclosed appropriate comment syntax file format. also recommend file class name description purpose included “printed page” copyright notice easier identification within third-party archives.","code":"Copyright [yyyy] [name of copyright owner]  Licensed under the Apache License, Version 2.0 (the \"License\"); you may not use this file except in compliance with the License. You may obtain a copy of the License at    http://www.apache.org/licenses/LICENSE-2.0  Unless required by applicable law or agreed to in writing, software distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the License for the specific language governing permissions and limitations under the License."},{"path":"https://darwin-eu-dev.github.io/DrugUtilisation/articles/TBR_add_drug_use.html","id":"introduction","dir":"Articles","previous_headings":"","what":"Introduction","title":"Add drug related information to a Drug Utilisation cohort","text":"DrugUtilisation package includes range functions add drug-related information subjects OMOP CDM tables cohort tables. vignette, explore functions provide examples usage.","code":""},{"path":"https://darwin-eu-dev.github.io/DrugUtilisation/articles/TBR_add_drug_use.html","id":"create-mock-data-first","dir":"Articles","previous_headings":"Introduction","what":"Create mock data first","title":"Add drug related information to a Drug Utilisation cohort","text":"","code":"library(DrugUtilisation) library(CDMConnector) library(dplyr) library(PatientProfiles)  cdm <- mockDrugUtilisation(numberIndividual  = 200)"},{"path":"https://darwin-eu-dev.github.io/DrugUtilisation/articles/TBR_add_drug_use.html","id":"create-a-drug-utilisation-cohort","dir":"Articles","previous_headings":"Introduction","what":"Create a drug utilisation cohort","title":"Add drug related information to a Drug Utilisation cohort","text":"use Acetaminophen example drug construct drug utilisation cohort. begin, employ getDrugIngredientCodes() function CodelistGenerator generate concept list associated Acetaminophen. Next, create drug utilisation cohort using conceptList generateDrugUtilisationCohortSet() function. better understanding arguments functionalities generateDrugUtilisationCohortSet(), please refer Use DrugUtilisation create cohort vignette.","code":"conceptList <- getDrugIngredientCodes(cdm, c(\"acetaminophen\")) conceptList #>  #> - 161_acetaminophen (4 codes) cdm <- generateDrugUtilisationCohortSet(   cdm  = cdm,   name = \"acetaminophen_example1\",   conceptSet = conceptList )"},{"path":"https://darwin-eu-dev.github.io/DrugUtilisation/articles/TBR_add_drug_use.html","id":"adding-routes-with-addroute-function","dir":"Articles","previous_headings":"","what":"Adding routes with addRoute() function","title":"Add drug related information to a Drug Utilisation cohort","text":"addRoute() function utilises internal CSV file containing possible routes various drug dose forms supported package. function designed seamlessly incorporate route information drug table supported dose forms. See example know works.","code":"cdm[[\"drug_exposure\"]] |>   addRoute()  #> # Source:   SQL [?? x 8] #> # Database: DuckDB v1.0.0 [unknown@Linux 6.5.0-1023-azure:R 4.4.1/:memory:] #>    drug_exposure_id person_id drug_concept_id drug_exposure_start_date #>               <int>     <int>           <dbl> <date>                   #>  1                1         1         1503328 2022-01-11               #>  2                2         1         2905077 2021-10-26               #>  3                3         1         1539463 2021-08-10               #>  4                4         1         1516980 2021-12-20               #>  5                5         2         1516978 2013-05-09               #>  6                6         2         2905077 2013-01-20               #>  7                7         3         1125360 2013-05-25               #>  8                9         3         1516978 2010-07-16               #>  9               10         3         2905077 2013-01-26               #> 10               11         4         1125360 2003-12-11               #> # ℹ more rows #> # ℹ 4 more variables: drug_exposure_end_date <date>, #> #   drug_type_concept_id <dbl>, quantity <dbl>, route <chr>"},{"path":"https://darwin-eu-dev.github.io/DrugUtilisation/articles/TBR_add_drug_use.html","id":"generating-patterns-with-patterntable-function","dir":"Articles","previous_headings":"","what":"Generating patterns with patternTable() function","title":"Add drug related information to a Drug Utilisation cohort","text":"patternTable() function DrugUtilisation package powerful tool deriving patterns drug strength table. function extracts distinct patterns, associating pattern_id formula_id. resulting tibble provides following data: number_concepts: count distinct concepts patterns. number_ingredients: count distinct ingredients involved. number_records: overall count records patterns. Moreover, tibble includes column indicating potentially valid invalid combinations. detailed information patterns, associated formula, combinations amount_unit, numerator_unit, denominator_unit, can refer data:","code":"patternTable(cdm) #> # A tibble: 5 × 12 #>   pattern_id formula_name            validity number_concepts number_ingredients #>        <dbl> <chr>                   <chr>              <dbl>              <dbl> #> 1          9 fixed amount formulati… pattern…               7                  4 #> 2         18 concentration formulat… pattern…               1                  1 #> 3         24 concentration formulat… pattern…               1                  1 #> 4         40 concentration formulat… pattern…               1                  1 #> 5         NA NA                      no patt…               4                  4 #> # ℹ 7 more variables: number_records <dbl>, amount_numeric <dbl>, #> #   amount_unit_concept_id <dbl>, numerator_numeric <dbl>, #> #   numerator_unit_concept_id <dbl>, denominator_numeric <dbl>, #> #   denominator_unit_concept_id <dbl> patternsWithFormula"},{"path":"https://darwin-eu-dev.github.io/DrugUtilisation/articles/TBR_add_drug_use.html","id":"get-daily-dose-with-adddailydose-function","dir":"Articles","previous_headings":"","what":"Get daily dose with addDailyDose() function","title":"Add drug related information to a Drug Utilisation cohort","text":"Now patterns formulas supported, computation daily doses can performed using addDailyDose() function. function add data additional columns, including quantity, daily dose, unit, route. also function, summariseDoseCoverage(), check coverage daily dose computation chosen concept sets ingredients.","code":"addDailyDose(   cdm$drug_exposure,   cdm = cdm,   ingredientConceptId = 1125315 ) #> # Source:   table<og_009_1721357895> [?? x 9] #> # Database: DuckDB v1.0.0 [unknown@Linux 6.5.0-1023-azure:R 4.4.1/:memory:] #>    drug_exposure_id person_id drug_concept_id drug_exposure_start_date #>               <int>     <int>           <dbl> <date>                   #>  1                2         1         2905077 2021-10-26               #>  2                6         2         2905077 2013-01-20               #>  3                7         3         1125360 2013-05-25               #>  4               10         3         2905077 2013-01-26               #>  5               11         4         1125360 2003-12-11               #>  6               13         4         1125360 1990-09-04               #>  7               15         4        43135274 1995-04-04               #>  8               21         6        43135274 2020-05-19               #>  9               25         7         2905077 2005-11-18               #> 10               26         7         2905077 2008-10-22               #> # ℹ more rows #> # ℹ 5 more variables: drug_exposure_end_date <date>, #> #   drug_type_concept_id <dbl>, quantity <dbl>, daily_dose <dbl>, unit <chr> summariseDoseCoverage(cdm, 1125315) #> ℹ The following estimates will be computed: #> • daily_dose: count_missing, percentage_missing, mean, sd, q25, median, q75 #> ! Table is collected to memory as not all requested estimates are supported on #>   the database side #> → Start summary of data, at 2024-07-19 02:58:15.759912 #>  #> ✔ Summary finished, at 2024-07-19 02:58:16.016088 #> # A tibble: 56 × 13 #>    result_id cdm_name group_name      group_level   strata_name strata_level #>        <int> <chr>    <chr>           <chr>         <chr>       <chr>        #>  1         1 DUS MOCK ingredient_name acetaminophen overall     overall      #>  2         1 DUS MOCK ingredient_name acetaminophen overall     overall      #>  3         1 DUS MOCK ingredient_name acetaminophen overall     overall      #>  4         1 DUS MOCK ingredient_name acetaminophen overall     overall      #>  5         1 DUS MOCK ingredient_name acetaminophen overall     overall      #>  6         1 DUS MOCK ingredient_name acetaminophen overall     overall      #>  7         1 DUS MOCK ingredient_name acetaminophen overall     overall      #>  8         1 DUS MOCK ingredient_name acetaminophen overall     overall      #>  9         1 DUS MOCK ingredient_name acetaminophen unit        milligram    #> 10         1 DUS MOCK ingredient_name acetaminophen unit        milligram    #> # ℹ 46 more rows #> # ℹ 7 more variables: variable_name <chr>, variable_level <chr>, #> #   estimate_name <chr>, estimate_type <chr>, estimate_value <chr>, #> #   additional_name <chr>, additional_level <chr>"},{"path":"https://darwin-eu-dev.github.io/DrugUtilisation/articles/TBR_add_drug_use.html","id":"adding-drug-usage-details-to-a-cohort-with-adddruguse-function","dir":"Articles","previous_headings":"","what":"Adding Drug Usage Details to a Cohort with addDrugUse() function","title":"Add drug related information to a Drug Utilisation cohort","text":"Additional drug usage details, including duration, initial dose, cumulative dose, etc., can incorporated cohort using addDrugUse() function.","code":"cdm$acetaminophen_example1 |>   addDrugUse(ingredientConceptId = 1125315) #> # Source:   table<og_016_1721357906> [?? x 13] #> # Database: DuckDB v1.0.0 [unknown@Linux 6.5.0-1023-azure:R 4.4.1/:memory:] #>    cohort_definition_id subject_id cohort_start_date cohort_end_date duration #>                   <int>      <int> <date>            <date>             <dbl> #>  1                    1        114 2022-10-17        2022-11-13            28 #>  2                    1        184 2009-04-22        2010-03-13           326 #>  3                    1        122 2019-11-08        2020-02-16           101 #>  4                    1          1 2021-10-26        2022-01-22            89 #>  5                    1        113 1998-10-25        1998-11-28            35 #>  6                    1         92 2013-04-13        2013-06-28            77 #>  7                    1         97 2018-04-16        2020-01-13           638 #>  8                    1         49 2021-06-30        2021-11-11           135 #>  9                    1        186 2000-10-19        2005-05-04          1659 #> 10                    1          3 2013-05-25        2015-11-12           902 #> # ℹ more rows #> # ℹ 8 more variables: number_exposures <dbl>, cumulative_quantity <dbl>, #> #   initial_quantity <dbl>, impute_duration_percentage <dbl>, #> #   number_eras <dbl>, impute_daily_dose_percentage <dbl>, #> #   initial_daily_dose_milligram <dbl>, cumulative_dose_milligram <dbl>"},{"path":"https://darwin-eu-dev.github.io/DrugUtilisation/articles/TBR_add_drug_use.html","id":"duration-parameter","dir":"Articles","previous_headings":"Adding Drug Usage Details to a Cohort with addDrugUse() function","what":"duration parameter","title":"Add drug related information to a Drug Utilisation cohort","text":"duration parameter boolean variable (TRUE/FALSE) determining whether include duration related columns, correspond : duration: duration calculated cohort_end_date - cohort_start_date + 1. impute_duration_percentage: drug exposure record duration exposure, falls outside specified duration range, duration imputed. number records imputed imputed (choose impute duration) recorded column. set imputation method duration, use imputeDuration input, can take values none (default), median, mode numerical value. Define durationRange parameter numeric vector length two, first value equal smaller second one. set NULL, restrictions applied.","code":""},{"path":"https://darwin-eu-dev.github.io/DrugUtilisation/articles/TBR_add_drug_use.html","id":"quantity-parameter","dir":"Articles","previous_headings":"Adding Drug Usage Details to a Cohort with addDrugUse() function","what":"quantity parameter","title":"Add drug related information to a Drug Utilisation cohort","text":"quantity parameter, another boolean variable (TRUE/FALSE), controls inclusion quantity-related columns. set TRUE (default), following columns added: cumulative_quantity: cumulative sum column quantity drug_exposure table drug exposure period. initial_quantity: quantity drug_exposure_start_date.","code":""},{"path":"https://darwin-eu-dev.github.io/DrugUtilisation/articles/TBR_add_drug_use.html","id":"dose-parameter","dir":"Articles","previous_headings":"Adding Drug Usage Details to a Cohort with addDrugUse() function","what":"dose parameter","title":"Add drug related information to a Drug Utilisation cohort","text":"dose parameter, also boolean variable (TRUE/FALSE), governs addition daily dose-related columns. set TRUE, following columns added: initial_daily_dose_milligram: dose drug_exposure_start_date. cumulative_dose_milligram: cumulative sum column dose drug_exposure table drug exposure period. impute_daily_dose_percentage: daily dose missing, falls outside imputation range, records imputed. column shows number records imputed imputed (choose impute daily dose). Similar duration imputation, use imputeDose parameter set method imputing daily dose, options like none (default), median, mean, mode. Define imputation range dailyDoseRange parameter, numeric vector length two, first value equal smaller second one. set NULL, restrictions applied. parameters offer flexibility customizing drug usage details added cohort. See next example, use cohort created beginning vignette acetaminophen_example1. parameters set false, number_exposures number_eras added.","code":"addDrugUse(   cohort = cdm[[\"acetaminophen_example1\"]],   cdm    = cdm,   ingredientConceptId = 1125315,   duration = TRUE,   quantity = TRUE,   dose     = TRUE ) #> # Source:   table<og_021_1721357916> [?? x 13] #> # Database: DuckDB v1.0.0 [unknown@Linux 6.5.0-1023-azure:R 4.4.1/:memory:] #>    cohort_definition_id subject_id cohort_start_date cohort_end_date duration #>                   <int>      <int> <date>            <date>             <dbl> #>  1                    1         56 2022-01-27        2022-03-04            37 #>  2                    1         66 2018-07-21        2018-10-11            83 #>  3                    1        153 2022-03-16        2022-03-28            13 #>  4                    1         64 2007-07-20        2008-05-02           288 #>  5                    1         43 1993-07-30        2010-09-05          6247 #>  6                    1        193 2004-07-22        2004-07-28             7 #>  7                    1         89 2010-11-01        2014-01-31          1188 #>  8                    1        177 1986-01-18        1997-02-05          4037 #>  9                    1         74 2019-07-11        2019-09-29            81 #> 10                    1        132 2007-11-11        2009-07-29           627 #> # ℹ more rows #> # ℹ 8 more variables: number_exposures <dbl>, cumulative_quantity <dbl>, #> #   initial_quantity <dbl>, impute_duration_percentage <dbl>, #> #   number_eras <dbl>, impute_daily_dose_percentage <dbl>, #> #   initial_daily_dose_milligram <dbl>, cumulative_dose_milligram <dbl>"},{"path":"https://darwin-eu-dev.github.io/DrugUtilisation/articles/TBR_add_drug_use.html","id":"parameters-for-joining-exposures","dir":"Articles","previous_headings":"Adding Drug Usage Details to a Cohort with addDrugUse() function","what":"Parameters for Joining Exposures","title":"Add drug related information to a Drug Utilisation cohort","text":"way continuous exposures joined can configured using different parameters. Let’s look options .","code":""},{"path":"https://darwin-eu-dev.github.io/DrugUtilisation/articles/TBR_add_drug_use.html","id":"gapera-parameter","dir":"Articles","previous_headings":"Adding Drug Usage Details to a Cohort with addDrugUse() function > Parameters for Joining Exposures","what":"gapEra parameter","title":"Add drug related information to a Drug Utilisation cohort","text":"parameter sets number days two continuous exposures considered era. previous exposure’s end date minus next exposure’s start date less equal specified gapEra, two exposures joined. Let’s see illustrative example. First, let’s create cohort gapEra = 0. better understanding, observe subject number 56. subject two different drug exposure periods separated less 6 months. Hence, two different cohort periods: Now, merge two periods modifying gapEra input creating cohort. better understanding gapEra arguments functionalities, please see Use DrugUtilisation create cohort vignette. See one record two exposures subject number 56. Note number eras still 1, defined gapEra cohort created. However, possible specify different gapEra one defined cohort created. Notice number_eras now indicates two eras within record.","code":"cdm <- generateDrugUtilisationCohortSet(   cdm = cdm,   name = \"acetaminophen_example2\",   conceptSet = conceptList,   gapEra = 0 )   cdm$drug_exposure |>   filter(drug_concept_id %in% !!conceptList$acetaminophen) |>   filter(person_id == 56) #> # Source:   SQL [0 x 7] #> # Database: DuckDB v1.0.0 [unknown@Linux 6.5.0-1023-azure:R 4.4.1/:memory:] #> # ℹ 7 variables: drug_exposure_id <int>, person_id <int>, #> #   drug_concept_id <dbl>, drug_exposure_start_date <date>, #> #   drug_exposure_end_date <date>, drug_type_concept_id <dbl>, quantity <dbl> cdm[[\"acetaminophen_example2\"]] |>   addDrugUse(     ingredientConceptId = 1125315,     gapEra = 0   ) |>   filter(subject_id == 56) #> # Source:   SQL [2 x 13] #> # Database: DuckDB v1.0.0 [unknown@Linux 6.5.0-1023-azure:R 4.4.1/:memory:] #>   cohort_definition_id subject_id cohort_start_date cohort_end_date duration #>                  <int>      <int> <date>            <date>             <dbl> #> 1                    1         56 2022-01-27        2022-03-04            37 #> 2                    1         56 2021-08-08        2021-09-17            41 #> # ℹ 8 more variables: number_exposures <dbl>, cumulative_quantity <dbl>, #> #   initial_quantity <dbl>, impute_duration_percentage <dbl>, #> #   number_eras <dbl>, impute_daily_dose_percentage <dbl>, #> #   initial_daily_dose_milligram <dbl>, cumulative_dose_milligram <dbl> cdm <- generateDrugUtilisationCohortSet(   cdm = cdm,   name = \"acetaminophen_example3\",   conceptSet = conceptList,   gapEra = 180 )  cdm$acetaminophen_example3 |>   addDrugUse(     ingredientConceptId = 1125315,     gapEra = 180,     duration = TRUE,     quantity = FALSE,     dose = FALSE   ) |>   filter(subject_id == 56)  #> # Source:   SQL [1 x 8] #> # Database: DuckDB v1.0.0 [unknown@Linux 6.5.0-1023-azure:R 4.4.1/:memory:] #>   cohort_definition_id subject_id cohort_start_date cohort_end_date duration #>                  <int>      <int> <date>            <date>             <dbl> #> 1                    1         56 2021-08-08        2022-03-04           209 #> # ℹ 3 more variables: number_exposures <dbl>, impute_duration_percentage <dbl>, #> #   number_eras <dbl> cdm$acetaminophen_example3 |>   addDrugUse(     ingredientConceptId = 1125315,     gapEra = 0   ) |>   filter(subject_id == 56)  #> # Source:   SQL [1 x 13] #> # Database: DuckDB v1.0.0 [unknown@Linux 6.5.0-1023-azure:R 4.4.1/:memory:] #>   cohort_definition_id subject_id cohort_start_date cohort_end_date duration #>                  <int>      <int> <date>            <date>             <dbl> #> 1                    1         56 2021-08-08        2022-03-04           209 #> # ℹ 8 more variables: number_exposures <dbl>, cumulative_quantity <dbl>, #> #   initial_quantity <dbl>, impute_duration_percentage <dbl>, #> #   number_eras <dbl>, impute_daily_dose_percentage <dbl>, #> #   initial_daily_dose_milligram <dbl>, cumulative_dose_milligram <dbl>"},{"path":"https://darwin-eu-dev.github.io/DrugUtilisation/articles/TBR_add_drug_use.html","id":"erajoinmode-parameter","dir":"Articles","previous_headings":"Adding Drug Usage Details to a Cohort with addDrugUse() function > Parameters for Joining Exposures","what":"eraJoinMode parameter","title":"Add drug related information to a Drug Utilisation cohort","text":"parameter defines two different continuous exposures joined era. four options: eraJoinMode = \"zero\" (default option): Exposures joined considering period continuous exposures means subject treated daily dose zero. time exposures contributes total exposed time. eraJoinMode = \"join\": Exposures joined, considering period continuous exposures means subject treated daily dose zero. time exposures contribute total exposed time. eraJoinMode = \"previous\": Exposures joined, considering period continuous exposures means subject treated daily dose previous subexposure. time exposures contributes total exposed time. eraJoinMode = \"subsequent\": Exposures joined, considering period continuous exposures means subject treated daily dose subsequent subexposure. time exposures contributes total exposed time.","code":""},{"path":"https://darwin-eu-dev.github.io/DrugUtilisation/articles/TBR_add_drug_use.html","id":"overlapmode-parameter","dir":"Articles","previous_headings":"Adding Drug Usage Details to a Cohort with addDrugUse() function > Parameters for Joining Exposures","what":"overlapMode parameter","title":"Add drug related information to a Drug Utilisation cohort","text":"parameter defines overlapping two exposures start day resolved inside subexposure. five possible options: overlapMode* = \"sum\" (default): considered daily dose sum exposures present subexposure. overlapMode = minimum: considered daily dose minimum exposures subexposure. overlapMode = maximum: considered daily dose maximum exposures subexposure. overlapMode = previous: considered daily dose earliest exposure. overlapMode = subsequent: considered daily dose latest exposure.","code":""},{"path":"https://darwin-eu-dev.github.io/DrugUtilisation/articles/TBR_add_drug_use.html","id":"sameindexmode-parameter","dir":"Articles","previous_headings":"Adding Drug Usage Details to a Cohort with addDrugUse() function > Parameters for Joining Exposures","what":"sameIndexMode parameter","title":"Add drug related information to a Drug Utilisation cohort","text":"parameter works similarly overlapMode, customizes overlapping two exposures starting date. includes options sum (default), minimum, maximum described overlapMode. example, following example sets maximum gap 30 days exposures joined. uses daily dose previous subexposure joining exposures, employs minimum daily dose exposures starting day, considers minimum daily dose exposures overlap.","code":"cdm[[\"acetaminophen_example1\"]] |>   addDrugUse(ingredientConceptId = 1125315,              gapEra = 30,              eraJoinMode = \"previous\",              overlapMode = \"minimum\",              sameIndexMode = \"minimum\") #> # Source:   table<og_040_1721357959> [?? x 13] #> # Database: DuckDB v1.0.0 [unknown@Linux 6.5.0-1023-azure:R 4.4.1/:memory:] #>    cohort_definition_id subject_id cohort_start_date cohort_end_date duration #>                   <int>      <int> <date>            <date>             <dbl> #>  1                    1        162 1964-07-20        1966-02-08           569 #>  2                    1          2 2013-01-20        2013-06-16           148 #>  3                    1         60 2020-02-05        2020-09-30           239 #>  4                    1         51 2019-05-02        2021-03-11           680 #>  5                    1         52 2014-07-27        2015-05-02           280 #>  6                    1        167 2021-08-01        2022-04-08           251 #>  7                    1         62 2008-10-07        2013-01-23          1570 #>  8                    1          7 2005-11-18        2008-07-09           965 #>  9                    1        164 2022-11-12        2022-11-15             4 #> 10                    1        114 2022-06-24        2022-07-15            22 #> # ℹ more rows #> # ℹ 8 more variables: number_exposures <dbl>, cumulative_quantity <dbl>, #> #   initial_quantity <dbl>, impute_duration_percentage <dbl>, #> #   number_eras <dbl>, impute_daily_dose_percentage <dbl>, #> #   initial_daily_dose_milligram <dbl>, cumulative_dose_milligram <dbl>"},{"path":"https://darwin-eu-dev.github.io/DrugUtilisation/articles/TBR_add_drug_use.html","id":"summarise-drug-usage-information-with-summarisedruguse-function","dir":"Articles","previous_headings":"","what":"Summarise drug usage information with summariseDrugUse() function","title":"Add drug related information to a Drug Utilisation cohort","text":"functions creates tibble summarising dose table across multiple cohorts. See example :","code":"cdm[[\"acetaminophen_example1\"]] <- cdm[[\"acetaminophen_example1\"]] |>    addDrugUse(     cdm = cdm,     ingredientConceptId = 1125315   )  summariseDrugUse(cdm[[\"acetaminophen_example1\"]]) #> # A tibble: 101 × 13 #>    result_id cdm_name group_name  group_level       strata_name strata_level #>        <int> <chr>    <chr>       <chr>             <chr>       <chr>        #>  1         1 DUS MOCK cohort_name 161_acetaminophen overall     overall      #>  2         1 DUS MOCK cohort_name 161_acetaminophen overall     overall      #>  3         1 DUS MOCK cohort_name 161_acetaminophen overall     overall      #>  4         1 DUS MOCK cohort_name 161_acetaminophen overall     overall      #>  5         1 DUS MOCK cohort_name 161_acetaminophen overall     overall      #>  6         1 DUS MOCK cohort_name 161_acetaminophen overall     overall      #>  7         1 DUS MOCK cohort_name 161_acetaminophen overall     overall      #>  8         1 DUS MOCK cohort_name 161_acetaminophen overall     overall      #>  9         1 DUS MOCK cohort_name 161_acetaminophen overall     overall      #> 10         1 DUS MOCK cohort_name 161_acetaminophen overall     overall      #> # ℹ 91 more rows #> # ℹ 7 more variables: variable_name <chr>, variable_level <chr>, #> #   estimate_name <chr>, estimate_type <chr>, estimate_value <chr>, #> #   additional_name <chr>, additional_level <chr>"},{"path":"https://darwin-eu-dev.github.io/DrugUtilisation/articles/TBR_add_drug_use.html","id":"strata-parameter","dir":"Articles","previous_headings":"Summarise drug usage information with summariseDrugUse() function","what":"strata parameter","title":"Add drug related information to a Drug Utilisation cohort","text":"can also stratify cohort calculate estimates within strata group using strata parameter.","code":"cdm[[\"acetaminophen_example1\"]] <- cdm[[\"acetaminophen_example1\"]] |>   addSex() # Function from PatientProfiles  summariseDrugUse(cdm[[\"acetaminophen_example1\"]],                  strata = list(\"sex\" = \"sex\"))  #> # A tibble: 303 × 13 #>    result_id cdm_name group_name  group_level       strata_name strata_level #>        <int> <chr>    <chr>       <chr>             <chr>       <chr>        #>  1         1 DUS MOCK cohort_name 161_acetaminophen overall     overall      #>  2         1 DUS MOCK cohort_name 161_acetaminophen overall     overall      #>  3         1 DUS MOCK cohort_name 161_acetaminophen overall     overall      #>  4         1 DUS MOCK cohort_name 161_acetaminophen overall     overall      #>  5         1 DUS MOCK cohort_name 161_acetaminophen overall     overall      #>  6         1 DUS MOCK cohort_name 161_acetaminophen overall     overall      #>  7         1 DUS MOCK cohort_name 161_acetaminophen overall     overall      #>  8         1 DUS MOCK cohort_name 161_acetaminophen overall     overall      #>  9         1 DUS MOCK cohort_name 161_acetaminophen overall     overall      #> 10         1 DUS MOCK cohort_name 161_acetaminophen overall     overall      #> # ℹ 293 more rows #> # ℹ 7 more variables: variable_name <chr>, variable_level <chr>, #> #   estimate_name <chr>, estimate_type <chr>, estimate_value <chr>, #> #   additional_name <chr>, additional_level <chr>"},{"path":"https://darwin-eu-dev.github.io/DrugUtilisation/articles/TBR_add_drug_use.html","id":"drugestimates-parameter","dir":"Articles","previous_headings":"Summarise drug usage information with summariseDrugUse() function","what":"drugEstimates parameter","title":"Add drug related information to a Drug Utilisation cohort","text":"Customize estimates calculated using drugEstimates parameter. default, compute minimum value, quartiles (5%, 25%, 50% - median, 75% 95%), maximum value, mean, standard deviation, number missings values column added addDrugUse().","code":""},{"path":"https://darwin-eu-dev.github.io/DrugUtilisation/articles/TBR_add_drug_use.html","id":"mincellcount-parameter","dir":"Articles","previous_headings":"Summarise drug usage information with summariseDrugUse() function","what":"minCellCount parameter","title":"Add drug related information to a Drug Utilisation cohort","text":"Specify minimum number individuals strata group must order appear table.","code":""},{"path":"https://darwin-eu-dev.github.io/DrugUtilisation/articles/TBR_route_pattern_dose.html","id":"adding-routes-with-addroute-function","dir":"Articles","previous_headings":"","what":"Adding Routes with addRoute Function","title":"Guide on using DrugUtilisataion package to compute drug use related information","text":"enrich drug data, DrugUtilisation package provides addRoute function. function utilizes internal CSV file containing possible routes various drug dose forms supported package. addRoute function designed seamlessly incorporate route information drug table supported dose forms. example , mock database generated using mockDrugUtilisation function, addRoute function applied demonstrate process:","code":"library(DrugUtilisation) con <- DBI::dbConnect(duckdb::duckdb(), \":memory:\") connectionDetails <- list(   con = con,   writeSchema = \"main\",   cdmPrefix = NULL,   writePrefix = NULL ) cdm <- mockDrugUtilisation(   connectionDetails = connectionDetails,   numberIndividual = 100 ) # Add route information to the drug table addRoute(cdm$drug_exposure) ## # Source:   SQL [?? x 8] ## # Database: DuckDB v1.0.0 [unknown@Linux 6.5.0-1023-azure:R 4.4.1/:memory:] ##    drug_exposure_id person_id drug_concept_id drug_exposure_start_date ##               <int>     <int>           <dbl> <date>                   ##  1                2         1         1516980 2001-02-27               ##  2                3         2         1516980 2018-03-08               ##  3                4         2         1516978 2018-05-28               ##  4                5         2         1516978 2018-06-14               ##  5                6         2         1539463 2017-07-03               ##  6                8         3        43135274 1996-09-13               ##  7               11         4         1503328 2007-05-14               ##  8               12         4         1125360 2004-12-26               ##  9               13         5         1539463 1986-08-21               ## 10               14         5         1503328 1979-06-27               ## # ℹ more rows ## # ℹ 4 more variables: drug_exposure_end_date <date>, ## #   drug_type_concept_id <dbl>, quantity <dbl>, route <chr>"},{"path":"https://darwin-eu-dev.github.io/DrugUtilisation/articles/TBR_route_pattern_dose.html","id":"generating-patterns-with-patterntable-function","dir":"Articles","previous_headings":"","what":"Generating Patterns with patternTable Function","title":"Guide on using DrugUtilisataion package to compute drug use related information","text":"patternTable function DrugUtilisation package powerful tool deriving patterns drug strength table. function extracts distinct patterns, associating pattern_id formula_id. resulting tibble provides valuable insights data: number_concepts: count distinct concepts patterns. number_ingredients: count distinct ingredients involved. number_records: overall count records patterns. Moreover, tibble includes column indicating potentially valid invalid combinations. detailed information patterns, associated formula, combinations amount_unit, numerator_unit, denominator_unit, can refer data:","code":"patternTable(cdm) ## # A tibble: 5 × 12 ##   pattern_id formula_name            validity number_concepts number_ingredients ##        <dbl> <chr>                   <chr>              <dbl>              <dbl> ## 1          9 fixed amount formulati… pattern…               7                  4 ## 2         18 concentration formulat… pattern…               1                  1 ## 3         24 concentration formulat… pattern…               1                  1 ## 4         40 concentration formulat… pattern…               1                  1 ## 5         NA NA                      no patt…               4                  4 ## # ℹ 7 more variables: number_records <dbl>, amount_numeric <dbl>, ## #   amount_unit_concept_id <dbl>, numerator_numeric <dbl>, ## #   numerator_unit_concept_id <dbl>, denominator_numeric <dbl>, ## #   denominator_unit_concept_id <dbl> patternsWithFormula"},{"path":"https://darwin-eu-dev.github.io/DrugUtilisation/articles/TBR_route_pattern_dose.html","id":"get-daily-dose","dir":"Articles","previous_headings":"","what":"Get daily dose","title":"Guide on using DrugUtilisataion package to compute drug use related information","text":"Now patterns formulas supported, computation daily doses can performed using addDailyDose function. function add data additional columns, including quantity, daily dose, unit, route. also function, summariseDoseCoverage, check coverage daily dose computation chosen concept sets ingredients.","code":"addDailyDose(   cdm$drug_exposure,   cdm = cdm,   ingredientConceptId = 1125315 ) ## # Source:   table<og_006_1721357981> [?? x 9] ## # Database: DuckDB v1.0.0 [unknown@Linux 6.5.0-1023-azure:R 4.4.1/:memory:] ##    drug_exposure_id person_id drug_concept_id drug_exposure_start_date ##               <int>     <int>           <dbl> <date>                   ##  1                8         3        43135274 1996-09-13               ##  2               12         4         1125360 2004-12-26               ##  3               17         7         1125360 1969-09-09               ##  4               23         8         2905077 2019-09-14               ##  5               24         9         1125360 2019-05-14               ##  6               27         9        43135274 2016-03-17               ##  7               34        12        43135274 2018-10-17               ##  8               35        13        43135274 1981-07-11               ##  9               40        14         1125360 1990-04-27               ## 10               49        19         2905077 2022-02-12               ## # ℹ more rows ## # ℹ 5 more variables: drug_exposure_end_date <date>, ## #   drug_type_concept_id <dbl>, quantity <dbl>, daily_dose <dbl>, unit <chr> suppressWarnings(summariseDoseCoverage(cdm, 1125315)) ## ℹ The following estimates will be computed: ## • daily_dose: count_missing, percentage_missing, mean, sd, q25, median, q75 ## ! Table is collected to memory as not all requested estimates are supported on ##   the database side ## → Start summary of data, at 2024-07-19 02:59:41.903607 ##  ## ✔ Summary finished, at 2024-07-19 02:59:42.160133 ## # A tibble: 56 × 13 ##    result_id cdm_name group_name      group_level   strata_name strata_level ##        <int> <chr>    <chr>           <chr>         <chr>       <chr>        ##  1         1 DUS MOCK ingredient_name acetaminophen overall     overall      ##  2         1 DUS MOCK ingredient_name acetaminophen overall     overall      ##  3         1 DUS MOCK ingredient_name acetaminophen overall     overall      ##  4         1 DUS MOCK ingredient_name acetaminophen overall     overall      ##  5         1 DUS MOCK ingredient_name acetaminophen overall     overall      ##  6         1 DUS MOCK ingredient_name acetaminophen overall     overall      ##  7         1 DUS MOCK ingredient_name acetaminophen overall     overall      ##  8         1 DUS MOCK ingredient_name acetaminophen overall     overall      ##  9         1 DUS MOCK ingredient_name acetaminophen unit        milligram    ## 10         1 DUS MOCK ingredient_name acetaminophen unit        milligram    ## # ℹ 46 more rows ## # ℹ 7 more variables: variable_name <chr>, variable_level <chr>, ## #   estimate_name <chr>, estimate_type <chr>, estimate_value <chr>, ## #   additional_name <chr>, additional_level <chr>"},{"path":"https://darwin-eu-dev.github.io/DrugUtilisation/articles/TBR_route_pattern_dose.html","id":"adding-drug-usage-details-to-a-cohort-with-adddruguse","dir":"Articles","previous_headings":"","what":"Adding Drug Usage Details to a Cohort with addDrugUse","title":"Guide on using DrugUtilisataion package to compute drug use related information","text":"Additional drug usage details, including duration, initial dose, cumulative dose, etc., can incorporated cohort using addDrugUse function.","code":""},{"path":[]},{"path":"https://darwin-eu-dev.github.io/DrugUtilisation/articles/TBR_route_pattern_dose.html","id":"duration-parameter","dir":"Articles","previous_headings":"Adding Drug Usage Details to a Cohort with addDrugUse > Parameters in addDrugUse Function","what":"duration Parameter","title":"Guide on using DrugUtilisataion package to compute drug use related information","text":"duration parameter boolean variable (TRUE/FALSE) determining whether include duration column. set TRUE, duration calculated cohort_end_date - cohort_start_date + 1. Additionally, column named impute_duration_percentage added, reporting percentage imputed duration. set imputation method duration, use imputeDuration parameter, can take values “none,” “median,” “mean,” “mode.” Define imputation range durationRange parameter, numeric vector length two, first value equal smaller second one.","code":""},{"path":"https://darwin-eu-dev.github.io/DrugUtilisation/articles/TBR_route_pattern_dose.html","id":"quantity-parameter","dir":"Articles","previous_headings":"Adding Drug Usage Details to a Cohort with addDrugUse > Parameters in addDrugUse Function","what":"quantity Parameter","title":"Guide on using DrugUtilisataion package to compute drug use related information","text":"quantity parameter, another boolean variable (TRUE/FALSE), controls inclusion quantity-related columns. set TRUE, columns initial quantity cumulative quantity added.","code":""},{"path":"https://darwin-eu-dev.github.io/DrugUtilisation/articles/TBR_route_pattern_dose.html","id":"dose-parameter","dir":"Articles","previous_headings":"Adding Drug Usage Details to a Cohort with addDrugUse > Parameters in addDrugUse Function","what":"dose Parameter","title":"Guide on using DrugUtilisataion package to compute drug use related information","text":"dose parameter, also boolean variable (TRUE/FALSE), governs addition daily dose-related columns. set TRUE, columns initial daily dose cumulative daily dose incorporated. Moreover, column named impute_daily_dose_percentage added, reporting percentage imputed daily dose. Similar duration imputation, use imputeDuration parameter set method imputing daily dose, options like “none,” “median,” “mean,” “mode.” Define imputation range dailyDoseRange parameter, numeric vector length two. parameters offer flexibility customizing drug usage details added cohort. example provided parameters set TRUE, utilizing drug ingredient acetaminophen.","code":"library(CodelistGenerator) cdm <- mockDrugUtilisation() cdm <- generateDrugUtilisationCohortSet(   cdm, \"dus_cohort\", getDrugIngredientCodes(cdm, \"acetaminophen\") ) cdm[[\"dus_cohort\"]] %>%   addDrugUse(cdm,              duration = TRUE,              quantity = TRUE,              dose = TRUE,              1125315) ## Warning: `addDrugUse()` was deprecated in DrugUtilisation 0.7.0. ## ℹ Please use `addDrugUtilisation()` instead. ## This warning is displayed once every 8 hours. ## Call `lifecycle::last_lifecycle_warnings()` to see where this warning was ## generated. ## Warning: The `cdm` argument of `addDrugUse()` is deprecated as of DrugUtilisation 0.5.0. ## This warning is displayed once every 8 hours. ## Call `lifecycle::last_lifecycle_warnings()` to see where this warning was ## generated. ## # Source:   table<og_016_1721358003> [?? x 13] ## # Database: DuckDB v1.0.0 [unknown@Linux 6.5.0-1023-azure:R 4.4.1/:memory:] ##    cohort_definition_id subject_id cohort_start_date cohort_end_date duration ##                   <int>      <int> <date>            <date>             <dbl> ##  1                    1          2 2022-05-24        2022-06-02            10 ##  2                    1          1 2021-02-25        2021-03-11            15 ##  3                    1          9 2022-09-11        2022-11-09            60 ##  4                    1          7 2016-02-01        2017-10-04           612 ##  5                    1          8 2012-02-15        2012-02-17             3 ##  6                    1          5 2014-07-28        2019-11-20          1942 ##  7                    1          4 2021-05-05        2021-12-15           225 ##  8                    1          2 2022-06-06        2022-06-07             2 ##  9                    1          3 2009-04-18        2009-11-07           204 ## 10                    1          6 1991-01-28        1991-09-17           233 ## # ℹ more rows ## # ℹ 8 more variables: number_exposures <dbl>, cumulative_quantity <dbl>, ## #   initial_quantity <dbl>, impute_duration_percentage <dbl>, ## #   number_eras <dbl>, impute_daily_dose_percentage <dbl>, ## #   initial_daily_dose_milligram <dbl>, cumulative_dose_milligram <dbl>"},{"path":"https://darwin-eu-dev.github.io/DrugUtilisation/articles/TBR_route_pattern_dose.html","id":"parameters-for-joining-exposures","dir":"Articles","previous_headings":"Adding Drug Usage Details to a Cohort with addDrugUse","what":"Parameters for Joining Exposures","title":"Guide on using DrugUtilisataion package to compute drug use related information","text":"Finally, way continuous exposures joined can configured using following parameters:","code":""},{"path":"https://darwin-eu-dev.github.io/DrugUtilisation/articles/TBR_route_pattern_dose.html","id":"gapera","dir":"Articles","previous_headings":"Adding Drug Usage Details to a Cohort with addDrugUse > Parameters for Joining Exposures","what":"gapEra:","title":"Guide on using DrugUtilisataion package to compute drug use related information","text":"parameter sets number days two continuous exposures considered era. previous exposure’s end date minus next exposure’s start date less equal specified gapEra, two exposures joined.","code":""},{"path":"https://darwin-eu-dev.github.io/DrugUtilisation/articles/TBR_route_pattern_dose.html","id":"erajoinmode","dir":"Articles","previous_headings":"Adding Drug Usage Details to a Cohort with addDrugUse > Parameters for Joining Exposures","what":"eraJoinMode:","title":"Guide on using DrugUtilisataion package to compute drug use related information","text":"parameter defines two different continuous exposures joined era. four options: - “zero”: Exposures joined, considering period continuous exposures means subject treated daily dose zero. time exposures contributes total exposed time. - “join”: Exposures joined, considering period continuous exposures means subject treated daily dose zero. time exposures contribute total exposed time. - “previous”: Exposures joined, considering period continuous exposures means subject treated daily dose previous subexposure. time exposures contributes total exposed time. - “subsequent”: Exposures joined, considering period continuous exposures means subject treated daily dose subsequent subexposure. time exposures contributes total exposed time.","code":""},{"path":"https://darwin-eu-dev.github.io/DrugUtilisation/articles/TBR_route_pattern_dose.html","id":"overlapmode-this-parameter-defines-how-the-overlapping-between-two-exposures-that-do-not-start-on-the-same-day-is-resolved-inside-a-subexposure--there-are-five-possible-options","dir":"Articles","previous_headings":"Adding Drug Usage Details to a Cohort with addDrugUse > Parameters for Joining Exposures","what":"overlapMode: This parameter defines how the overlapping between two exposures that do not start on the same day is resolved inside a subexposure. There are five possible options:","title":"Guide on using DrugUtilisataion package to compute drug use related information","text":"","code":"- \"previous\": The considered daily dose is that of the earliest exposure. - \"subsequent\": The considered daily dose is that of the new exposure that starts in that subexposure. - \"minimum\": The considered daily dose is the minimum of all the exposures in the subexposure. - \"maximum\": The considered daily dose is the maximum of all the exposures in the subexposure. - \"sum\": The considered daily dose is the sum of all the exposures present in the subexposure."},{"path":"https://darwin-eu-dev.github.io/DrugUtilisation/articles/TBR_route_pattern_dose.html","id":"sameindexmode-this-parameter-defines-how-the-overlapping-between-two-exposures-that-start-on-the-same-day-is-resolved-inside-a-subexposure--there-are-three-possible-options","dir":"Articles","previous_headings":"Adding Drug Usage Details to a Cohort with addDrugUse > Parameters for Joining Exposures","what":"sameIndexMode: This parameter defines how the overlapping between two exposures that start on the same day is resolved inside a subexposure. There are three possible options:","title":"Guide on using DrugUtilisataion package to compute drug use related information","text":"example, following settings maximum gap 30 days exposures joined. uses daily dose previous subexposure joining exposures, employs minimum daily dose exposures starting day, considers minimum daily dose exposures overlap.","code":"- \"minimum\": The considered daily dose is the minimum of all the exposures in the subexposure. - \"maximum\": The considered daily dose is the maximum of all the exposures in the subexposure. - \"sum\": The considered daily dose is the sum of all the exposures present in the subexposure. cdm[[\"dus_cohort\"]] %>%   addDrugUse(cdm,              ingredientConceptId = 1125315,              gapEra = 30,              eraJoinMode = \"previous\",              overlapMode = \"minimum\",              sameIndexMode = \"minimum\") ## # Source:   table<og_021_1721358015> [?? x 13] ## # Database: DuckDB v1.0.0 [unknown@Linux 6.5.0-1023-azure:R 4.4.1/:memory:] ##    cohort_definition_id subject_id cohort_start_date cohort_end_date duration ##                   <int>      <int> <date>            <date>             <dbl> ##  1                    1          5 2014-07-28        2019-11-20          1942 ##  2                    1          8 2012-02-15        2012-02-17             3 ##  3                    1          7 2016-02-01        2017-10-04           612 ##  4                    1          1 2021-02-25        2021-03-11            15 ##  5                    1          9 2022-09-11        2022-11-09            60 ##  6                    1          2 2022-05-24        2022-06-02            10 ##  7                    1          7 2018-05-21        2018-07-20            61 ##  8                    1          3 2009-04-18        2009-11-07           204 ##  9                    1          6 1991-01-28        1991-09-17           233 ## 10                    1          2 2022-06-06        2022-06-07             2 ## # ℹ more rows ## # ℹ 8 more variables: number_exposures <dbl>, cumulative_quantity <dbl>, ## #   initial_quantity <dbl>, impute_duration_percentage <dbl>, ## #   number_eras <dbl>, impute_daily_dose_percentage <dbl>, ## #   initial_daily_dose_milligram <dbl>, cumulative_dose_milligram <dbl> DBI::dbDisconnect(con, shutdown = TRUE)"},{"path":"https://darwin-eu-dev.github.io/DrugUtilisation/articles/create_cohorts.html","id":"introduction","dir":"Articles","previous_headings":"","what":"Introduction","title":"Use DrugUtilisation to create a cohort","text":"vignette introduce create drug users cohorts. cohort set people satisfy certain inclusion criteria durng certain time frame. cohort object defined : vignette(\"a03_cohort_table\", package = \"omopgenerics\"). function generateDrugUtilisationCohortSet used generate cohorts drug users based drug_exposure table conceptSet. cohorts can subsetted exposures interest applying different inclusion criteria: Require entries certain date range requireDrugInDateRange(). Subset first entry requireIsFirstDrugEntry(). Require certain time observation entries requireObservationBeforeDrug(). Require certain time exposure requirePriorDrugWashout().","code":""},{"path":"https://darwin-eu-dev.github.io/DrugUtilisation/articles/create_cohorts.html","id":"creating-a-cdm_reference-object","dir":"Articles","previous_headings":"","what":"Creating a cdm_reference object","title":"Use DrugUtilisation to create a cohort","text":"first thing need cdm reference object OMOP CDM instance. can learn create cdm references using CDMConnector : CDMConnector::a04_DBI_connection_examples DrugUtilisation packages contains mock data can useful test package:","code":"library(DrugUtilisation)  cdm <- mockDrugUtilisation(numberIndividuals = 100, seed = 1)  cdm #>  #> ── # OMOP CDM reference (duckdb) of DUS MOCK ─────────────────────────────────── #> • omop tables: person, observation_period, concept, concept_ancestor, #> drug_strength, drug_exposure, condition_occurrence, visit_occurrence, #> observation, concept_relationship #> • cohort tables: cohort1, cohort2 #> • achilles tables: - #> • other tables: -"},{"path":"https://darwin-eu-dev.github.io/DrugUtilisation/articles/create_cohorts.html","id":"create-a-drug-users-cohort","dir":"Articles","previous_headings":"","what":"Create a drug users cohort","title":"Use DrugUtilisation to create a cohort","text":"create basic drug users cohort need two things: conceptSet: determine concepts use. gapEra: determine collapse exposures.","code":""},{"path":"https://darwin-eu-dev.github.io/DrugUtilisation/articles/create_cohorts.html","id":"creating-a-conceptset","dir":"Articles","previous_headings":"Create a drug users cohort","what":"Creating a conceptSet","title":"Use DrugUtilisation to create a cohort","text":"four possible outputs conceptSet: named list concept ids codelist object, see omopgenerics “a02_concept_set” codelist_with_details object, see omopgenerics “a02_concept_set” conceptSetExpression object, see omopgenerics “a02_concept_set” package CodelistGenerator can useful create conceptSet. example can create conceptSet based ingredient getDrugIngredientCodes(): also use function codesFromConceptSet() read concept set json file:","code":"conceptSet <- list(acetaminophen = c(1, 2, 3)) conceptSet #> $acetaminophen #> [1] 1 2 3 conceptSet <- list(acetaminophen = c(1, 2, 3)) |> omopgenerics::newCodelist() conceptSet #>  #> ── 1 codelist ────────────────────────────────────────────────────────────────── #>  #> - acetaminophen (3 codes) conceptSet$acetaminophen #> [1] 1 2 3 conceptSet <- list(acetaminophen = dplyr::tibble(   concept_id = c(1125315, 1125360),   concept_name = c(\"acetaminophen\", \"acetaminophen 500 MG Oral Capsule\"),   domain_id = \"Drug\",   vocabulary_id = \"RxNorm\",   standard_concept = \"S\" )) |>    omopgenerics::newCodelistWithDetails() conceptSet #>  #> ── 1 codelist with details ───────────────────────────────────────────────────── #>  #> - acetaminophen (5 codes) conceptSet$acetaminophen #> # A tibble: 2 × 5 #>   concept_id concept_name               domain_id vocabulary_id standard_concept #>        <dbl> <chr>                      <chr>     <chr>         <chr>            #> 1    1125315 acetaminophen              Drug      RxNorm        S                #> 2    1125360 acetaminophen 500 MG Oral… Drug      RxNorm        S conceptSet <- list(acetaminophen = dplyr::tibble(   concept_id = 1125315,    excluded = FALSE,   descendants = TRUE,   mapped = FALSE )) |>    omopgenerics::newConceptSetExpression() conceptSet #>  #> ── 1 conceptSetExpression ────────────────────────────────────────────────────── #>  #> - acetaminophen (1 concept criteria) conceptSet$acetaminophen #> # A tibble: 1 × 4 #>   concept_id excluded descendants mapped #>        <dbl> <lgl>    <lgl>       <lgl>  #> 1    1125315 FALSE    TRUE        FALSE library(CodelistGenerator) codes <- getDrugIngredientCodes(cdm = cdm, name = \"acetaminophen\") codes[[\"161_acetaminophen\"]] #> [1]  1125315  1125360  2905077 43135274 codes <- codesFromConceptSet(path = system.file(\"acetaminophen.json\", package = \"DrugUtilisation\"), cdm = cdm) codes #>  #> ── 1 codelist ────────────────────────────────────────────────────────────────── #>  #> - acetaminophen (4 codes)"},{"path":"https://darwin-eu-dev.github.io/DrugUtilisation/articles/create_cohorts.html","id":"the-gapera-parameter","dir":"Articles","previous_headings":"Create a drug users cohort","what":"The gapEra parameter","title":"Use DrugUtilisation to create a cohort","text":"gapEra parameter used join exposures episodes, let’s say example individual 4 drug exposures interedted . first two overlap , gap 29 days two consecutive exposures:  create episode gapEra = 0, 3 resultant episodes, first two overlap joined single episode, two independent:  , instead use gapEra = 1, 2 resultant episodes, first two overlap joined single episode (), now two consecutives exposures joined single episode:  result value 1 28 (gapEra ∈ [1, 28]). Whereas, use gapEra = 29 records collapsed single episode:","code":"#> # A tibble: 3 × 4 #>   cohort_definition_id subject_id cohort_start_date cohort_end_date #>                  <int>      <int> <date>            <date>          #> 1                    1          1 2020-01-01        2020-02-15      #> 2                    1          1 2020-03-15        2020-04-19      #> 3                    1          1 2020-04-20        2020-05-15 #> # A tibble: 2 × 4 #>   cohort_definition_id subject_id cohort_start_date cohort_end_date #>                  <int>      <int> <date>            <date>          #> 1                    1          1 2020-01-01        2020-02-15      #> 2                    1          1 2020-03-15        2020-05-15 #> # A tibble: 1 × 4 #>   cohort_definition_id subject_id cohort_start_date cohort_end_date #>                  <int>      <int> <date>            <date>          #> 1                    1          1 2020-01-01        2020-05-15"},{"path":"https://darwin-eu-dev.github.io/DrugUtilisation/articles/create_cohorts.html","id":"create-your-cohort","dir":"Articles","previous_headings":"Create a drug users cohort","what":"Create your cohort","title":"Use DrugUtilisation to create a cohort","text":"create now cohort drug users acetaminophen gapEra 30 days. NOTE name argument used create new table cdm object. database backends name table created. can compare see expect look individual records can see joined single exposure records overlap : case gapEra big impact can see attrition: can see particular case individual: case 3 exposures separated 3 days, use 30 days gap exposures joined single episode, wheras use gapEra smaller 3 consider different episodes. can access cohort attributes using adequate functions. settings can see gapEra used recorded cohortCodelist can see codelist used create cohort.","code":"codes <- getDrugIngredientCodes(cdm = cdm, name = \"acetaminophen\") names(codes) <- \"acetaminophen\" cdm <- generateDrugUtilisationCohortSet(cdm = cdm, name = \"acetaminophen_cohort\", conceptSet = codes, gapEra = 30) cdm #>  #> ── # OMOP CDM reference (duckdb) of DUS MOCK ─────────────────────────────────── #> • omop tables: person, observation_period, concept, concept_ancestor, #> drug_strength, drug_exposure, condition_occurrence, visit_occurrence, #> observation, concept_relationship #> • cohort tables: cohort1, cohort2, acetaminophen_cohort #> • achilles tables: - #> • other tables: - cdm$drug_exposure |>   dplyr::filter(drug_concept_id %in% !!codes$acetaminophen & person_id == 69) #> # Source:   SQL [4 x 7] #> # Database: DuckDB v1.0.0 [unknown@Linux 6.5.0-1023-azure:R 4.4.1/:memory:] #>   drug_exposure_id person_id drug_concept_id drug_exposure_start_date #>              <int>     <int>           <dbl> <date>                   #> 1              201        69         2905077 2002-01-29               #> 2              203        69         2905077 2001-04-23               #> 3              205        69         2905077 2001-03-04               #> 4              204        69        43135274 2003-10-16               #> # ℹ 3 more variables: drug_exposure_end_date <date>, #> #   drug_type_concept_id <dbl>, quantity <dbl> cdm$acetaminophen_cohort |>   dplyr::filter(subject_id == 69) #> # Source:   SQL [1 x 4] #> # Database: DuckDB v1.0.0 [unknown@Linux 6.5.0-1023-azure:R 4.4.1/:memory:] #>   cohort_definition_id subject_id cohort_start_date cohort_end_date #>                  <int>      <int> <date>            <date>          #> 1                    1         69 2001-03-04        2004-06-02 attrition(cdm$acetaminophen_cohort) #> # A tibble: 2 × 7 #>   cohort_definition_id number_records number_subjects reason_id reason           #>                  <int>          <int>           <int>     <int> <chr>            #> 1                    1             71              62         1 Initial qualify… #> 2                    1             70              62         2 join exposures … #> # ℹ 2 more variables: excluded_records <int>, excluded_subjects <int> cdm$drug_exposure |>   dplyr::filter(drug_concept_id %in% !!codes$acetaminophen & person_id == 50) #> # Source:   SQL [2 x 7] #> # Database: DuckDB v1.0.0 [unknown@Linux 6.5.0-1023-azure:R 4.4.1/:memory:] #>   drug_exposure_id person_id drug_concept_id drug_exposure_start_date #>              <int>     <int>           <dbl> <date>                   #> 1              143        50         1125360 2017-04-14               #> 2              144        50        43135274 2017-04-01               #> # ℹ 3 more variables: drug_exposure_end_date <date>, #> #   drug_type_concept_id <dbl>, quantity <dbl> cdm$acetaminophen_cohort |>   dplyr::filter(subject_id == 50) #> # Source:   SQL [1 x 4] #> # Database: DuckDB v1.0.0 [unknown@Linux 6.5.0-1023-azure:R 4.4.1/:memory:] #>   cohort_definition_id subject_id cohort_start_date cohort_end_date #>                  <int>      <int> <date>            <date>          #> 1                    1         50 2017-04-01        2017-04-23 settings(cdm$acetaminophen_cohort) #> # A tibble: 1 × 3 #>   cohort_definition_id cohort_name   gap_era #>                  <int> <chr>         <chr>   #> 1                    1 acetaminophen 30 cohortCount(cdm$acetaminophen_cohort) #> # A tibble: 1 × 3 #>   cohort_definition_id number_records number_subjects #>                  <int>          <int>           <int> #> 1                    1             70              62 cohortCodelist(cdm$acetaminophen_cohort, cohortId = 1) #>  #> ── 1 codelist ────────────────────────────────────────────────────────────────── #>  #> - acetaminophen (4 codes)"},{"path":"https://darwin-eu-dev.github.io/DrugUtilisation/articles/create_cohorts.html","id":"apply-inclusion-criteria-to-drug-cohorts","dir":"Articles","previous_headings":"","what":"Apply inclusion criteria to drug cohorts","title":"Use DrugUtilisation to create a cohort","text":"created base cohort using conceptSet gapEra can apply different restrictions: require prior un exposed time: requirePriorDrugWashout() require first entry: requireIsFirstDrugEntry() require prior observation cdm: requireObservationBeforeDrug() require date within certain interval: requireDrugInDateRange()","code":""},{"path":"https://darwin-eu-dev.github.io/DrugUtilisation/articles/create_cohorts.html","id":"requirepriordrugwashout","dir":"Articles","previous_headings":"Apply inclusion criteria to drug cohorts","what":"requirePriorDrugWashout()","title":"Use DrugUtilisation to create a cohort","text":"require cohort entries (drug episodes) incident usually define time (priorUseWashout) individual exposed drug. can achieved using requirePriorDrugWashout() function. example restrict individuals 365 days exposure: result cohort individuals fulfill criteria: also get recorded attrition, counts settings. settings new column specified parameter used: counts updated: attrition new line: name argument can used put result different table cdm (default function updates current cohort table). Whereas cohortId argument used apply criteria restricted set cohorts (default criteria applied cohort records). show example create two cohorts (metformin simvastatin) inside table named my_cohort apply inclusion criteria one (simvastatin) save result table named: my_new_cohort","code":"cdm$acetaminophen_cohort <- cdm$acetaminophen_cohort |>   requirePriorDrugWashout(priorUseWashout = 365) cdm$acetaminophen_cohort #> # Source:   table<main.acetaminophen_cohort> [?? x 4] #> # Database: DuckDB v1.0.0 [unknown@Linux 6.5.0-1023-azure:R 4.4.1/:memory:] #>    cohort_definition_id subject_id cohort_start_date cohort_end_date #>                   <int>      <int> <date>            <date>          #>  1                    1         35 2005-11-10        2006-09-09      #>  2                    1         44 2017-01-01        2018-03-30      #>  3                    1         23 2003-10-29        2003-11-27      #>  4                    1         73 2011-04-02        2011-06-19      #>  5                    1         45 2017-07-03        2018-07-06      #>  6                    1         25 2020-01-04        2020-02-05      #>  7                    1         87 2020-10-02        2021-01-02      #>  8                    1         57 2020-04-17        2020-11-19      #>  9                    1         77 1966-09-15        1966-12-27      #> 10                    1         99 2015-02-03        2020-11-01      #> # ℹ more rows settings(cdm$acetaminophen_cohort) #> # A tibble: 1 × 4 #>   cohort_definition_id cohort_name   gap_era prior_use_washout #>                  <int> <chr>         <chr>   <chr>             #> 1                    1 acetaminophen 30      365 cohortCount(cdm$acetaminophen_cohort) #> # A tibble: 1 × 3 #>   cohort_definition_id number_records number_subjects #>                  <int>          <int>           <int> #> 1                    1             66              62 attrition(cdm$acetaminophen_cohort) #> # A tibble: 3 × 7 #>   cohort_definition_id number_records number_subjects reason_id reason           #>                  <int>          <int>           <int>     <int> <chr>            #> 1                    1             71              62         1 Initial qualify… #> 2                    1             70              62         2 join exposures … #> 3                    1             66              62         3 require prior u… #> # ℹ 2 more variables: excluded_records <int>, excluded_subjects <int> codes <- getDrugIngredientCodes(cdm = cdm, name = c(\"metformin\", \"simvastatin\")) cdm <- generateDrugUtilisationCohortSet(cdm = cdm, name = \"my_cohort\", conceptSet = codes, gapEra = 30) cdm #>  #> ── # OMOP CDM reference (duckdb) of DUS MOCK ─────────────────────────────────── #> • omop tables: person, observation_period, concept, concept_ancestor, #> drug_strength, drug_exposure, condition_occurrence, visit_occurrence, #> observation, concept_relationship #> • cohort tables: cohort1, cohort2, acetaminophen_cohort, my_cohort #> • achilles tables: - #> • other tables: - settings(cdm$my_cohort) #> # A tibble: 2 × 3 #>   cohort_definition_id cohort_name       gap_era #>                  <int> <chr>             <chr>   #> 1                    1 6809_metformin    30      #> 2                    2 36567_simvastatin 30 cdm$my_new_cohort <- cdm$my_cohort |>   requirePriorDrugWashout(priorUseWashout = 365, cohortId = 2, name = \"my_new_cohort\") cdm #>  #> ── # OMOP CDM reference (duckdb) of DUS MOCK ─────────────────────────────────── #> • omop tables: person, observation_period, concept, concept_ancestor, #> drug_strength, drug_exposure, condition_occurrence, visit_occurrence, #> observation, concept_relationship #> • cohort tables: cohort1, cohort2, acetaminophen_cohort, my_cohort, #> my_new_cohort #> • achilles tables: - #> • other tables: - attrition(cdm$my_new_cohort) #> # A tibble: 5 × 7 #>   cohort_definition_id number_records number_subjects reason_id reason           #>                  <int>          <int>           <int>     <int> <chr>            #> 1                    1             55              48         1 Initial qualify… #> 2                    1             52              48         2 join exposures … #> 3                    2             53              48         1 Initial qualify… #> 4                    2             51              48         2 join exposures … #> 5                    2             51              48         3 require prior u… #> # ℹ 2 more variables: excluded_records <int>, excluded_subjects <int>"},{"path":"https://darwin-eu-dev.github.io/DrugUtilisation/articles/create_cohorts.html","id":"requireisfirstdrugentry","dir":"Articles","previous_headings":"Apply inclusion criteria to drug cohorts","what":"requireIsFirstDrugEntry()","title":"Use DrugUtilisation to create a cohort","text":"require cohort entry (drug episodes) first one available ones can use requireIsFirstDrugEntry() function. See example: result cohort individuals fulfill criteria: also get recorded attrition, counts settings top already exiting ones. settings new column specified parameter used: counts updated: attrition new line:","code":"cdm$acetaminophen_cohort <- cdm$acetaminophen_cohort |>   requireIsFirstDrugEntry() cdm$acetaminophen_cohort #> # Source:   table<main.acetaminophen_cohort> [?? x 4] #> # Database: DuckDB v1.0.0 [unknown@Linux 6.5.0-1023-azure:R 4.4.1/:memory:] #>    cohort_definition_id subject_id cohort_start_date cohort_end_date #>                   <int>      <int> <date>            <date>          #>  1                    1         27 2019-05-22        2020-02-05      #>  2                    1         61 2017-09-27        2020-04-16      #>  3                    1         81 1995-09-13        1997-11-17      #>  4                    1         88 2015-08-19        2016-05-09      #>  5                    1        100 2022-12-01        2022-12-02      #>  6                    1         12 2018-10-17        2020-12-28      #>  7                    1         13 1981-07-11        1981-09-06      #>  8                    1         29 2020-12-08        2021-01-09      #>  9                    1         68 2021-07-11        2022-03-30      #> 10                    1         93 2014-01-09        2016-06-21      #> # ℹ more rows settings(cdm$acetaminophen_cohort) #> # A tibble: 1 × 5 #>   cohort_definition_id cohort_name   gap_era prior_use_washout limit       #>                  <int> <chr>         <chr>   <chr>             <chr>       #> 1                    1 acetaminophen 30      365               first_entry cohortCount(cdm$acetaminophen_cohort) #> # A tibble: 1 × 3 #>   cohort_definition_id number_records number_subjects #>                  <int>          <int>           <int> #> 1                    1             62              62 attrition(cdm$acetaminophen_cohort) #> # A tibble: 4 × 7 #>   cohort_definition_id number_records number_subjects reason_id reason           #>                  <int>          <int>           <int>     <int> <chr>            #> 1                    1             71              62         1 Initial qualify… #> 2                    1             70              62         2 join exposures … #> 3                    1             66              62         3 require prior u… #> 4                    1             62              62         4 require is the … #> # ℹ 2 more variables: excluded_records <int>, excluded_subjects <int>"},{"path":"https://darwin-eu-dev.github.io/DrugUtilisation/articles/create_cohorts.html","id":"requireobservationbeforedrug","dir":"Articles","previous_headings":"Apply inclusion criteria to drug cohorts","what":"requireObservationBeforeDrug()","title":"Use DrugUtilisation to create a cohort","text":"require cohort entry (drug episodes) certain time prior observation can use requireObservationBeforeDrug() function. See example: result cohort individuals fulfill criteria: also get recorded attrition, counts settings top already exiting ones. settings new column specified parameter used: counts updated: attrition new line:","code":"cdm$acetaminophen_cohort <- cdm$acetaminophen_cohort |>   requireObservationBeforeDrug(priorObservation = 365) cdm$acetaminophen_cohort #> # Source:   table<main.acetaminophen_cohort> [?? x 4] #> # Database: DuckDB v1.0.0 [unknown@Linux 6.5.0-1023-azure:R 4.4.1/:memory:] #>    cohort_definition_id subject_id cohort_start_date cohort_end_date #>                   <int>      <int> <date>            <date>          #>  1                    1         81 1995-09-13        1997-11-17      #>  2                    1         88 2015-08-19        2016-05-09      #>  3                    1         29 2020-12-08        2021-01-09      #>  4                    1         93 2014-01-09        2016-06-21      #>  5                    1         35 2005-11-10        2006-09-09      #>  6                    1         91 2022-09-15        2022-11-17      #>  7                    1         40 2018-11-15        2020-03-07      #>  8                    1         26 2015-07-22        2020-07-18      #>  9                    1         51 2017-09-04        2017-09-17      #> 10                    1         58 1995-08-29        2002-06-12      #> # ℹ more rows settings(cdm$acetaminophen_cohort) #> # A tibble: 1 × 6 #>   cohort_definition_id cohort_name   gap_era prior_use_washout limit       #>                  <int> <chr>         <chr>   <chr>             <chr>       #> 1                    1 acetaminophen 30      365               first_entry #> # ℹ 1 more variable: prior_drug_observation <chr> cohortCount(cdm$acetaminophen_cohort) #> # A tibble: 1 × 3 #>   cohort_definition_id number_records number_subjects #>                  <int>          <int>           <int> #> 1                    1             33              33 attrition(cdm$acetaminophen_cohort) #> # A tibble: 5 × 7 #>   cohort_definition_id number_records number_subjects reason_id reason           #>                  <int>          <int>           <int>     <int> <chr>            #> 1                    1             71              62         1 Initial qualify… #> 2                    1             70              62         2 join exposures … #> 3                    1             66              62         3 require prior u… #> 4                    1             62              62         4 require is the … #> 5                    1             33              33         5 require prior o… #> # ℹ 2 more variables: excluded_records <int>, excluded_subjects <int>"},{"path":"https://darwin-eu-dev.github.io/DrugUtilisation/articles/create_cohorts.html","id":"requiredrugindaterange","dir":"Articles","previous_headings":"Apply inclusion criteria to drug cohorts","what":"requireDrugInDateRange()","title":"Use DrugUtilisation to create a cohort","text":"require cohort entry (drug episodes) certain date within specific range can use requireDrugInDateRange() function. general like apply restriction incident date (cohort_start_date), function flexible can use restrict date. See example: result cohort individuals fulfill criteria: also get recorded attrition, counts settings top already exiting ones. settings new column specified parameter used: counts updated: attrition new line: just want restrict lower upper bound can just leave element NA condition applied, see example:","code":"cdm$acetaminophen_cohort <- cdm$acetaminophen_cohort |>   requireDrugInDateRange(     indexDate = \"cohort_start_date\",      dateRange = as.Date(c(\"2000-01-01\", \"2020-12-31\"))   ) cdm$acetaminophen_cohort #> # Source:   table<main.acetaminophen_cohort> [?? x 4] #> # Database: DuckDB v1.0.0 [unknown@Linux 6.5.0-1023-azure:R 4.4.1/:memory:] #>    cohort_definition_id subject_id cohort_start_date cohort_end_date #>                   <int>      <int> <date>            <date>          #>  1                    1         88 2015-08-19        2016-05-09      #>  2                    1         29 2020-12-08        2021-01-09      #>  3                    1         93 2014-01-09        2016-06-21      #>  4                    1         35 2005-11-10        2006-09-09      #>  5                    1         40 2018-11-15        2020-03-07      #>  6                    1         26 2015-07-22        2020-07-18      #>  7                    1         51 2017-09-04        2017-09-17      #>  8                    1         62 2005-01-24        2006-12-05      #>  9                    1         73 2011-04-02        2011-06-19      #> 10                    1         45 2017-07-03        2018-07-06      #> # ℹ more rows settings(cdm$acetaminophen_cohort) #> # A tibble: 1 × 6 #>   cohort_definition_id cohort_name   gap_era prior_use_washout limit       #>                  <int> <chr>         <chr>   <chr>             <chr>       #> 1                    1 acetaminophen 30      365               first_entry #> # ℹ 1 more variable: prior_drug_observation <chr> cohortCount(cdm$acetaminophen_cohort) #> # A tibble: 1 × 3 #>   cohort_definition_id number_records number_subjects #>                  <int>          <int>           <int> #> 1                    1             24              24 attrition(cdm$acetaminophen_cohort) #> # A tibble: 6 × 7 #>   cohort_definition_id number_records number_subjects reason_id reason           #>                  <int>          <int>           <int>     <int> <chr>            #> 1                    1             71              62         1 Initial qualify… #> 2                    1             70              62         2 join exposures … #> 3                    1             66              62         3 require prior u… #> 4                    1             62              62         4 require is the … #> 5                    1             33              33         5 require prior o… #> 6                    1             24              24         6 require cohort_… #> # ℹ 2 more variables: excluded_records <int>, excluded_subjects <int> cdm$my_new_cohort <- cdm$my_new_cohort |>   requireDrugInDateRange(dateRange = as.Date(c(NA, \"2010-12-31\"))) attrition(cdm$my_new_cohort) #> # A tibble: 7 × 7 #>   cohort_definition_id number_records number_subjects reason_id reason           #>                  <int>          <int>           <int>     <int> <chr>            #> 1                    1             55              48         1 Initial qualify… #> 2                    1             52              48         2 join exposures … #> 3                    1             23              21         3 require cohort_… #> 4                    2             53              48         1 Initial qualify… #> 5                    2             51              48         2 join exposures … #> 6                    2             51              48         3 require prior u… #> 7                    2             18              18         4 require cohort_… #> # ℹ 2 more variables: excluded_records <int>, excluded_subjects <int>"},{"path":"https://darwin-eu-dev.github.io/DrugUtilisation/articles/create_cohorts.html","id":"the-order-matters","dir":"Articles","previous_headings":"","what":"The order matters","title":"Use DrugUtilisation to create a cohort","text":"important know different restrictions commutable operations different order can lead different results. Let’s see following example individual 4 cohort entries:  case see result combining different ways 4 inclusion criteria: first: requireIsFirstDrugEntry() washout: requirePriorDrugWashout(priorUseWashout = 365) minObs: requireObservationBeforeDrug(priorObservation = 365) 2011-2012 requireDrugInDateRange(dateRange = .Date(c(\"2011-01-01\", \"2012-12-31)))","code":""},{"path":"https://darwin-eu-dev.github.io/DrugUtilisation/articles/create_cohorts.html","id":"first-and-washout","dir":"Articles","previous_headings":"The order matters","what":"first and washout","title":"Use DrugUtilisation to create a cohort","text":"apply initially first requirement washout one end first record:  Whereas apply initially washout criteria first one resulting exposure fourth one:","code":""},{"path":"https://darwin-eu-dev.github.io/DrugUtilisation/articles/create_cohorts.html","id":"first-and-minobs","dir":"Articles","previous_headings":"The order matters","what":"first and minObs","title":"Use DrugUtilisation to create a cohort","text":"apply initially first requirement minObs one end record cohort:  Whereas apply initially minObs criteria first one exposure selected, second one:","code":""},{"path":"https://darwin-eu-dev.github.io/DrugUtilisation/articles/create_cohorts.html","id":"first-and-2011-2012","dir":"Articles","previous_headings":"The order matters","what":"first and 2011-2012","title":"Use DrugUtilisation to create a cohort","text":"apply initially first requirement 2011-2012 one end record cohort:  Whereas apply initially 2011-2012 criteria first one exposure selected, second one:","code":""},{"path":"https://darwin-eu-dev.github.io/DrugUtilisation/articles/create_cohorts.html","id":"washout-and-minobs","dir":"Articles","previous_headings":"The order matters","what":"washout and minObs","title":"Use DrugUtilisation to create a cohort","text":"apply initially washout requirement minObs one end last record selected:  Whereas apply initially minObs criteria washout one second fourth exposures ones selected:","code":""},{"path":"https://darwin-eu-dev.github.io/DrugUtilisation/articles/create_cohorts.html","id":"washout-and-2011-2012","dir":"Articles","previous_headings":"The order matters","what":"washout and 2011-2012","title":"Use DrugUtilisation to create a cohort","text":"apply initially washout requirement 2011-2012 one record selected:  Whereas apply initially 2011-2012 criteria washout one second record included:","code":""},{"path":"https://darwin-eu-dev.github.io/DrugUtilisation/articles/create_cohorts.html","id":"minobs-and-2011-2012","dir":"Articles","previous_headings":"The order matters","what":"minObs and 2011-2012","title":"Use DrugUtilisation to create a cohort","text":"Finally requireObservationBeforeDrug requireDrugInDateRange always commutable operations two always .","code":""},{"path":"https://darwin-eu-dev.github.io/DrugUtilisation/articles/create_cohorts.html","id":"recommended-order","dir":"Articles","previous_headings":"The order matters","what":"Recommended order","title":"Use DrugUtilisation to create a cohort","text":"account recommended order apply criteria : Require prior drug washout require first drug entry (particular case). Require prior observation drug episode. Require drugs certain date range. Although recommended order, study design may different required specification, example may interested first exposure fulfills criteria. Thus making applying require first drug entry end.","code":""},{"path":"https://darwin-eu-dev.github.io/DrugUtilisation/articles/create_cohorts.html","id":"alternatives-to-create-cohorts","dir":"Articles","previous_headings":"","what":"Alternatives to create cohorts","title":"Use DrugUtilisation to create a cohort","text":"generateDrugUtilisationCohortSet() specif function create drug users cohorts. functions package need cohort input, cohort usually cohort generated using generateDrugUtilisationCohortSet(), exist alternative create cohorts can create custom cohorts tidyverse functions omopgenerics::newCohortTable(). See omopgenerics vignette. can create concept based cohorts using OHDSI package CohortConstructor. See CohortConstructor “a01_building_base_cohorts”. can create cohorts based ATLAS definitions using CDMConnector. “a02_cohorts”","code":""},{"path":"https://darwin-eu-dev.github.io/DrugUtilisation/articles/daily_dose_calculation.html","id":"introduction","dir":"Articles","previous_headings":"","what":"Introduction","title":"Characterise a cohort using Drug Utilisation","text":"DrugUtilisation package, also functions daily dose drugs. best way learn functions consider examples.","code":""},{"path":"https://darwin-eu-dev.github.io/DrugUtilisation/articles/daily_dose_calculation.html","id":"create-mock-data-first","dir":"Articles","previous_headings":"Introduction","what":"Create mock data first","title":"Characterise a cohort using Drug Utilisation","text":"","code":"library(DrugUtilisation) library(CodelistGenerator) library(CDMConnector) library(dplyr) library(PatientProfiles)  cdm <- mockDrugUtilisation(numberIndividual  = 200)"},{"path":"https://darwin-eu-dev.github.io/DrugUtilisation/articles/daily_dose_calculation.html","id":"add-daily-dose-information-via-adddailydose-function","dir":"Articles","previous_headings":"Introduction","what":"Add daily dose information via addDailyDose() function","title":"Characterise a cohort using Drug Utilisation","text":"following example calculates daily dose acetaminophen drug_exposure table. drug_exposure table first according drug_concept_id equaling 29050772905077 . subset drug_exposure table use acetaminophen marketed product form. Later ID 11253151125315 supplied addDailyDose() function, corresponds ingredient form acetaminophen. see two extra columns end detailing daily dose acetaminophen drug exposure interest - daily_dose unit. Take first entry example, see drug exposure acetaminophen, daily dose average 48,00048,000 milligram. way daily dose calculated take consideration strength drug duration episode.","code":"cdm$drug_exposure |>   filter(drug_concept_id == 2905077) |>   addDailyDose(ingredientConceptId = 1125315) |>   glimpse() #> Rows: ?? #> Columns: 9 #> Database: DuckDB v1.0.0 [unknown@Linux 6.5.0-1023-azure:R 4.4.1/:memory:] #> $ drug_exposure_id         <int> 2, 6, 10, 16, 25, 26, 42, 46, 62, 64, 76, 90,… #> $ person_id                <int> 1, 2, 3, 4, 7, 7, 17, 18, 22, 22, 25, 33, 36,… #> $ drug_concept_id          <dbl> 2905077, 2905077, 2905077, 2905077, 2905077, … #> $ drug_exposure_start_date <date> 2021-10-26, 2013-01-20, 2013-01-26, 2013-04-… #> $ drug_exposure_end_date   <date> 2022-01-22, 2013-06-16, 2013-05-09, 2015-04-… #> $ drug_type_concept_id     <dbl> 38000177, 38000177, 38000177, 38000177, 38000… #> $ quantity                 <dbl> 90, 50, 15, 100, 100, 60, 15, 40, 50, 20, 30,… #> $ daily_dose               <dbl> 9.707865e+03, 3.243243e+03, 1.384615e+03, 1.3… #> $ unit                     <chr> \"milligram\", \"milligram\", \"milligram\", \"milli…"},{"path":"https://darwin-eu-dev.github.io/DrugUtilisation/articles/daily_dose_calculation.html","id":"add-route-information-via-addroute-function","dir":"Articles","previous_headings":"Introduction","what":"Add route information via addRoute() function","title":"Characterise a cohort using Drug Utilisation","text":"Next, user also obtain information route drug used drug_exposure table. Similarly, adds one extra column named route. example, drug used first entry drug_exposure table oral drug.","code":"cdm$drug_exposure |>   addRoute() |>   glimpse() #> Rows: ?? #> Columns: 8 #> Database: DuckDB v1.0.0 [unknown@Linux 6.5.0-1023-azure:R 4.4.1/:memory:] #> $ drug_exposure_id         <int> 1, 2, 3, 4, 5, 6, 7, 9, 10, 11, 13, 15, 16, 1… #> $ person_id                <int> 1, 1, 1, 1, 2, 2, 3, 3, 3, 4, 4, 4, 4, 5, 6, … #> $ drug_concept_id          <dbl> 1503328, 2905077, 1539463, 1516980, 1516978, … #> $ drug_exposure_start_date <date> 2022-01-11, 2021-10-26, 2021-08-10, 2021-12-… #> $ drug_exposure_end_date   <date> 2022-01-26, 2022-01-22, 2021-11-22, 2022-01-… #> $ drug_type_concept_id     <dbl> 38000177, 38000177, 38000177, 38000177, 38000… #> $ quantity                 <dbl> 80, 90, 100, 35, 1, 50, 1, 100, 15, 45, 1, 80… #> $ route                    <chr> \"topical\", \"topical\", \"topical\", \"topical\", \"…"},{"path":"https://darwin-eu-dev.github.io/DrugUtilisation/articles/daily_dose_calculation.html","id":"finding-out-the-pattern-information-using-patterntable-function","dir":"Articles","previous_headings":"Introduction","what":"Finding out the pattern information using patternTable() function","title":"Characterise a cohort using Drug Utilisation","text":"user also find patterns used drug_strength table. output also include column potentially valid invalid combinations. idea pattern provide platform associate drug drug_strength table constituent ingredients. output three important columns, namely number_concepts, number_ingredients number_records, corresponds count distinct concepts patterns, count distinct ingredients involved overall count records patterns respectively. also see column named pattern_id together information number_concepts number_ingredients. idea use output conjunction data named patternWithFormula via pattern_id. Please see data patternWithFormula different patterns, associated formula combinations amount_unit, numerator_unit denominator_unit.","code":"patternTable(cdm) |>   glimpse() #> Rows: 5 #> Columns: 12 #> $ pattern_id                  <dbl> 9, 18, 24, 40, NA #> $ formula_name                <chr> \"fixed amount formulation\", \"concentration… #> $ validity                    <chr> \"pattern with formula\", \"pattern with form… #> $ number_concepts             <dbl> 7, 1, 1, 1, 4 #> $ number_ingredients          <dbl> 4, 1, 1, 1, 4 #> $ number_records              <dbl> 350, 67, 63, 74, 61 #> $ amount_numeric              <dbl> 1, 0, 0, 0, NA #> $ amount_unit_concept_id      <dbl> 8576, NA, NA, NA, NA #> $ numerator_numeric           <dbl> 0, 1, 1, 1, NA #> $ numerator_unit_concept_id   <dbl> NA, 8576, 8510, 8510, NA #> $ denominator_numeric         <dbl> 0, 1, 1, 0, NA #> $ denominator_unit_concept_id <dbl> NA, 8587, 8587, 8587, NA patternsWithFormula |>   glimpse() #> Rows: 41 #> Columns: 9 #> $ pattern_id       <dbl> 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16… #> $ amount           <chr> NA, NA, NA, NA, NA, \"number\", \"number\", \"number\", \"nu… #> $ amount_unit      <chr> NA, NA, NA, NA, NA, \"international unit\", \"microgram\"… #> $ numerator        <chr> \"number\", \"number\", \"number\", \"number\", \"number\", NA,… #> $ numerator_unit   <chr> \"microgram\", \"milligram\", \"unit\", \"microgram\", \"milli… #> $ denominator      <chr> \"number\", \"number\", \"number\", NA, NA, NA, NA, NA, NA,… #> $ denominator_unit <chr> \"hour\", \"hour\", \"hour\", \"hour\", \"hour\", NA, NA, NA, N… #> $ formula_name     <chr> \"time based with denominator\", \"time based with denom… #> $ formula          <chr> \"if (denominator>24) {numerator * 24 / denominator} e…"},{"path":"https://darwin-eu-dev.github.io/DrugUtilisation/articles/daily_dose_calculation.html","id":"finding-out-the-dose-coverage-using-summarisedosecoverage-function","dir":"Articles","previous_headings":"Introduction","what":"Finding out the dose coverage using summariseDoseCoverage() function","title":"Characterise a cohort using Drug Utilisation","text":"package also provides function check coverage daily dose computation chosen concept sets ingredients. let’s take acetaminophen example. output summarise usage acetaminophen database. example, overall 1313 records acetaminophen use none missing terms duration strength. default output also include mean, median, lower upper quartiles standard deviation daily dose acetaminophen (calculated using addDailyDose()). results also stratified unit, route (saw addRoute() function) pattern (saw patternTable() function). One may wish display output summariseDoseCoverage() gt table form like : user also freedom customize gt table output. example following suppress cdmName: Additionally, user wants specify title gt output, try following:","code":"summariseDoseCoverage(cdm = cdm, ingredientConceptId = 1125315) |>   glimpse() #> Rows: 56 #> Columns: 13 #> $ result_id        <int> 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1,… #> $ cdm_name         <chr> \"DUS MOCK\", \"DUS MOCK\", \"DUS MOCK\", \"DUS MOCK\", \"DUS … #> $ group_name       <chr> \"ingredient_name\", \"ingredient_name\", \"ingredient_nam… #> $ group_level      <chr> \"acetaminophen\", \"acetaminophen\", \"acetaminophen\", \"a… #> $ strata_name      <chr> \"overall\", \"overall\", \"overall\", \"overall\", \"overall\"… #> $ strata_level     <chr> \"overall\", \"overall\", \"overall\", \"overall\", \"overall\"… #> $ variable_name    <chr> \"number records\", \"Missing dose\", \"Missing dose\", \"da… #> $ variable_level   <chr> NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, N… #> $ estimate_name    <chr> \"count\", \"count_missing\", \"percentage_missing\", \"mean… #> $ estimate_type    <chr> \"integer\", \"integer\", \"percentage\", \"numeric\", \"numer… #> $ estimate_value   <chr> \"174\", \"0\", \"0\", \"4986.89847658171\", \"22201.148944306… #> $ additional_name  <chr> \"overall\", \"overall\", \"overall\", \"overall\", \"overall\"… #> $ additional_level <chr> \"overall\", \"overall\", \"overall\", \"overall\", \"overall\"… summariseDoseCoverage(cdm = cdm, ingredientConceptId = 1125315) |>   tableDoseCoverage() summariseDoseCoverage(cdm = cdm, ingredientConceptId = 1125315) |>   tableDoseCoverage(cdmName = F) summariseDoseCoverage(cdm = cdm, ingredientConceptId = 1125315) |>   tableDoseCoverage(.options = list(title = \"Title of summariseDoseCoverage\"))"},{"path":"https://darwin-eu-dev.github.io/DrugUtilisation/articles/drug_restart.html","id":"generate-study-cohorts","dir":"Articles","previous_headings":"","what":"Generate study cohorts","title":"Assessing drug restart and switching after treatment","text":"examine patterns drug restart switching among patients taking metformin example. Specifically, investigate whether patients restart metformin discontinuation, switch insulin, try medications, remain untreated. need two cohorts: one patients exposed metformin another patients exposed insulin.","code":"# codelists metformin <- getDrugIngredientCodes(cdm = cdm, name = \"metformin\") insulin <- getDrugIngredientCodes(cdm = cdm, name = \"insulin detemir\")  cdm <- generateDrugUtilisationCohortSet(   cdm = cdm, name = \"metformin\", conceptSet = metformin ) cdm$metformin |> cohortCount() #> # A tibble: 1 × 3 #>   cohort_definition_id number_records number_subjects #>                  <int>          <int>           <int> #> 1                    1            103              94  cdm <- generateDrugUtilisationCohortSet(   cdm = cdm, name = \"insulin\", conceptSet = insulin ) cdm$insulin |> cohortCount() #> # A tibble: 1 × 3 #>   cohort_definition_id number_records number_subjects #>                  <int>          <int>           <int> #> 1                    1            107              92"},{"path":"https://darwin-eu-dev.github.io/DrugUtilisation/articles/drug_restart.html","id":"assess-drug-restart","dir":"Articles","previous_headings":"","what":"Assess drug restart","title":"Assessing drug restart and switching after treatment","text":"function summariseDrugRestart() calculated many following events given treatment cohort: restart treatment switch treatments restart treatment aslo switch another treated anymore (neither original treatment potential switch) figure illustratiates analysis study happens first exposure certain drug (blue), considering specific switch drug (orange). example, interested know happens firsts 100, 180 365 days treatment discontinuation.  Now, let’s use function assess metformin restart switch insulin first metformin treatment. interested getting results different follow-periods since first metformin exposure ended. instance, next get results first 180 days, first year, end observation. options function allows : restrictToFirstDiscontinuation default argument set TRUE, means consider firsts exposure subject. FALSE, analysis conducted record level, considering exposures cohort, following image illustrates:  censorEndDate argument allows stop considering restart switch events certain date, must specified column cohort. strata argumnet must list pointing columns combinations columns cohort use strata. produce stratified estimates well overall cohort. instance, reporduce last calculation time straifying sex. first use PatientProfiles add column indicating sex, later use strata.","code":"results <- summariseDrugRestart(   cohort = cdm$metformin,   switchCohortTable = \"insulin\",   switchCohortId = NULL,   strata = list(),   followUpDays = Inf,   censorDate = NULL,   restrictToFirstDiscontinuation = TRUE ) #> Warning: Missing values are always removed in SQL aggregation functions. #> Use `na.rm = TRUE` to silence this warning #> This warning is displayed once every 8 hours.  results |> glimpse() #> Rows: 8 #> Columns: 13 #> $ result_id        <int> 1, 1, 1, 1, 1, 1, 1, 1 #> $ cdm_name         <chr> \"unknown\", \"unknown\", \"unknown\", \"unknown\", \"unknown\"… #> $ group_name       <chr> \"cohort_name\", \"cohort_name\", \"cohort_name\", \"cohort_… #> $ group_level      <chr> \"6809_metformin\", \"6809_metformin\", \"6809_metformin\",… #> $ strata_name      <chr> \"overall\", \"overall\", \"overall\", \"overall\", \"overall\"… #> $ strata_level     <chr> \"overall\", \"overall\", \"overall\", \"overall\", \"overall\"… #> $ variable_name    <chr> \"End of observation\", \"End of observation\", \"End of o… #> $ variable_level   <chr> \"restart\", \"restart\", \"switch\", \"switch\", \"restart an… #> $ estimate_name    <chr> \"count\", \"percentage\", \"count\", \"percentage\", \"count\"… #> $ estimate_type    <chr> \"integer\", \"percentage\", \"integer\", \"percentage\", \"in… #> $ estimate_value   <chr> \"8\", \"8.51063829787234\", \"8\", \"8.51063829787234\", \"1\"… #> $ additional_name  <chr> \"overall\", \"overall\", \"overall\", \"overall\", \"overall\"… #> $ additional_level <chr> \"overall\", \"overall\", \"overall\", \"overall\", \"overall\"… results <- summariseDrugRestart(   cohort = cdm$metformin,   switchCohortTable = \"insulin\",   switchCohortId = NULL,   strata = list(),   followUpDays = c(180, 365, Inf),   censorDate = NULL,   restrictToFirstDiscontinuation = TRUE ) results <- cdm$cohort1 |>   addSex() |>   summariseDrugRestart(     switchCohortTable = \"insulin\",     switchCohortId = NULL,     strata = list(\"sex\"),     followUpDays = c(180, 365, Inf),     censorDate = NULL,     restrictToFirstDiscontinuation = TRUE   )"},{"path":"https://darwin-eu-dev.github.io/DrugUtilisation/articles/drug_restart.html","id":"visualise-drug-restart","dir":"Articles","previous_headings":"","what":"Visualise drug restart","title":"Assessing drug restart and switching after treatment","text":"package table plot functions help visualizing results summariseDrugRestart().","code":""},{"path":"https://darwin-eu-dev.github.io/DrugUtilisation/articles/drug_restart.html","id":"table","dir":"Articles","previous_headings":"Visualise drug restart","what":"Table","title":"Assessing drug restart and switching after treatment","text":"function tableDrugRestart() create gt, flextable tibble table summarised_result object created summariseDrugRestart(). function offers multiple customization options format resulting table according user preferences.","code":"tableDrugRestart(   result = results,   header = c(\"strata\"),   splitStrata = TRUE,   cohortName = TRUE,   cdmName = FALSE,   groupColumn = c(\"cohort_name\"),   type = \"gt\",   formatEstimateName = c(`N (%)` = \"<count> (<percentage> %)\"),   .options = list() ) #> ! Results have not been suppressed."},{"path":"https://darwin-eu-dev.github.io/DrugUtilisation/articles/drug_restart.html","id":"plot","dir":"Articles","previous_headings":"Visualise drug restart","what":"Plot","title":"Assessing drug restart and switching after treatment","text":"plotDrugRestart() function creates bar plot depicting percentage drug restart events cohort, stratum, follow-time (specified variable_name column summarised result). function offers customization options colours, facetting, handling strata.","code":"plotDrugRestart(   result = results,   facetX = \"variable_name\",   facetY = c(\"cohort_name\", \"strata\"),   colour = \"variable_level\",   splitStrata = TRUE )"},{"path":"https://darwin-eu-dev.github.io/DrugUtilisation/articles/drug_utilisation.html","id":"introduction","dir":"Articles","previous_headings":"","what":"Introduction","title":"Getting drug utilisation related information of subjects in a cohort","text":"DrugUtilisation package includes range functions add drug-related information subjects OMOP CDM tables cohort tables. Essentially, two functionalities: add summarise. first return patient-level information drug usage, second returns aggregate estimates . vignette, explore functions provide examples usage.","code":""},{"path":[]},{"path":"https://darwin-eu-dev.github.io/DrugUtilisation/articles/drug_utilisation.html","id":"mock-data","dir":"Articles","previous_headings":"Set up","what":"Mock data","title":"Getting drug utilisation related information of subjects in a cohort","text":"vignette use mock data contained DrugUtilisation package. mock dataset contains cohorts, take “cohort1” cohort table interest want study drug usage acetaminophen.","code":"library(DrugUtilisation) library(CDMConnector) library(dplyr) library(PatientProfiles) library(CodelistGenerator)  cdm <- mockDrugUtilisation(numberIndividual  = 200) cdm$cohort1 |> glimpse() #> Rows: ?? #> Columns: 4 #> Database: DuckDB v1.0.0 [unknown@Linux 6.5.0-1023-azure:R 4.4.1/:memory:] #> $ cohort_definition_id <int> 2, 3, 2, 1, 3, 3, 1, 3, 3, 3, 3, 2, 2, 2, 2, 2, 2… #> $ subject_id           <int> 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15… #> $ cohort_start_date    <date> 2022-01-23, 2013-07-03, 2010-12-17, 2005-10-12, … #> $ cohort_end_date      <date> 2022-01-25, 2013-07-10, 2014-07-04, 2010-07-19, …"},{"path":"https://darwin-eu-dev.github.io/DrugUtilisation/articles/drug_utilisation.html","id":"drug-codes","dir":"Articles","previous_headings":"Set up","what":"Drug codes","title":"Getting drug utilisation related information of subjects in a cohort","text":"Since want characterise acetaminophen simvastatin usage subjects cohort1, first get codelist CodelistGenerator:","code":"drugConcepts <- getDrugIngredientCodes(cdm = cdm, name = c(\"acetaminophen\", \"simvastatin\"))"},{"path":[]},{"path":[]},{"path":"https://darwin-eu-dev.github.io/DrugUtilisation/articles/drug_utilisation.html","id":"addnumberexposures","dir":"Articles","previous_headings":"Add drug utilisation information > addNumberExposures() and addNumberEras()","what":"addNumberExposures()","title":"Getting drug utilisation related information of subjects in a cohort","text":"function addNumberExposures() can get many exposures acetaminophen patient cohort certain time. 2 thing keep mind using function: Time period interest: indexDate censorDate arguments refer time-period interested compute number exposure acetaminophen. refer date columns cohort table, default “cohort_start_date” “cohort_end_date” respectively. Incident prevalent events? want consider exposures drug interest starting time-period (restrictIncident = TRUE), also want take account thaat started underwent least time follow-period considered (restrictIncident = FALSE)? follows add column cohort table, number incident exposures time patients cohort:","code":"cohort <- addNumberExposures(   cohort = cdm$cohort1, # cohort with the population of interest   conceptSet = drugConcepts, # concepts of the drugs of interest   indexDate = \"cohort_start_date\",   censorDate = \"cohort_end_date\",   restrictIncident = TRUE,   nameStyle = \"number_exposures_{concept_name}\",   name = NULL )  cohort |> glimpse() #> Rows: ?? #> Columns: 6 #> Database: DuckDB v1.0.0 [unknown@Linux 6.5.0-1023-azure:R 4.4.1/:memory:] #> $ cohort_definition_id               <int> 2, 3, 1, 3, 3, 3, 3, 2, 2, 2, 3, 2,… #> $ subject_id                         <int> 1, 2, 4, 5, 9, 10, 11, 12, 14, 17, … #> $ cohort_start_date                  <date> 2022-01-23, 2013-07-03, 2005-10-12… #> $ cohort_end_date                    <date> 2022-01-25, 2013-07-10, 2010-07-19… #> $ number_exposures_36567_simvastatin <int> 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,… #> $ number_exposures_161_acetaminophen <int> 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,…"},{"path":"https://darwin-eu-dev.github.io/DrugUtilisation/articles/drug_utilisation.html","id":"addnumbereras","dir":"Articles","previous_headings":"Add drug utilisation information > addNumberExposures() and addNumberEras()","what":"addNumberEras()","title":"Getting drug utilisation related information of subjects in a cohort","text":"function works like previous one, calculates number eras instead exposures. difference two given gapEra argument: consecutive drug exposures separated less days specified gapEra, collapsed together era. Next compute number eras, considering gap 3 days. Additionally, use argument nameStyle new columns identified concept name, instead using prefix “number_eras_” set default.","code":"cohort <- addNumberEras(   cohort = cdm$cohort1, # cohort with the population of interest   conceptSet = drugConcepts, # concepts of the drugs of interest   indexDate = \"cohort_start_date\",   censorDate = \"cohort_end_date\",   gapEra = 3,   restrictIncident = TRUE,   nameStyle = \"{concept_name}\",   name = NULL )  cohort |> glimpse() #> Rows: ?? #> Columns: 6 #> Database: DuckDB v1.0.0 [unknown@Linux 6.5.0-1023-azure:R 4.4.1/:memory:] #> $ cohort_definition_id <int> 2, 3, 1, 3, 3, 3, 3, 2, 2, 2, 3, 2, 2, 1, 1, 1, 3… #> $ subject_id           <int> 1, 2, 4, 5, 9, 10, 11, 12, 14, 17, 20, 21, 22, 23… #> $ cohort_start_date    <date> 2022-01-23, 2013-07-03, 2005-10-12, 1984-04-06, … #> $ cohort_end_date      <date> 2022-01-25, 2013-07-10, 2010-07-19, 1984-08-09, … #> $ `36567_simvastatin`  <int> NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, N… #> $ `161_acetaminophen`  <int> NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, N…"},{"path":"https://darwin-eu-dev.github.io/DrugUtilisation/articles/drug_utilisation.html","id":"adddrugutilisation","dir":"Articles","previous_headings":"Add drug utilisation information","what":"addDrugUtilisation()","title":"Getting drug utilisation related information of subjects in a cohort","text":"addNumberExposures() addNumberEras() functions subfunctions comprehensive addDrugUtilisation(). broader function computes multiple drug utilization metrics, including number exposures eras. follows explore functionalities, demonstrate integrated main addDrugUtilisation() function.","code":"addDrugUtilisation(   cohort,   indexDate = \"cohort_start_date\",   censorDate = \"cohort_end_date\",   ingredientConceptId = NULL,   conceptSet = NULL,   restrictIncident = TRUE,   gapEra = 1,   numberExposures = TRUE,   numberEras = TRUE,   exposedTime = TRUE,   timeToExposure = TRUE,   initialQuantity = TRUE,   cumulativeQuantity = TRUE,   initialDailyDose = TRUE,   cumulativeDose = TRUE,   nameStyle = \"{value}_{concept_name}_{ingredient}\",   name = NULL )"},{"path":"https://darwin-eu-dev.github.io/DrugUtilisation/articles/drug_utilisation.html","id":"exposedtime","dir":"Articles","previous_headings":"Add drug utilisation information > addDrugUtilisation()","what":"- exposedTime","title":"Getting drug utilisation related information of subjects in a cohort","text":"argument set TRUE add column specifying time days person exposed drug interest. Take note gapEra restrictIncident taken accoun calculation: Drug eras: exposed time based drug eras according gapEra. Incident exposures: restrictIncident = TRUE, exposed time consider drug exposures starting indexDate, restrictIncident = FALSE, exposures started indexDate ended afterwards also taken account. subfunction get information addExposedTime().","code":""},{"path":"https://darwin-eu-dev.github.io/DrugUtilisation/articles/drug_utilisation.html","id":"timetoexposure","dir":"Articles","previous_headings":"Add drug utilisation information > addDrugUtilisation()","what":"- timeToExposure","title":"Getting drug utilisation related information of subjects in a cohort","text":"set TRUE, column added shows number days first exposure occurring within considered time window. Notice value restrictIncident taken account: TRUE, time first incident exposure time interval measured; otherwise, exposures start indexDate end afterwards considered (cases, time exposure 0). subfunction get information addTimeToExposure()","code":""},{"path":"https://darwin-eu-dev.github.io/DrugUtilisation/articles/drug_utilisation.html","id":"initialquantity-and-cumulativequantity","dir":"Articles","previous_headings":"Add drug utilisation information > addDrugUtilisation()","what":"- initialQuantity and cumulativeQuantity","title":"Getting drug utilisation related information of subjects in a cohort","text":", TRUE, add column specifying initial quantity prescribed start first exposure considered (initialQuantity), cumulative quantity taken throughout exposures considered time-window (cumulativeQuantity). Quantities measured conceptSet level ingredient. Notice measures restrictIncident considered, gapEra used cumulative quantity. subfunctions get information addInitialQuantity() addCumulativeQuantity() respectively.","code":""},{"path":"https://darwin-eu-dev.github.io/DrugUtilisation/articles/drug_utilisation.html","id":"initialdailydose-and-cumulativedose","dir":"Articles","previous_headings":"Add drug utilisation information > addDrugUtilisation()","what":"- initialDailyDose and cumulativeDose","title":"Getting drug utilisation related information of subjects in a cohort","text":"initialDailyDose TRUE, column add specifying ingredients conceptSet initial daily dose given. cumulativeDose measure ingredient total dose taken throughout exposures considered time-window. Recall restrictIncident considered calculations, cumulative dose also considers gapEra. subfunctions get information addInitialDailyDose() addCumulativeDose() respectively.","code":""},{"path":"https://darwin-eu-dev.github.io/DrugUtilisation/articles/drug_utilisation.html","id":"note","dir":"Articles","previous_headings":"Add drug utilisation information > addDrugUtilisation()","what":"! Note","title":"Getting drug utilisation related information of subjects in a cohort","text":"Using addDrugUtilisation() recommended multiple parameters needed, computationally efficient chaining different subfunctions. conceptSet NULL, produced descendants given ingredients. nameStyle argument allows customisation names new columns added function, following glue package style. default returns temporal table, name NULL permanent table defined name computed database.","code":""},{"path":"https://darwin-eu-dev.github.io/DrugUtilisation/articles/drug_utilisation.html","id":"use-case","dir":"Articles","previous_headings":"Add drug utilisation information > addDrugUtilisation()","what":"Use case","title":"Getting drug utilisation related information of subjects in a cohort","text":"follows create permanent table “drug_utilisation_example” database information dosage quantity ingredients 1125315 (acetaminophen) 1503297 (metformin). interested exposures happening cohort end date, end patient’s observation data. Additionally, define exposure era using gap 7 days, consider incident exposures time.","code":"cdm$drug_utilisation_example <- cdm$cohort1 |>   # add end of current observation date with the package PatientProfiels   PatientProfiles::addFutureObservation(futureObservationType = \"date\") |>   # add the targeted drug utilisation measures   addDrugUtilisation(     indexDate = \"cohort_end_date\",     censorDate = \"future_observation\",     ingredientConceptId = c(1125315, 1503297),     conceptSet = NULL,     restrictIncident = TRUE,     gapEra = 7,     numberExposures = FALSE,     numberEras = FALSE,     exposedTime = FALSE,     timeToExposure = FALSE,     initialQuantity = TRUE,     cumulativeQuantity = TRUE,     initialDailyDose = TRUE,     cumulativeDose = TRUE,     nameStyle = \"{value}_{concept_name}_{ingredient}\",     name = \"drug_utilisation_example\"   )  cdm$drug_utilisation_example |> glimpse() #> Rows: ?? #> Columns: 13 #> Database: DuckDB v1.0.0 [unknown@Linux 6.5.0-1023-azure:R 4.4.1/:memory:] #> $ cohort_definition_id                                                <int> 2,… #> $ subject_id                                                          <int> 1,… #> $ cohort_start_date                                                   <date> 2… #> $ cohort_end_date                                                     <date> 2… #> $ future_observation                                                  <date> 2… #> $ cumulative_quantity_ingredient_1125315_descendants                  <dbl> 0,… #> $ cumulative_quantity_ingredient_1503297_descendants                  <dbl> 0,… #> $ initial_quantity_ingredient_1503297_descendants                     <dbl> 0,… #> $ initial_quantity_ingredient_1125315_descendants                     <dbl> 0,… #> $ cumulative_dose_milligram_ingredient_1125315_descendants_1125315    <dbl> 0,… #> $ initial_daily_dose_milligram_ingredient_1125315_descendants_1125315 <dbl> 0,… #> $ cumulative_dose_milligram_ingredient_1503297_descendants_1503297    <dbl> 0,… #> $ initial_daily_dose_milligram_ingredient_1503297_descendants_1503297 <dbl> 0,…"},{"path":"https://darwin-eu-dev.github.io/DrugUtilisation/articles/drug_utilisation.html","id":"summarise-drug-utilisation-information","dir":"Articles","previous_headings":"","what":"Summarise drug utilisation information","title":"Getting drug utilisation related information of subjects in a cohort","text":"information given addDrugUtilisation() sub-functions patient level. interested aggregated estimates measure can use summariseDrugUtilisation().","code":""},{"path":"https://darwin-eu-dev.github.io/DrugUtilisation/articles/drug_utilisation.html","id":"summarisedrugutilisation","dir":"Articles","previous_headings":"Summarise drug utilisation information","what":"summariseDrugUtilisation()","title":"Getting drug utilisation related information of subjects in a cohort","text":"function provide desired estimates (set argument estimates) targeted drug utilisation measures. Similar addDrugUtilisation(), setting TRUE FALSE drug utilisation measures, user can choose measures obtain. seen , result function summarised_result object. information class objects see omopgenerics package. Additionally, strata argument provide estimates different stratifications defined columns cohort. instance, can add column indicating sex, another indicating subject older 50, use stratify sex age, together separately follows: estimates obtained last part correspond mean (mean) standard deviation (sd) information dose quantity, number (count_missing) (percentage (percentage_missing)) subjects missing information.","code":"du_results <- summariseDrugUtilisation(   cohort = cdm$cohort1,   strata = list(),   estimates = c(\"q25\", \"median\", \"q75\", \"mean\", \"sd\", \"count_missing\",                 \"percentage_missing\"),   indexDate = \"cohort_start_date\",   censorDate = \"cohort_end_date\",   ingredientConceptId = c(1125315, 1503297),   conceptSet = NULL,   restrictIncident = TRUE,   gapEra = 7,   numberExposures = TRUE,   numberEras = TRUE,   exposedTime = TRUE,   timeToExposure = TRUE,   initialQuantity = TRUE,   cumulativeQuantity = TRUE,   initialDailyDose = TRUE,   cumulativeDose = TRUE )  du_results |>   glimpse() #> Rows: 342 #> Columns: 13 #> $ result_id        <int> 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1,… #> $ cdm_name         <chr> \"DUS MOCK\", \"DUS MOCK\", \"DUS MOCK\", \"DUS MOCK\", \"DUS … #> $ group_name       <chr> \"cohort_name\", \"cohort_name\", \"cohort_name\", \"cohort_… #> $ group_level      <chr> \"cohort_1\", \"cohort_1\", \"cohort_1\", \"cohort_1\", \"coho… #> $ strata_name      <chr> \"overall\", \"overall\", \"overall\", \"overall\", \"overall\"… #> $ strata_level     <chr> \"overall\", \"overall\", \"overall\", \"overall\", \"overall\"… #> $ variable_name    <chr> \"number records\", \"number subjects\", \"number exposure… #> $ variable_level   <chr> NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, N… #> $ estimate_name    <chr> \"count\", \"count\", \"q25\", \"median\", \"q75\", \"mean\", \"sd… #> $ estimate_type    <chr> \"integer\", \"integer\", \"integer\", \"integer\", \"integer\"… #> $ estimate_value   <chr> \"77\", \"77\", \"0\", \"0\", \"1\", \"0.311688311688312\", \"0.59… #> $ additional_name  <chr> \"overall\", \"overall\", \"concept_set\", \"concept_set\", \"… #> $ additional_level <chr> \"overall\", \"overall\", \"ingredient_1125315_descendants… du_results <- cdm$cohort1 |>   # add age and sex   PatientProfiles::addDemographics(     age = TRUE,     ageGroup = list(\"<=50\" = c(0, 50), \">50\" = c(51, 150)),     sex = TRUE,     priorObservation = FALSE,     futureObservation = FALSE   ) |>   # drug utilisation   summariseDrugUtilisation(     strata = list(\"age_group\", \"sex\", c(\"age_group\", \"sex\")),     estimates = c(\"mean\", \"sd\", \"count_missing\", \"percentage_missing\"),     indexDate = \"cohort_start_date\",     censorDate = \"cohort_end_date\",     ingredientConceptId = c(1125315, 1503297),     conceptSet = NULL,     restrictIncident = TRUE,     gapEra = 7,     numberExposures = TRUE,     numberEras = TRUE,     exposedTime = TRUE,     timeToExposure = TRUE,     initialQuantity = TRUE,     cumulativeQuantity = TRUE,     initialDailyDose = TRUE,     cumulativeDose = TRUE   )  du_results |>   glimpse() #> Rows: 1,782 #> Columns: 13 #> $ result_id        <int> 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1,… #> $ cdm_name         <chr> \"DUS MOCK\", \"DUS MOCK\", \"DUS MOCK\", \"DUS MOCK\", \"DUS … #> $ group_name       <chr> \"cohort_name\", \"cohort_name\", \"cohort_name\", \"cohort_… #> $ group_level      <chr> \"cohort_1\", \"cohort_1\", \"cohort_1\", \"cohort_1\", \"coho… #> $ strata_name      <chr> \"age_group\", \"age_group\", \"age_group\", \"age_group\", \"… #> $ strata_level     <chr> \"<=50\", \"<=50\", \"<=50\", \"<=50\", \"<=50\", \"<=50\", \"<=50… #> $ variable_name    <chr> \"number records\", \"number subjects\", \"number exposure… #> $ variable_level   <chr> NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, N… #> $ estimate_name    <chr> \"count\", \"count\", \"mean\", \"sd\", \"count_missing\", \"per… #> $ estimate_type    <chr> \"integer\", \"integer\", \"numeric\", \"numeric\", \"integer\"… #> $ estimate_value   <chr> \"72\", \"72\", \"0.125\", \"0.333039776840164\", \"0\", \"0\", \"… #> $ additional_name  <chr> \"overall\", \"overall\", \"concept_set\", \"concept_set\", \"… #> $ additional_level <chr> \"overall\", \"overall\", \"ingredient_1503297_descendants…"},{"path":"https://darwin-eu-dev.github.io/DrugUtilisation/articles/drug_utilisation.html","id":"tabledrugutilisation","dir":"Articles","previous_headings":"Summarise drug utilisation information","what":"tableDrugUtilisation()","title":"Getting drug utilisation related information of subjects in a cohort","text":"Results summariseDrugUtilisation() can nicely visualised tabluar format using function tableDrugUtilisation(). default, returns gt table object, strata splitted cohort name (group columns summarised result) strata table’s header. However, dispositions can customised, instance: Strata Variable Unit Concept set Ingredient Cohort name Cohort 1 Cohort 2 Cohort 3 N Missing, N (%) Non-missing, Mean (SD) N Missing, N (%) Non-missing, Mean (SD) N Missing, N (%) Non-missing, Mean (SD) Age group sex; <=50 female   Number records - Overall Overall 40 - - 19 - - 31 - -  Number subjects - Overall Overall 40 - - 19 - - 31 - -  Number exposures - Ingredient 1503297 descendants Overall - 0 (0.00 %) 0.12 (0.33) - 0 (0.00 %) 0.11 (0.32) - 0 (0.00 %) 0.19 (0.48)    Ingredient 1125315 descendants Overall - 0 (0.00 %) 0.35 (0.66) - 0 (0.00 %) 0.21 (0.42) - 0 (0.00 %) 0.19 (0.40)  Time exposure - Ingredient 1503297 descendants Overall - 35 (87.50 %) 383.60 (279.32) - 17 (89.47 %) 2,321.00 (287.09) - 26 (83.87 %) 791.20 (726.10)    Ingredient 1125315 descendants Overall - 29 (72.50 %) 1,247.00 (1,333.94) - 15 (78.95 %) 816.25 (1,204.01) - 25 (80.65 %) 721.33 (1,250.96)  Cumulative quantity - Ingredient 1503297 descendants Overall - 0 (0.00 %) 5.88 (17.61) - 0 (0.00 %) 7.37 (22.32) - 0 (0.00 %) 8.87 (23.58)    Ingredient 1125315 descendants Overall - 0 (0.00 %) 14.03 (26.24) - 0 (0.00 %) 14.74 (32.55) - 0 (0.00 %) 8.71 (20.08)  Initial quantity - Ingredient 1125315 descendants Overall - 0 (0.00 %) 13.25 (24.06) - 0 (0.00 %) 14.74 (32.55) - 0 (0.00 %) 8.71 (20.08)    Ingredient 1503297 descendants Overall - 0 (0.00 %) 5.88 (17.61) - 0 (0.00 %) 7.37 (22.32) - 0 (0.00 %) 6.29 (14.94)  Number eras - Ingredient 1125315 descendants Overall - 0 (0.00 %) 0.30 (0.52) - 0 (0.00 %) 0.21 (0.42) - 0 (0.00 %) 0.19 (0.40)    Ingredient 1503297 descendants Overall - 0 (0.00 %) 0.12 (0.33) - 0 (0.00 %) 0.11 (0.32) - 0 (0.00 %) 0.19 (0.48)  Exposed time - Ingredient 1125315 descendants Overall - 0 (0.00 %) 274.62 (870.33) - 0 (0.00 %) 124.74 (380.64) - 0 (0.00 %) 148.97 (459.54)    Ingredient 1503297 descendants Overall - 0 (0.00 %) 32.25 (135.26) - 0 (0.00 %) 65.95 (205.37) - 0 (0.00 %) 155.52 (635.33)  Cumulative dose Milligram Ingredient 1125315 descendants Acetaminophen - 0 (0.00 %) 30,393.77 (102,172.55) - 0 (0.00 %) 4,808.40 (10,600.59) - 0 (0.00 %) 52,562.46 (157,537.30)  Initial daily dose Milligram Ingredient 1125315 descendants Acetaminophen - 0 (0.00 %) 1,444.75 (7,608.89) - 0 (0.00 %) 247.02 (1,047.35) - 0 (0.00 %) 4,220.23 (22,974.92)  Cumulative dose Milligram Ingredient 1503297 descendants Metformin - 0 (0.00 %) 3,949.34 (14,191.50) - 0 (0.00 %) 4,533.24 (13,617.11) - 0 (0.00 %) 5,147.54 (17,427.03)  Initial daily dose Milligram Ingredient 1503297 descendants Metformin - 0 (0.00 %) 2,105.09 (12,646.06) - 0 (0.00 %) 7.65 (23.43) - 0 (0.00 %) 41.05 (199.40) Age group sex; <=50 male   Number records - Overall Overall 32 - - 37 - - 22 - -  Number subjects - Overall Overall 32 - - 37 - - 22 - -  Number exposures - Ingredient 1503297 descendants Overall - 0 (0.00 %) 0.12 (0.34) - 0 (0.00 %) 0.16 (0.44) - 0 (0.00 %) 0.05 (0.21)    Ingredient 1125315 descendants Overall - 0 (0.00 %) 0.28 (0.52) - 0 (0.00 %) 0.22 (0.53) - 0 (0.00 %) 0.45 (0.80)  Time exposure - Ingredient 1503297 descendants Overall - 28 (87.50 %) 1,701.25 (2,816.57) - 32 (86.49 %) 402.40 (489.35) - 21 (95.45 %) -    Ingredient 1125315 descendants Overall - 24 (75.00 %) 308.88 (233.91) - 31 (83.78 %) 2,137.33 (3,853.07) - 15 (68.18 %) 168.29 (125.09)  Cumulative quantity - Ingredient 1503297 descendants Overall - 0 (0.00 %) 5.31 (18.09) - 0 (0.00 %) 7.03 (20.60) - 0 (0.00 %) 2.05 (9.59)    Ingredient 1125315 descendants Overall - 0 (0.00 %) 7.53 (17.03) - 0 (0.00 %) 6.14 (21.74) - 0 (0.00 %) 17.09 (33.84)  Initial quantity - Ingredient 1125315 descendants Overall - 0 (0.00 %) 5.66 (13.41) - 0 (0.00 %) 3.95 (10.80) - 0 (0.00 %) 10.05 (25.01)    Ingredient 1503297 descendants Overall - 0 (0.00 %) 5.31 (18.09) - 0 (0.00 %) 4.86 (15.83) - 0 (0.00 %) 2.05 (9.59)  Number eras - Ingredient 1125315 descendants Overall - 0 (0.00 %) 0.25 (0.44) - 0 (0.00 %) 0.22 (0.53) - 0 (0.00 %) 0.32 (0.48)    Ingredient 1503297 descendants Overall - 0 (0.00 %) 0.12 (0.34) - 0 (0.00 %) 0.16 (0.44) - 0 (0.00 %) 0.05 (0.21)  Exposed time - Ingredient 1125315 descendants Overall - 0 (0.00 %) 65.84 (180.45) - 0 (0.00 %) 91.70 (281.79) - 0 (0.00 %) 118.36 (327.34)    Ingredient 1503297 descendants Overall - 0 (0.00 %) 59.72 (220.48) - 0 (0.00 %) 28.38 (114.33) - 0 (0.00 %) 17.45 (81.87)  Cumulative dose Milligram Ingredient 1125315 descendants Acetaminophen - 0 (0.00 %) 43,918.65 (113,973.19) - 0 (0.00 %) 25,948.92 (131,345.00) - 0 (0.00 %) 7,152.11 (16,099.31)  Initial daily dose Milligram Ingredient 1125315 descendants Acetaminophen - 0 (0.00 %) 1,391.94 (6,215.04) - 0 (0.00 %) 149.64 (689.26) - 0 (0.00 %) 102.55 (306.20)  Cumulative dose Milligram Ingredient 1503297 descendants Metformin - 0 (0.00 %) 2,747.99 (9,121.44) - 0 (0.00 %) 1,924.71 (6,233.08) - 0 (0.00 %) 1,022.73 (4,797.02)  Initial daily dose Milligram Ingredient 1503297 descendants Metformin - 0 (0.00 %) 11.78 (41.58) - 0 (0.00 %) 26.29 (88.86) - 0 (0.00 %) 2.66 (12.49) Age group sex; >50 female   Number records - Overall Overall 1 - - 1 - - 6 - -  Number subjects - Overall Overall 1 - - 1 - - 6 - -  Number exposures - Ingredient 1503297 descendants Overall - 0 (0.00 %) - - 0 (0.00 %) - - 0 (0.00 %) 0.00 (0.00)    Ingredient 1125315 descendants Overall - 0 (0.00 %) - - 0 (0.00 %) - - 0 (0.00 %) 0.67 (0.82)  Time exposure - Ingredient 1503297 descendants Overall - 1 (100.00 %) - - 1 (100.00 %) - - 6 (100.00 %) -    Ingredient 1125315 descendants Overall - 1 (100.00 %) - - 1 (100.00 %) - - 3 (50.00 %) 454.67 (429.96)  Cumulative quantity - Ingredient 1503297 descendants Overall - 0 (0.00 %) - - 0 (0.00 %) - - 0 (0.00 %) 0.00 (0.00)    Ingredient 1125315 descendants Overall - 0 (0.00 %) - - 0 (0.00 %) - - 0 (0.00 %) 19.17 (21.08)  Initial quantity - Ingredient 1125315 descendants Overall - 0 (0.00 %) - - 0 (0.00 %) - - 0 (0.00 %) 15.00 (18.44)    Ingredient 1503297 descendants Overall - 0 (0.00 %) - - 0 (0.00 %) - - 0 (0.00 %) 0.00 (0.00)  Number eras - Ingredient 1125315 descendants Overall - 0 (0.00 %) - - 0 (0.00 %) - - 0 (0.00 %) 0.50 (0.55)    Ingredient 1503297 descendants Overall - 0 (0.00 %) - - 0 (0.00 %) - - 0 (0.00 %) 0.00 (0.00)  Exposed time - Ingredient 1125315 descendants Overall - 0 (0.00 %) - - 0 (0.00 %) - - 0 (0.00 %) 57.33 (131.32)    Ingredient 1503297 descendants Overall - 0 (0.00 %) - - 0 (0.00 %) - - 0 (0.00 %) 0.00 (0.00)  Cumulative dose Milligram Ingredient 1125315 descendants Acetaminophen - 0 (0.00 %) - - 0 (0.00 %) - - 0 (0.00 %) 2,934.73 (5,551.07)  Initial daily dose Milligram Ingredient 1125315 descendants Acetaminophen - 0 (0.00 %) - - 0 (0.00 %) - - 0 (0.00 %) 121.33 (209.68)  Cumulative dose Milligram Ingredient 1503297 descendants Metformin - 0 (0.00 %) - - 0 (0.00 %) - - 0 (0.00 %) 0.00 (0.00)  Initial daily dose Milligram Ingredient 1503297 descendants Metformin - 0 (0.00 %) - - 0 (0.00 %) - - 0 (0.00 %) 0.00 (0.00) Age group sex; >50 male   Number records - Overall Overall 4 - - 5 - - 2 - -  Number subjects - Overall Overall 4 - - 5 - - 2 - -  Number exposures - Ingredient 1503297 descendants Overall - 0 (0.00 %) 0.50 (1.00) - 0 (0.00 %) 0.20 (0.45) - 0 (0.00 %) 0.00 (0.00)    Ingredient 1125315 descendants Overall - 0 (0.00 %) 0.25 (0.50) - 0 (0.00 %) 0.00 (0.00) - 0 (0.00 %) 0.00 (0.00)  Time exposure - Ingredient 1503297 descendants Overall - 3 (75.00 %) - - 4 (80.00 %) - - 2 (100.00 %) -    Ingredient 1125315 descendants Overall - 3 (75.00 %) - - 5 (100.00 %) - - 2 (100.00 %) -  Cumulative quantity - Ingredient 1503297 descendants Overall - 0 (0.00 %) 21.25 (42.50) - 0 (0.00 %) 7.00 (15.65) - 0 (0.00 %) 0.00 (0.00)    Ingredient 1125315 descendants Overall - 0 (0.00 %) 7.50 (15.00) - 0 (0.00 %) 0.00 (0.00) - 0 (0.00 %) 0.00 (0.00)  Initial quantity - Ingredient 1125315 descendants Overall - 0 (0.00 %) 7.50 (15.00) - 0 (0.00 %) 0.00 (0.00) - 0 (0.00 %) 0.00 (0.00)    Ingredient 1503297 descendants Overall - 0 (0.00 %) 11.25 (22.50) - 0 (0.00 %) 7.00 (15.65) - 0 (0.00 %) 0.00 (0.00)  Number eras - Ingredient 1125315 descendants Overall - 0 (0.00 %) 0.25 (0.50) - 0 (0.00 %) 0.00 (0.00) - 0 (0.00 %) 0.00 (0.00)    Ingredient 1503297 descendants Overall - 0 (0.00 %) 0.25 (0.50) - 0 (0.00 %) 0.20 (0.45) - 0 (0.00 %) 0.00 (0.00)  Exposed time - Ingredient 1125315 descendants Overall - 0 (0.00 %) 5.50 (11.00) - 0 (0.00 %) 0.00 (0.00) - 0 (0.00 %) 0.00 (0.00)    Ingredient 1503297 descendants Overall - 0 (0.00 %) 10.00 (20.00) - 0 (0.00 %) 133.60 (298.74) - 0 (0.00 %) 0.00 (0.00)  Cumulative dose Milligram Ingredient 1125315 descendants Acetaminophen - 0 (0.00 %) 122.91 (245.81) - 0 (0.00 %) 0.00 (0.00) - 0 (0.00 %) 0.00 (0.00)  Initial daily dose Milligram Ingredient 1125315 descendants Acetaminophen - 0 (0.00 %) 5.59 (11.17) - 0 (0.00 %) 0.00 (0.00) - 0 (0.00 %) 0.00 (0.00)  Cumulative dose Milligram Ingredient 1503297 descendants Metformin - 0 (0.00 %) 12,019.23 (24,038.46) - 0 (0.00 %) 3,500.00 (7,826.24) - 0 (0.00 %) 0.00 (0.00)  Initial daily dose Milligram Ingredient 1503297 descendants Metformin - 0 (0.00 %) 296.05 (592.11) - 0 (0.00 %) 5.24 (11.72) - 0 (0.00 %) 0.00 (0.00) Age group; <=50   Number records - Overall Overall 72 - - 56 - - 53 - -  Number subjects - Overall Overall 72 - - 56 - - 53 - -  Number exposures - Ingredient 1503297 descendants Overall - 0 (0.00 %) 0.12 (0.33) - 0 (0.00 %) 0.14 (0.40) - 0 (0.00 %) 0.13 (0.39)    Ingredient 1125315 descendants Overall - 0 (0.00 %) 0.32 (0.60) - 0 (0.00 %) 0.21 (0.49) - 0 (0.00 %) 0.30 (0.61)  Time exposure - Ingredient 1503297 descendants Overall - 63 (87.50 %) 969.22 (1,869.81) - 49 (87.50 %) 950.57 (1,024.60) - 47 (88.68 %) 905.67 (707.38)    Ingredient 1125315 descendants Overall - 53 (73.61 %) 852.00 (1,111.88) - 46 (82.14 %) 1,608.90 (3,032.57) - 40 (75.47 %) 423.54 (861.52)  Cumulative quantity - Ingredient 1503297 descendants Overall - 0 (0.00 %) 5.62 (17.70) - 0 (0.00 %) 7.14 (20.99) - 0 (0.00 %) 6.04 (19.22)    Ingredient 1125315 descendants Overall - 0 (0.00 %) 11.14 (22.70) - 0 (0.00 %) 9.05 (25.94) - 0 (0.00 %) 12.19 (26.69)  Initial quantity - Ingredient 1125315 descendants Overall - 0 (0.00 %) 9.88 (20.27) - 0 (0.00 %) 7.61 (21.21) - 0 (0.00 %) 9.26 (22.04)    Ingredient 1503297 descendants Overall - 0 (0.00 %) 5.62 (17.70) - 0 (0.00 %) 5.71 (18.13) - 0 (0.00 %) 4.53 (13.06)  Number eras - Ingredient 1125315 descendants Overall - 0 (0.00 %) 0.28 (0.48) - 0 (0.00 %) 0.21 (0.49) - 0 (0.00 %) 0.25 (0.43)    Ingredient 1503297 descendants Overall - 0 (0.00 %) 0.12 (0.33) - 0 (0.00 %) 0.14 (0.40) - 0 (0.00 %) 0.13 (0.39)  Exposed time - Ingredient 1125315 descendants Overall - 0 (0.00 %) 181.83 (664.23) - 0 (0.00 %) 102.91 (315.66) - 0 (0.00 %) 136.26 (406.61)    Ingredient 1503297 descendants Overall - 0 (0.00 %) 44.46 (177.38) - 0 (0.00 %) 41.12 (150.60) - 0 (0.00 %) 98.21 (490.20)  Cumulative dose Milligram Ingredient 1125315 descendants Acetaminophen - 0 (0.00 %) 36,404.83 (107,012.47) - 0 (0.00 %) 18,776.24 (106,914.36) - 0 (0.00 %) 33,712.88 (122,200.80)  Initial daily dose Milligram Ingredient 1125315 descendants Acetaminophen - 0 (0.00 %) 1,421.28 (6,976.21) - 0 (0.00 %) 182.68 (819.83) - 0 (0.00 %) 2,511.00 (17,571.59)  Cumulative dose Milligram Ingredient 1503297 descendants Metformin - 0 (0.00 %) 3,415.41 (12,137.38) - 0 (0.00 %) 2,809.75 (9,363.11) - 0 (0.00 %) 3,435.35 (13,737.39)  Initial daily dose Milligram Ingredient 1503297 descendants Metformin - 0 (0.00 %) 1,174.73 (9,430.95) - 0 (0.00 %) 19.97 (73.67) - 0 (0.00 %) 25.12 (152.86) Age group; >50   Number records - Overall Overall 5 - - 6 - - 8 - -  Number subjects - Overall Overall 5 - - 6 - - 8 - -  Number exposures - Ingredient 1503297 descendants Overall - 0 (0.00 %) 0.40 (0.89) - 0 (0.00 %) 0.17 (0.41) - 0 (0.00 %) 0.00 (0.00)    Ingredient 1125315 descendants Overall - 0 (0.00 %) 0.20 (0.45) - 0 (0.00 %) 0.00 (0.00) - 0 (0.00 %) 0.50 (0.76)  Time exposure - Ingredient 1503297 descendants Overall - 4 (80.00 %) - - 5 (83.33 %) - - 8 (100.00 %) -    Ingredient 1125315 descendants Overall - 4 (80.00 %) - - 6 (100.00 %) - - 5 (62.50 %) 454.67 (429.96)  Cumulative quantity - Ingredient 1503297 descendants Overall - 0 (0.00 %) 17.00 (38.01) - 0 (0.00 %) 5.83 (14.29) - 0 (0.00 %) 0.00 (0.00)    Ingredient 1125315 descendants Overall - 0 (0.00 %) 6.00 (13.42) - 0 (0.00 %) 0.00 (0.00) - 0 (0.00 %) 14.38 (19.90)  Initial quantity - Ingredient 1125315 descendants Overall - 0 (0.00 %) 6.00 (13.42) - 0 (0.00 %) 0.00 (0.00) - 0 (0.00 %) 11.25 (17.06)    Ingredient 1503297 descendants Overall - 0 (0.00 %) 9.00 (20.12) - 0 (0.00 %) 5.83 (14.29) - 0 (0.00 %) 0.00 (0.00)  Number eras - Ingredient 1125315 descendants Overall - 0 (0.00 %) 0.20 (0.45) - 0 (0.00 %) 0.00 (0.00) - 0 (0.00 %) 0.38 (0.52)    Ingredient 1503297 descendants Overall - 0 (0.00 %) 0.20 (0.45) - 0 (0.00 %) 0.17 (0.41) - 0 (0.00 %) 0.00 (0.00)  Exposed time - Ingredient 1125315 descendants Overall - 0 (0.00 %) 4.40 (9.84) - 0 (0.00 %) 0.00 (0.00) - 0 (0.00 %) 43.00 (114.12)    Ingredient 1503297 descendants Overall - 0 (0.00 %) 8.00 (17.89) - 0 (0.00 %) 111.33 (272.71) - 0 (0.00 %) 0.00 (0.00)  Cumulative dose Milligram Ingredient 1125315 descendants Acetaminophen - 0 (0.00 %) 98.32 (219.86) - 0 (0.00 %) 0.00 (0.00) - 0 (0.00 %) 2,201.05 (4,884.25)  Initial daily dose Milligram Ingredient 1125315 descendants Acetaminophen - 0 (0.00 %) 4.47 (9.99) - 0 (0.00 %) 0.00 (0.00) - 0 (0.00 %) 91.00 (185.90)  Cumulative dose Milligram Ingredient 1503297 descendants Metformin - 0 (0.00 %) 9,615.38 (21,500.65) - 0 (0.00 %) 2,916.67 (7,144.35) - 0 (0.00 %) 0.00 (0.00)  Initial daily dose Milligram Ingredient 1503297 descendants Metformin - 0 (0.00 %) 236.84 (529.60) - 0 (0.00 %) 4.37 (10.70) - 0 (0.00 %) 0.00 (0.00) Overall; Overall   Number records - Overall Overall 77 - - 62 - - 61 - -  Number subjects - Overall Overall 77 - - 62 - - 61 - -  Number exposures - Ingredient 1503297 descendants Overall - 0 (0.00 %) 0.14 (0.39) - 0 (0.00 %) 0.15 (0.40) - 0 (0.00 %) 0.11 (0.37)    Ingredient 1125315 descendants Overall - 0 (0.00 %) 0.31 (0.59) - 0 (0.00 %) 0.19 (0.47) - 0 (0.00 %) 0.33 (0.63)  Time exposure - Ingredient 1503297 descendants Overall - 67 (87.01 %) 879.40 (1,785.61) - 54 (87.10 %) 870.12 (975.51) - 55 (90.16 %) 905.67 (707.38)    Ingredient 1125315 descendants Overall - 57 (74.03 %) 809.85 (1,098.52) - 52 (83.87 %) 1,608.90 (3,032.57) - 45 (73.77 %) 429.38 (786.50)  Cumulative quantity - Ingredient 1503297 descendants Overall - 0 (0.00 %) 6.36 (19.41) - 0 (0.00 %) 7.02 (20.35) - 0 (0.00 %) 5.25 (18.01)    Ingredient 1125315 descendants Overall - 0 (0.00 %) 10.81 (22.19) - 0 (0.00 %) 8.18 (24.78) - 0 (0.00 %) 12.48 (25.77)  Initial quantity - Ingredient 1125315 descendants Overall - 0 (0.00 %) 9.62 (19.86) - 0 (0.00 %) 6.87 (20.26) - 0 (0.00 %) 9.52 (21.34)    Ingredient 1503297 descendants Overall - 0 (0.00 %) 5.84 (17.74) - 0 (0.00 %) 5.73 (17.69) - 0 (0.00 %) 3.93 (12.25)  Number eras - Ingredient 1125315 descendants Overall - 0 (0.00 %) 0.27 (0.48) - 0 (0.00 %) 0.19 (0.47) - 0 (0.00 %) 0.26 (0.44)    Ingredient 1503297 descendants Overall - 0 (0.00 %) 0.13 (0.34) - 0 (0.00 %) 0.15 (0.40) - 0 (0.00 %) 0.11 (0.37)  Exposed time - Ingredient 1125315 descendants Overall - 0 (0.00 %) 170.31 (643.52) - 0 (0.00 %) 92.95 (301.30) - 0 (0.00 %) 124.03 (381.86)    Ingredient 1503297 descendants Overall - 0 (0.00 %) 42.09 (171.73) - 0 (0.00 %) 47.92 (164.27) - 0 (0.00 %) 85.33 (457.57)  Cumulative dose Milligram Ingredient 1125315 descendants Acetaminophen - 0 (0.00 %) 34,047.26 (103,823.71) - 0 (0.00 %) 16,959.19 (101,674.35) - 0 (0.00 %) 29,580.19 (114,279.41)  Initial daily dose Milligram Ingredient 1125315 descendants Acetaminophen - 0 (0.00 %) 1,329.28 (6,751.98) - 0 (0.00 %) 165.00 (780.37) - 0 (0.00 %) 2,193.63 (16,379.10)  Cumulative dose Milligram Ingredient 1503297 descendants Metformin - 0 (0.00 %) 3,818.00 (12,818.71) - 0 (0.00 %) 2,820.10 (9,123.02) - 0 (0.00 %) 2,984.81 (12,842.15)  Initial daily dose Milligram Ingredient 1503297 descendants Metformin - 0 (0.00 %) 1,113.83 (9,119.22) - 0 (0.00 %) 18.46 (70.18) - 0 (0.00 %) 21.82 (142.56) Sex; Female   Number records - Overall Overall 41 - - 20 - - 37 - -  Number subjects - Overall Overall 41 - - 20 - - 37 - -  Number exposures - Ingredient 1503297 descendants Overall - 0 (0.00 %) 0.12 (0.33) - 0 (0.00 %) 0.10 (0.31) - 0 (0.00 %) 0.16 (0.44)    Ingredient 1125315 descendants Overall - 0 (0.00 %) 0.34 (0.66) - 0 (0.00 %) 0.20 (0.41) - 0 (0.00 %) 0.27 (0.51)  Time exposure - Ingredient 1503297 descendants Overall - 36 (87.80 %) 383.60 (279.32) - 18 (90.00 %) 2,321.00 (287.09) - 32 (86.49 %) 791.20 (726.10)    Ingredient 1125315 descendants Overall - 30 (73.17 %) 1,247.00 (1,333.94) - 16 (80.00 %) 816.25 (1,204.01) - 28 (75.68 %) 632.44 (1,020.81)  Cumulative quantity - Ingredient 1503297 descendants Overall - 0 (0.00 %) 5.73 (17.41) - 0 (0.00 %) 7.00 (21.79) - 0 (0.00 %) 7.43 (21.78)    Ingredient 1125315 descendants Overall - 0 (0.00 %) 13.68 (26.00) - 0 (0.00 %) 14.00 (31.85) - 0 (0.00 %) 10.41 (20.32)  Initial quantity - Ingredient 1125315 descendants Overall - 0 (0.00 %) 12.93 (23.85) - 0 (0.00 %) 14.00 (31.85) - 0 (0.00 %) 9.73 (19.72)    Ingredient 1503297 descendants Overall - 0 (0.00 %) 5.73 (17.41) - 0 (0.00 %) 7.00 (21.79) - 0 (0.00 %) 5.27 (13.84)  Number eras - Ingredient 1125315 descendants Overall - 0 (0.00 %) 0.29 (0.51) - 0 (0.00 %) 0.20 (0.41) - 0 (0.00 %) 0.24 (0.43)    Ingredient 1503297 descendants Overall - 0 (0.00 %) 0.12 (0.33) - 0 (0.00 %) 0.10 (0.31) - 0 (0.00 %) 0.16 (0.44)  Exposed time - Ingredient 1125315 descendants Overall - 0 (0.00 %) 267.93 (860.45) - 0 (0.00 %) 118.50 (371.53) - 0 (0.00 %) 134.11 (423.73)    Ingredient 1503297 descendants Overall - 0 (0.00 %) 31.46 (133.66) - 0 (0.00 %) 62.65 (200.43) - 0 (0.00 %) 130.30 (582.87)  Cumulative dose Milligram Ingredient 1125315 descendants Acetaminophen - 0 (0.00 %) 29,652.45 (100,998.92) - 0 (0.00 %) 4,567.98 (10,373.73) - 0 (0.00 %) 44,514.72 (145,016.78)  Initial daily dose Milligram Ingredient 1125315 descendants Acetaminophen - 0 (0.00 %) 1,409.51 (7,516.57) - 0 (0.00 %) 234.67 (1,020.91) - 0 (0.00 %) 3,555.54 (21,029.14)  Cumulative dose Milligram Ingredient 1503297 descendants Metformin - 0 (0.00 %) 3,853.01 (14,026.56) - 0 (0.00 %) 4,306.58 (13,292.63) - 0 (0.00 %) 4,312.80 (16,024.50)  Initial daily dose Milligram Ingredient 1503297 descendants Metformin - 0 (0.00 %) 2,053.75 (12,491.31) - 0 (0.00 %) 7.27 (22.87) - 0 (0.00 %) 34.39 (182.67) Sex; Male   Number records - Overall Overall 36 - - 42 - - 24 - -  Number subjects - Overall Overall 36 - - 42 - - 24 - -  Number exposures - Ingredient 1503297 descendants Overall - 0 (0.00 %) 0.17 (0.45) - 0 (0.00 %) 0.17 (0.44) - 0 (0.00 %) 0.04 (0.20)    Ingredient 1125315 descendants Overall - 0 (0.00 %) 0.28 (0.51) - 0 (0.00 %) 0.19 (0.51) - 0 (0.00 %) 0.42 (0.78)  Time exposure - Ingredient 1503297 descendants Overall - 31 (86.11 %) 1,375.20 (2,545.85) - 36 (85.71 %) 386.50 (439.42) - 23 (95.83 %) -    Ingredient 1125315 descendants Overall - 27 (75.00 %) 275.56 (240.55) - 36 (85.71 %) 2,137.33 (3,853.07) - 17 (70.83 %) 168.29 (125.09)  Cumulative quantity - Ingredient 1503297 descendants Overall - 0 (0.00 %) 7.08 (21.69) - 0 (0.00 %) 7.02 (19.91) - 0 (0.00 %) 1.88 (9.19)    Ingredient 1125315 descendants Overall - 0 (0.00 %) 7.53 (16.61) - 0 (0.00 %) 5.40 (20.47) - 0 (0.00 %) 15.67 (32.69)  Initial quantity - Ingredient 1125315 descendants Overall - 0 (0.00 %) 5.86 (13.38) - 0 (0.00 %) 3.48 (10.20) - 0 (0.00 %) 9.21 (24.06)    Ingredient 1503297 descendants Overall - 0 (0.00 %) 5.97 (18.35) - 0 (0.00 %) 5.12 (15.64) - 0 (0.00 %) 1.88 (9.19)  Number eras - Ingredient 1125315 descendants Overall - 0 (0.00 %) 0.25 (0.44) - 0 (0.00 %) 0.19 (0.51) - 0 (0.00 %) 0.29 (0.46)    Ingredient 1503297 descendants Overall - 0 (0.00 %) 0.14 (0.35) - 0 (0.00 %) 0.17 (0.44) - 0 (0.00 %) 0.04 (0.20)  Exposed time - Ingredient 1125315 descendants Overall - 0 (0.00 %) 59.14 (170.94) - 0 (0.00 %) 80.79 (265.75) - 0 (0.00 %) 108.50 (314.56)    Ingredient 1503297 descendants Overall - 0 (0.00 %) 54.19 (208.18) - 0 (0.00 %) 40.90 (146.20) - 0 (0.00 %) 16.00 (78.38)  Cumulative dose Milligram Ingredient 1125315 descendants Acetaminophen - 0 (0.00 %) 39,052.46 (108,167.40) - 0 (0.00 %) 22,859.76 (123,369.38) - 0 (0.00 %) 6,556.10 (15,515.39)  Initial daily dose Milligram Ingredient 1125315 descendants Acetaminophen - 0 (0.00 %) 1,237.90 (5,865.79) - 0 (0.00 %) 131.83 (647.72) - 0 (0.00 %) 94.01 (294.01)  Cumulative dose Milligram Ingredient 1503297 descendants Metformin - 0 (0.00 %) 3,778.13 (11,487.12) - 0 (0.00 %) 2,112.25 (6,352.60) - 0 (0.00 %) 937.50 (4,592.79)  Initial daily dose Milligram Ingredient 1503297 descendants Metformin - 0 (0.00 %) 43.37 (199.48) - 0 (0.00 %) 23.79 (83.64) - 0 (0.00 %) 2.44 (11.96)","code":"tableDrugUtilisation(du_results) #> ! Results have not been suppressed. #> ℹ <median> (<q25> - <q75>) has not been formatted. tableDrugUtilisation(   du_results,   header = c(\"group\", \"estimate\"),   splitStrata = FALSE,   cohortName = TRUE,   cdmName = FALSE,   conceptSet = TRUE,   ingredient = TRUE,   groupColumn = list(\"Strata\" = c(\"strata_name\", \"strata_level\")),   type = \"flextable\",   formatEstimateName = c(     `Missing, N (%)` = \"<count_missing> (<percentage_missing> %)\",      N = \"<count>\",      `Non-missing, Mean (SD)` = \"<mean> (<sd>)\"   ) ) #> ! Results have not been suppressed."},{"path":"https://darwin-eu-dev.github.io/DrugUtilisation/articles/indication.html","id":"introduction","dir":"Articles","previous_headings":"","what":"Introduction","title":"Add indications to Drug Utilisation Cohort","text":"vignette, demonstrate use addIndications() function establish binary indicator drug utilisation cohort another concept-based cohort. DrugUtilisation package designed work data OMOP CDM format, first step create reference data using DBI CDMConnector packages. connection Postgres database look like:","code":"library(DrugUtilisation) library(DBI) library(duckdb) library(CDMConnector) library(dplyr) library(PatientProfiles)   con <- DBI::dbConnect(duckdb::duckdb(), eunomia_dir())  cdm <- CDMConnector::cdm_from_con(   con = con,   cdm_schema = \"main\",   write_schema = \"main\" )"},{"path":"https://darwin-eu-dev.github.io/DrugUtilisation/articles/indication.html","id":"create-a-drug-utilisation-cohort","dir":"Articles","previous_headings":"Introduction","what":"Create a drug utilisation cohort","title":"Add indications to Drug Utilisation Cohort","text":"use Acetaminophen example drug construct drug utilisation cohort. begin, ’ll employ CodelistGenerator package generate concept list associated Acetaminophen. Next, can create drug utilisation cohort using conceptList generateDrugUtilisationCohortSet() function. better understanding arguments functionalities generateDrugUtilisationCohortSet(), please refer Use DrugUtilisation create cohort vignette.","code":"conceptList <- CodelistGenerator::getDrugIngredientCodes(cdm, \"acetaminophen\") conceptList #>  #> - 161_acetaminophen (7 codes) cdm <- generateDrugUtilisationCohortSet(   cdm = cdm,   name = \"acetaminophen_users\",   conceptSet = conceptList,   limit = \"All\",   gapEra = 30,   priorUseWashout = 0 )"},{"path":"https://darwin-eu-dev.github.io/DrugUtilisation/articles/indication.html","id":"create-a-indication-cohort","dir":"Articles","previous_headings":"Introduction","what":"Create a indication cohort","title":"Add indications to Drug Utilisation Cohort","text":"Next going create indications cohort indicate patients sinusitis bronchitis. can done using CDMConnector::generateConceptCohortSet().","code":"indications <-   list(     sinusitis = c(257012, 4294548, 40481087),     bronchitis = c(260139, 258780)   )  cdm <-   CDMConnector::generateConceptCohortSet(cdm, name = \"indications_cohort\", indications)  cohortCount(cdm[[\"indications_cohort\"]]) |>   left_join(     settings(cdm[[\"indications_cohort\"]]) |>       select(cohort_definition_id, cohort_name),     by = \"cohort_definition_id\"   ) #> # A tibble: 2 × 4 #>   cohort_definition_id number_records number_subjects cohort_name #>                  <int>          <int>           <int> <chr>       #> 1                    1           2688            2688 sinusitis   #> 2                    2           2546            2546 bronchitis"},{"path":"https://darwin-eu-dev.github.io/DrugUtilisation/articles/indication.html","id":"add-indications-with-addindication-function","dir":"Articles","previous_headings":"","what":"Add indications with addIndication() function","title":"Add indications to Drug Utilisation Cohort","text":"add indication drug utilisation cohort can simple use addIndication() function. , need drug utilisation cohort indicationCohortName. However, arguments can specified using additional parameters. example provided . Use indicationGap specify indication gaps, defined gap event indication. Additionally, can use unknownIndicationTable specify tables look unknown indication.","code":"cdm[[\"acetaminophen_users\"]] |>   addIndication(     indicationCohortName = \"indications_cohort\",     indicationWindow =  list(c(0,0),c(-30,0),c(-365,0)),     unknownIndicationTable =  c(\"condition_occurrence\")   ) #> # Source:   table<og_006_1721357816> [?? x 7] #> # Database: DuckDB v1.0.0 [unknown@Linux 6.5.0-1023-azure:R 4.4.1//tmp/Rtmp6Z3rn9/file1d89fda845c.duckdb] #>    cohort_definition_id subject_id cohort_start_date cohort_end_date #>                   <int>      <int> <date>            <date>          #>  1                    1        842 1914-08-04        1914-08-18      #>  2                    1       2679 2016-09-07        2016-09-21      #>  3                    1       3106 1973-05-11        1973-05-25      #>  4                    1        784 1967-11-18        1967-11-25      #>  5                    1       4705 1973-03-14        1973-03-28      #>  6                    1        411 1961-02-11        1961-02-25      #>  7                    1       5223 1968-06-20        1968-07-04      #>  8                    1        865 1945-09-01        1945-09-08      #>  9                    1        956 1945-04-15        1945-04-22      #> 10                    1       2693 1962-01-27        1962-02-10      #> # ℹ more rows #> # ℹ 3 more variables: indication_0_to_0 <chr>, indication_m30_to_0 <chr>, #> #   indication_m365_to_0 <chr>"},{"path":"https://darwin-eu-dev.github.io/DrugUtilisation/articles/indication.html","id":"summarise-indications-with-summariseindication","dir":"Articles","previous_headings":"Add indications with addIndication() function","what":"Summarise indications with summariseIndication()","title":"Add indications to Drug Utilisation Cohort","text":"create summary table indications cohort, can use summariseIndication() function. can also summarise indications using strata argument summariseIndication() function. example , summarized ageGroup sex.","code":"# cdm[[\"acetaminophen_users\"]] |> #   addIndication( #     cdm = cdm,  #     indicationCohortName = \"indications_cohort\", #     indicationGap =  c(0, 30, 365), #     unknownIndicationTable =  c(\"condition_occurrence\") #   ) |> #   summariseIndication(cdm) |> #   select(\"variable_name\", \"estimate_name\", \"estimate_value\") # cdm[[\"acetaminophen_users\"]] |> #   addDemographics(ageGroup = list(c(0, 19), c(20, 150))) |> #   addIndication( #     cdm = cdm, #     indicationCohortName = \"indications_cohort\", #     indicationGap =  c(0), #     unknownIndicationTable =  c(\"condition_occurrence\") #   ) |> #   summariseIndication( #     cdm, #     strata = list(\"age\" = \"age_group\", \"sex\" = \"sex\")) |> #       select(\"variable_name\", \"estimate_name\", \"estimate_value\",\"strata_name\")"},{"path":"https://darwin-eu-dev.github.io/DrugUtilisation/articles/mock_data.html","id":"introduction","dir":"Articles","previous_headings":"","what":"Introduction","title":"Create mock data to test DrugUtilisation package","text":"vignette see use mockDrugUtilisation() function create mock data. function predominantly used package’s unit testing. example, one use default parameters create mock cdm reference like : populate several omop tables (example, person, concept visit_occurrence) two cohorts cdm reference.","code":"cdm <- mockDrugUtilisation() cdm$person |>    dplyr::glimpse() #> Rows: ?? #> Columns: 11 #> Database: DuckDB v1.0.0 [unknown@Linux 6.5.0-1023-azure:R 4.4.1/:memory:] #> $ person_id            <int> 1, 2, 3, 4, 5, 6, 7, 8, 9, 10 #> $ gender_concept_id    <dbl> 8507, 8532, 8507, 8507, 8532, 8507, 8507, 8507, 8… #> $ year_of_birth        <int> 2008, 2000, 1970, 2003, 1956, 1986, 1986, 1983, 1… #> $ day_of_birth         <int> 5, 21, 26, 11, 20, 20, 13, 9, 11, 1 #> $ birth_datetime       <date> 2008-12-05, 2000-11-21, 1970-11-26, 2003-02-11, 1… #> $ race_concept_id      <dbl> NA, NA, NA, NA, NA, NA, NA, NA, NA, NA #> $ ethnicity_concept_id <dbl> NA, NA, NA, NA, NA, NA, NA, NA, NA, NA #> $ location_id          <dbl> NA, NA, NA, NA, NA, NA, NA, NA, NA, NA #> $ provider_id          <dbl> NA, NA, NA, NA, NA, NA, NA, NA, NA, NA #> $ care_site_id         <dbl> NA, NA, NA, NA, NA, NA, NA, NA, NA, NA #> $ month_of_birth       <int> 12, 11, 11, 2, 4, 1, 2, 12, 3, 5  cdm$person |>   dplyr::tally() #> # Source:   SQL [1 x 1] #> # Database: DuckDB v1.0.0 [unknown@Linux 6.5.0-1023-azure:R 4.4.1/:memory:] #>       n #>   <dbl> #> 1    10 cdm$concept |>    dplyr::glimpse() #> Rows: ?? #> Columns: 10 #> Database: DuckDB v1.0.0 [unknown@Linux 6.5.0-1023-azure:R 4.4.1/:memory:] #> $ concept_id       <dbl> 8505, 8507, 8532, 8576, 8587, 8718, 9202, 9551, 9655,… #> $ concept_name     <chr> \"hour\", \"MALE\", \"FEMALE\", \"milligram\", \"milliliter\", … #> $ domain_id        <chr> \"Unit\", \"Gender\", \"Gender\", \"Unit\", \"Unit\", \"Unit\", \"… #> $ vocabulary_id    <chr> \"UCUM\", \"Gender\", \"Gender\", \"UCUM\", \"UCUM\", \"UCUM\", \"… #> $ concept_class_id <chr> \"Unit\", \"Gender\", \"Gender\", \"Unit\", \"Unit\", \"Unit\", \"… #> $ standard_concept <chr> \"S\", \"S\", \"S\", \"S\", \"S\", \"S\", \"S\", \"S\", \"S\", NA, \"S\",… #> $ concept_code     <chr> \"h\", \"M\", \"F\", \"mg\", \"mL\", \"[iU]\", \"OP\", \"10*-3.eq\", … #> $ valid_start_date <chr> \"01/01/1970\", \"01/01/1970\", \"01/01/1970\", \"01/01/1970… #> $ valid_end_date   <chr> \"31/12/2099\", \"31/12/2099\", \"31/12/2099\", \"31/12/2099… #> $ invalid_reason   <lgl> NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, N…  cdm$concept |>   dplyr::tally() #> # Source:   SQL [1 x 1] #> # Database: DuckDB v1.0.0 [unknown@Linux 6.5.0-1023-azure:R 4.4.1/:memory:] #>       n #>   <dbl> #> 1    38 cdm$visit_occurrence |>    dplyr::glimpse() #> Rows: ?? #> Columns: 6 #> Database: DuckDB v1.0.0 [unknown@Linux 6.5.0-1023-azure:R 4.4.1/:memory:] #> $ visit_occurrence_id   <int> 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 1… #> $ person_id             <int> 2, 2, 3, 3, 3, 3, 4, 6, 7, 8, 10, 1, 1, 2, 2, 3,… #> $ visit_concept_id      <dbl> 9202, 9202, 9202, 9202, 9202, 9202, 9202, 9202, … #> $ visit_start_date      <date> 2022-06-10, 2022-05-25, 1997-05-27, 1984-10-29,… #> $ visit_end_date        <date> 2022-06-11, 2022-05-28, 2000-04-19, 2001-03-20,… #> $ visit_type_concept_id <dbl> 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, …  cdm$visit_occurrence |>   dplyr::tally() #> # Source:   SQL [1 x 1] #> # Database: DuckDB v1.0.0 [unknown@Linux 6.5.0-1023-azure:R 4.4.1/:memory:] #>       n #>   <dbl> #> 1    47 cdm$cohort1 |>    dplyr::glimpse() #> Rows: ?? #> Columns: 4 #> Database: DuckDB v1.0.0 [unknown@Linux 6.5.0-1023-azure:R 4.4.1/:memory:] #> $ cohort_definition_id <int> 1, 3, 2, 1, 3, 3, 1, 3, 2, 1 #> $ subject_id           <int> 1, 2, 3, 4, 5, 6, 7, 8, 9, 10 #> $ cohort_start_date    <date> 2020-09-20, 2022-05-21, 2010-02-10, 2022-01-26, 2… #> $ cohort_end_date      <date> 2021-03-18, 2022-06-05, 2010-07-21, 2022-04-28, 2…  cdm$cohort1 |>   dplyr::tally() #> # Source:   SQL [1 x 1] #> # Database: DuckDB v1.0.0 [unknown@Linux 6.5.0-1023-azure:R 4.4.1/:memory:] #>       n #>   <dbl> #> 1    10 cdm$cohort2 |>    dplyr::glimpse() #> Rows: ?? #> Columns: 4 #> Database: DuckDB v1.0.0 [unknown@Linux 6.5.0-1023-azure:R 4.4.1/:memory:] #> $ cohort_definition_id <int> 1, 1, 2, 1, 2, 3, 1, 3, 1, 1 #> $ subject_id           <int> 1, 2, 3, 4, 5, 6, 7, 8, 9, 10 #> $ cohort_start_date    <date> 2021-02-10, 2022-06-05, 1991-01-13, 2021-02-09, 2… #> $ cohort_end_date      <date> 2021-02-12, 2022-06-07, 2009-08-28, 2021-07-19, 2…  cdm$cohort2 |>   dplyr::tally() #> # Source:   SQL [1 x 1] #> # Database: DuckDB v1.0.0 [unknown@Linux 6.5.0-1023-azure:R 4.4.1/:memory:] #>       n #>   <dbl> #> 1    10"},{"path":"https://darwin-eu-dev.github.io/DrugUtilisation/articles/mock_data.html","id":"setting-seeds","dir":"Articles","previous_headings":"Introduction","what":"Setting seeds","title":"Create mock data to test DrugUtilisation package","text":"user can also set seed control randomness within data. now observe cohort1 changed result seed: users can create mock data two ways, one set numberIndividual parameter cusutomise tables.","code":"cdm <- mockDrugUtilisation(   seed = 789 ) cdm$cohort1 |>    dplyr::glimpse() #> Rows: ?? #> Columns: 4 #> Database: DuckDB v1.0.0 [unknown@Linux 6.5.0-1023-azure:R 4.4.1/:memory:] #> $ cohort_definition_id <int> 2, 1, 2, 1, 1, 3, 1, 3, 2, 1 #> $ subject_id           <int> 1, 2, 3, 4, 5, 6, 7, 8, 9, 10 #> $ cohort_start_date    <date> 2018-06-14, 2019-04-10, 2020-01-28, 2010-07-09, 2… #> $ cohort_end_date      <date> 2018-08-10, 2019-11-19, 2020-02-02, 2015-04-24, 2…"},{"path":"https://darwin-eu-dev.github.io/DrugUtilisation/articles/mock_data.html","id":"creat-mock-data-using-numberindividual-parameter","dir":"Articles","previous_headings":"Introduction","what":"Creat mock data using numberIndividual parameter","title":"Create mock data to test DrugUtilisation package","text":"example use follows: ensure person, observation_period, cohort1 cohort2 100 rows. consequence , number rows tables visit_occurrence, condition_occurrence drug_strength rows compared mock data produced using default settings.","code":"cdm <- mockDrugUtilisation(numberIndividual = 100) cdm$person |>   dplyr::glimpse() #> Rows: ?? #> Columns: 11 #> Database: DuckDB v1.0.0 [unknown@Linux 6.5.0-1023-azure:R 4.4.1/:memory:] #> $ person_id            <int> 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15… #> $ gender_concept_id    <dbl> 8507, 8532, 8507, 8507, 8532, 8507, 8507, 8507, 8… #> $ year_of_birth        <int> 1977, 1997, 1982, 1994, 1970, 1980, 1966, 1997, 2… #> $ day_of_birth         <int> 26, 22, 23, 22, 1, 13, 27, 10, 15, 21, 2, 12, 4, … #> $ birth_datetime       <date> 1977-04-26, 1997-12-22, 1982-04-23, 1994-08-22, … #> $ race_concept_id      <dbl> NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, N… #> $ ethnicity_concept_id <dbl> NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, N… #> $ location_id          <dbl> NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, N… #> $ provider_id          <dbl> NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, N… #> $ care_site_id         <dbl> NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, N… #> $ month_of_birth       <int> 4, 12, 4, 8, 5, 3, 1, 2, 1, 10, 3, 5, 2, 12, 3, 4… cdm$person |>   dplyr::tally() #> # Source:   SQL [1 x 1] #> # Database: DuckDB v1.0.0 [unknown@Linux 6.5.0-1023-azure:R 4.4.1/:memory:] #>       n #>   <dbl> #> 1   100 cdm$visit_occurrence |>   dplyr::glimpse() #> Rows: ?? #> Columns: 6 #> Database: DuckDB v1.0.0 [unknown@Linux 6.5.0-1023-azure:R 4.4.1/:memory:] #> $ visit_occurrence_id   <int> 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 1… #> $ person_id             <int> 1, 1, 1, 1, 2, 2, 2, 4, 4, 5, 5, 5, 6, 7, 7, 7, … #> $ visit_concept_id      <dbl> 9202, 9202, 9202, 9202, 9202, 9202, 9202, 9202, … #> $ visit_start_date      <date> 1989-11-05, 1988-01-17, 1986-10-19, 1996-12-22,… #> $ visit_end_date        <date> 2000-03-28, 1993-12-19, 1994-11-13, 1998-03-13,… #> $ visit_type_concept_id <dbl> 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, … cdm$visit_occurrence |>   dplyr::tally() #> # Source:   SQL [1 x 1] #> # Database: DuckDB v1.0.0 [unknown@Linux 6.5.0-1023-azure:R 4.4.1/:memory:] #>       n #>   <dbl> #> 1   507"},{"path":[]},{"path":"https://darwin-eu-dev.github.io/DrugUtilisation/articles/mock_data.html","id":"customise-omop-tables","dir":"Articles","previous_headings":"Introduction > Creat mock data by customising tables","what":"Customise omop tables","title":"Create mock data to test DrugUtilisation package","text":"saw previously, omop tables automatically populated mockDrugUtilisation(). However, user can customise tables. example, customise drug_exposure table, one following: However, one needs vigilant customised omop table implicitly dependent omop tables. One also modify omop tables including person, concept, concept_ancestor, drug_strength, observation_period, condition_occurrence, observation, concept_relationship.","code":"cdm <- mockDrugUtilisation(     drug_exposure = dplyr::tibble(       drug_exposure_id = 1:3,       person_id = c(1, 1, 1),       drug_concept_id = c(2, 3, 4),       drug_exposure_start_date = as.Date(c(         \"2000-01-01\", \"2000-01-10\", \"2000-02-20\"       )),       drug_exposure_end_date = as.Date(c(         \"2000-02-10\", \"2000-03-01\", \"2000-02-20\"       )),       quantity = c(41, 52, 1),       drug_type_concept_id = 0     )   ) cdm$drug_exposure |>   dplyr::glimpse() #> Rows: ?? #> Columns: 7 #> Database: DuckDB v1.0.0 [unknown@Linux 6.5.0-1023-azure:R 4.4.1/:memory:] #> $ drug_exposure_id         <int> 1, 2, 3 #> $ person_id                <dbl> 1, 1, 1 #> $ drug_concept_id          <dbl> 2, 3, 4 #> $ drug_exposure_start_date <date> 2000-01-01, 2000-01-10, 2000-02-20 #> $ drug_exposure_end_date   <date> 2000-02-10, 2000-03-01, 2000-02-20 #> $ quantity                 <dbl> 41, 52, 1 #> $ drug_type_concept_id     <dbl> 0, 0, 0"},{"path":"https://darwin-eu-dev.github.io/DrugUtilisation/articles/mock_data.html","id":"customise-cohorts","dir":"Articles","previous_headings":"Introduction > Creat mock data by customising tables","what":"Customise cohorts","title":"Create mock data to test DrugUtilisation package","text":"similar fashion, cohort tables can also customised.","code":"cdm <- mockDrugUtilisation(   observation_period = dplyr::tibble(       observation_period_id = 1,       person_id = 1:2,       observation_period_start_date = as.Date(\"1900-01-01\"),       observation_period_end_date = as.Date(\"2100-01-01\"),       period_type_concept_id = 0     ),     cohort1 = dplyr::tibble(       cohort_definition_id = 1,       subject_id = c(1, 1, 2),       cohort_start_date = as.Date(c(\"2000-01-01\", \"2001-01-01\", \"2000-01-01\")),       cohort_end_date = as.Date(c(\"2000-03-01\", \"2001-03-01\", \"2000-03-01\"))     )   ) cdm$cohort1 |>    dplyr::glimpse() #> Rows: ?? #> Columns: 4 #> Database: DuckDB v1.0.0 [unknown@Linux 6.5.0-1023-azure:R 4.4.1/:memory:] #> $ cohort_definition_id <dbl> 1, 1, 1 #> $ subject_id           <dbl> 1, 1, 2 #> $ cohort_start_date    <date> 2000-01-01, 2001-01-01, 2000-01-01 #> $ cohort_end_date      <date> 2000-03-01, 2001-03-01, 2000-03-01"},{"path":"https://darwin-eu-dev.github.io/DrugUtilisation/articles/summarise_treatments.html","id":"introduction","dir":"Articles","previous_headings":"","what":"Introduction","title":"Add treatment summary to a Drug Utilisation cohort","text":"DrugUtilisation package incorporates function summarise dose table multiple cohorts: summariseTreatment(). vignette, explore functionalities usages function.","code":""},{"path":"https://darwin-eu-dev.github.io/DrugUtilisation/articles/summarise_treatments.html","id":"create-mock-table","dir":"Articles","previous_headings":"Introduction","what":"Create mock table","title":"Add treatment summary to a Drug Utilisation cohort","text":"following examples, use cohort cohort1 cohort2 already created mock table. Notice cohort1 cohort three subcohorts representing three different conditions: cohort2 cohort three different treatments:","code":"library(DrugUtilisation) library(CDMConnector) library(dplyr) library(PatientProfiles)  cdm <- mockDrugUtilisation(numberIndividual = 200)  new_cohort_set <- settings(cdm$cohort1) %>%   dplyr::arrange(cohort_definition_id) %>%   dplyr::mutate(cohort_name = c(\"asthma\",\"bronchitis\",\"pneumonia\"))  cdm$cohort1 <- cdm$cohort1 |>   newCohortTable(cohortSetRef = new_cohort_set)  new_cohort_set <- settings(cdm$cohort2) %>%   dplyr::arrange(cohort_definition_id) %>%   dplyr::mutate(cohort_name = c(\"albuterol\",\"fluticasone\",\"montelukast\"))  cdm$cohort2 <- cdm$cohort2 |>   newCohortTable(cohortSetRef = new_cohort_set) settings(cdm$cohort1) #> # A tibble: 3 × 2 #>   cohort_definition_id cohort_name #>                  <int> <chr>       #> 1                    1 asthma      #> 2                    2 bronchitis  #> 3                    3 pneumonia settings(cdm$cohort2) #> # A tibble: 3 × 2 #>   cohort_definition_id cohort_name #>                  <int> <chr>       #> 1                    1 albuterol   #> 2                    2 fluticasone #> 3                    3 montelukast"},{"path":"https://darwin-eu-dev.github.io/DrugUtilisation/articles/summarise_treatments.html","id":"summarise-treatment-with-summarisetreatmentfromcohort-function","dir":"Articles","previous_headings":"","what":"Summarise treatment with summariseTreatmentFromCohort() function","title":"Add treatment summary to a Drug Utilisation cohort","text":"summariseTreatmentFromCohort() function creates standarised tibble summarising treatment information (already specified existing cohort) multiple cohorts. three mandatory arguments: cohort: cohort cdm object. treatmentCohortName: name treatment cohort’s table. window: list windows summarise treatments. See example usage , use summariseTreatmentFromCohort() summarise treatments defined cohort2 cohorts defined cohort1.","code":"summariseTreatmentFromCohort(cohort = cdm$cohort1,                    treatmentCohortName = c(\"cohort2\"),                    window = list(c(0,0), c(1,30))) #> # A tibble: 48 × 13 #>    result_id cdm_name group_name  group_level strata_name strata_level #>        <int> <chr>    <chr>       <chr>       <chr>       <chr>        #>  1         1 DUS MOCK cohort_name asthma      overall     overall      #>  2         1 DUS MOCK cohort_name asthma      overall     overall      #>  3         1 DUS MOCK cohort_name asthma      overall     overall      #>  4         1 DUS MOCK cohort_name asthma      overall     overall      #>  5         1 DUS MOCK cohort_name asthma      overall     overall      #>  6         1 DUS MOCK cohort_name asthma      overall     overall      #>  7         1 DUS MOCK cohort_name asthma      overall     overall      #>  8         1 DUS MOCK cohort_name asthma      overall     overall      #>  9         1 DUS MOCK cohort_name asthma      overall     overall      #> 10         1 DUS MOCK cohort_name asthma      overall     overall      #> # ℹ 38 more rows #> # ℹ 7 more variables: variable_name <chr>, variable_level <chr>, #> #   estimate_name <chr>, estimate_type <chr>, estimate_value <chr>, #> #   additional_name <chr>, additional_level <chr>"},{"path":"https://darwin-eu-dev.github.io/DrugUtilisation/articles/summarise_treatments.html","id":"strata-parameter","dir":"Articles","previous_headings":"Summarise treatment with summariseTreatmentFromCohort() function","what":"strata parameter","title":"Add treatment summary to a Drug Utilisation cohort","text":"can also stratify cohort calculate estimates within strata group using strata parameter. Notice also used treatmentCohortId parameter specify want explore albuterol across cohorts defined cohort1.","code":"cdm[[\"cohort1\"]] <- cdm[[\"cohort1\"]] %>%   addSex() %>%   addAge(ageGroup = list(\"<40\" = c(0, 39), \">40\" = c(40, 150)))  summariseTreatmentFromCohort(cohort = cdm$cohort1,                    treatmentCohortName = c(\"cohort2\"),                    window = list(c(0,0)),                    treatmentCohortId = 1,                    strata = list(\"sex\" = \"sex\", \"age\" = \"age_group\")                    ) #> # A tibble: 60 × 13 #>    result_id cdm_name group_name  group_level strata_name strata_level #>        <int> <chr>    <chr>       <chr>       <chr>       <chr>        #>  1         1 DUS MOCK cohort_name asthma      age_group   <40          #>  2         1 DUS MOCK cohort_name asthma      age_group   <40          #>  3         1 DUS MOCK cohort_name asthma      age_group   <40          #>  4         1 DUS MOCK cohort_name asthma      age_group   <40          #>  5         1 DUS MOCK cohort_name asthma      age_group   >40          #>  6         1 DUS MOCK cohort_name asthma      age_group   >40          #>  7         1 DUS MOCK cohort_name asthma      age_group   >40          #>  8         1 DUS MOCK cohort_name asthma      age_group   >40          #>  9         1 DUS MOCK cohort_name asthma      overall     overall      #> 10         1 DUS MOCK cohort_name asthma      overall     overall      #> # ℹ 50 more rows #> # ℹ 7 more variables: variable_name <chr>, variable_level <chr>, #> #   estimate_name <chr>, estimate_type <chr>, estimate_value <chr>, #> #   additional_name <chr>, additional_level <chr>"},{"path":"https://darwin-eu-dev.github.io/DrugUtilisation/articles/summarise_treatments.html","id":"combination-parameter","dir":"Articles","previous_headings":"Summarise treatment with summariseTreatmentFromCohort() function","what":"combination parameter","title":"Add treatment summary to a Drug Utilisation cohort","text":"Soon, able include combinations different treatments using combination argument. Unfortunately, implemented yet, stay tuned next release! 😄","code":""},{"path":"https://darwin-eu-dev.github.io/DrugUtilisation/articles/summarise_treatments.html","id":"mincellcount-parameter","dir":"Articles","previous_headings":"Summarise treatment with summariseTreatmentFromCohort() function","what":"minCellCount parameter","title":"Add treatment summary to a Drug Utilisation cohort","text":"Specify minimum number individuals strata group must order appear table. Default set 5.","code":""},{"path":"https://darwin-eu-dev.github.io/DrugUtilisation/articles/summarise_treatments.html","id":"summarise-treatment-with-summarisetreatmentfromconceptset-function","dir":"Articles","previous_headings":"","what":"Summarise treatment with summariseTreatmentFromConceptSet() function","title":"Add treatment summary to a Drug Utilisation cohort","text":"summariseTreatmentFromCohort() can used already created treatment cohort. However, case, can use summariseTreatmentFromConceptSet() avoid creating new cohort using function. following arguments provided: cohort: cohort cdm object. treatmentConceptSet: list treatments’ concepts sets. window: list windows summarise treatments. Unfortunately, implemented yet. Stay loop next release!😉","code":""},{"path":"https://darwin-eu-dev.github.io/DrugUtilisation/articles/treatment_discontinuation.html","id":"introduction","dir":"Articles","previous_headings":"","what":"Introduction","title":"Assessing time to treatment discontinuation","text":"Time--discontinuation commonly interest summarising adherence medications.","code":""},{"path":"https://darwin-eu-dev.github.io/DrugUtilisation/articles/treatment_discontinuation.html","id":"time-to-discontinuation-of-amoxicillin","dir":"Articles","previous_headings":"","what":"Time-to-discontinuation of amoxicillin","title":"Assessing time to treatment discontinuation","text":"example, let’s say like study time--discontinuation among new users amoxicillin first 90-days use. can first create amoxicillin study cohort, restricting first occurrence history. can estimate Kaplan-Meier survival curves can use estimateSingleEventSurvival CohortSurvival package, follow-beginning individual’s cohort start date discontinuation occurring cohort end date. ’ll use synthetic Eunomia dataset show done. can plot study result like :  can similarly create table summarising result can also easily stratify results. add patient demographics cohort table using PatientProfiles packages stratify results age group sex. present results plot table.","code":"library(CDMConnector) library(PatientProfiles) library(DrugUtilisation) library(CohortSurvival) library(dplyr)  db <- DBI::dbConnect(duckdb::duckdb(),                       dbdir = eunomia_dir()) cdm <- cdm_from_con(   con = db,   cdm_schema = \"main\",    write_schema = \"main\",    cdm_name = \"Eunomia\" )  cdm <- generateIngredientCohortSet(cdm = cdm,                                    name = \"amoxicillin\",                                    ingredient = \"amoxicillin\",                                     gapEra = 7)  cdm$amoxicillin <- cdm$amoxicillin |>    requireIsFirstDrugEntry()  discontinuation_summary <- estimateSingleEventSurvival(cdm,                                      targetCohortTable = \"amoxicillin\",                                      outcomeCohortTable = \"amoxicillin\",                                      outcomeDateVariable = \"cohort_end_date\",                                      followUpDays = 90,                                      eventGap = 30) plotSurvival(discontinuation_summary) tableSurvival(discontinuation_summary) cdm$amoxicillin <- cdm$amoxicillin |>    addDemographics(ageGroup = list(c(0, 40),                                   c(41, Inf))) |>    compute(temporary = FALSE, name = \"amoxicillin\")  discontinuation_summary <- estimateSingleEventSurvival(cdm,                                                         strata = list(c(\"age_group\"),                                                                      c(\"sex\")),                                     targetCohortTable = \"amoxicillin\",                                      outcomeCohortTable = \"amoxicillin\",                                      outcomeDateVariable = \"cohort_end_date\",                                      followUpDays = 90,                                      eventGap = 30) plotSurvival(discontinuation_summary,               facet = \"strata_level\") tableSurvival(discontinuation_summary)"},{"path":"https://darwin-eu-dev.github.io/DrugUtilisation/authors.html","id":null,"dir":"","previous_headings":"","what":"Authors","title":"Authors and Citation","text":"Martí Català. Author, maintainer. Mike Du. Author. Yuchen Guo. Author. Kim Lopez-Guell. Author. Edward Burn. Contributor. Xintong Li. Contributor. Marta Alcalde-Herraiz. Contributor. Nuria Mercade-Besora. Author. Xihang Chen. Author.","code":""},{"path":"https://darwin-eu-dev.github.io/DrugUtilisation/authors.html","id":"citation","dir":"","previous_headings":"","what":"Citation","title":"Authors and Citation","text":"Català M, Du M, Guo Y, Lopez-Guell K, Mercade-Besora N, Chen X (2024). DrugUtilisation: Summarise Patient-Level Drug Utilisation Data Mapped OMOP Common Data Model. R package version 0.7.0.900, https://darwin-eu-dev.github.io/DrugUtilisation/.","code":"@Manual{,   title = {DrugUtilisation: Summarise Patient-Level Drug Utilisation in Data Mapped to the OMOP Common Data Model},   author = {Martí Català and Mike Du and Yuchen Guo and Kim Lopez-Guell and Nuria Mercade-Besora and Xihang Chen},   year = {2024},   note = {R package version 0.7.0.900},   url = {https://darwin-eu-dev.github.io/DrugUtilisation/}, }"},{"path":[]},{"path":"https://darwin-eu-dev.github.io/DrugUtilisation/index.html","id":"warning-this-package-is-under-development","dir":"","previous_headings":"","what":"WARNING: This package is under development.","title":"Summarise Patient-Level Drug Utilisation in Data Mapped to the OMOP Common Data Model","text":"addDailyDose function works following patterns drug_strength table:","code":""},{"path":"https://darwin-eu-dev.github.io/DrugUtilisation/index.html","id":"package-overview","dir":"","previous_headings":"","what":"Package overview","title":"Summarise Patient-Level Drug Utilisation in Data Mapped to the OMOP Common Data Model","text":"DrugUtilisation contains functions instantiate characterize cohorts used Drug Utilisation Study OMOP common data model. Main functionalities : Create DrugUtilisation cohorts Add indications cohort Add dosage certain ingredient (subseted list drugs) Calculate daily dose Create Concept based cohorts Read concepts json files Summarise drug use certain cohort Summarise indications certain cohort Summarise patients characteristics certain cohort Summarise patients large scale characterics certain cohort","code":""},{"path":"https://darwin-eu-dev.github.io/DrugUtilisation/index.html","id":"example","dir":"","previous_headings":"","what":"Example","title":"Summarise Patient-Level Drug Utilisation in Data Mapped to the OMOP Common Data Model","text":"First, need create cdm reference data ´ll using. ´ll generate example simulated data, see set database please consult CDMConnector package connection examples. package also provides functionality generate mockDrugUtilisation cdm reference:","code":"library(DrugUtilisation) cdm <- mockDrugUtilisation(numberIndividual = 100)"},{"path":"https://darwin-eu-dev.github.io/DrugUtilisation/index.html","id":"create-a-cohort-of-drug-use","dir":"","previous_headings":"Example","what":"Create a cohort of drug use","title":"Summarise Patient-Level Drug Utilisation in Data Mapped to the OMOP Common Data Model","text":"create cohort need conceptList, can read json files: can build list using packages (e.g. CodelistGenerator) generate cohort drug use use generateDrugUtilisationCohortSet:","code":"conceptList <- readConceptList(here::here(\"Concepts\"), cdm) conceptList <- getDrugIngredientCodes(cdm, \"acetaminophen\") conceptList #>  #> ── 1 codelist ────────────────────────────────────────────────────────────────── #>  #> - acetaminophen (4 codes) cdm <- generateDrugUtilisationCohortSet(   cdm = cdm,   name = \"dus_cohort\",   conceptSet = conceptList,   limit = \"first\",   priorObservation = 365,   gapEra = 30,   priorUseWashout = 0,   imputeDuration = \"none\",    durationRange = c(0, Inf) ) #> Warning: The `durationRange` argument of `generateDrugUtilisationCohortSet()` is #> deprecated as of DrugUtilisation 0.6.2. #> This warning is displayed once every 8 hours. #> Call `lifecycle::last_lifecycle_warnings()` to see where this warning was #> generated. #> Warning: The `imputeDuration` argument of `generateDrugUtilisationCohortSet()` is #> deprecated as of DrugUtilisation 0.6.2. #> This warning is displayed once every 8 hours. #> Call `lifecycle::last_lifecycle_warnings()` to see where this warning was #> generated. #> Warning: The `priorObservation` argument of `generateDrugUtilisationCohortSet()` is #> deprecated as of DrugUtilisation 0.6.2. #> This warning is displayed once every 8 hours. #> Call `lifecycle::last_lifecycle_warnings()` to see where this warning was #> generated. #> Warning: The `limit` argument of `generateDrugUtilisationCohortSet()` is deprecated as #> of DrugUtilisation 0.6.2. #> This warning is displayed once every 8 hours. #> Call `lifecycle::last_lifecycle_warnings()` to see where this warning was #> generated."},{"path":"https://darwin-eu-dev.github.io/DrugUtilisation/index.html","id":"cohort-attributes","dir":"","previous_headings":"Example > Create a cohort of drug use","what":"Cohort attributes","title":"Summarise Patient-Level Drug Utilisation in Data Mapped to the OMOP Common Data Model","text":"generated cohort GeneratedCohortSet seen CDMConnector Cohort set: Cohort count: Cohort attrition:","code":"class(cdm[[\"dus_cohort\"]]) #> [1] \"cohort_table\"          \"GeneratedCohortSet\"    \"cdm_table\"             #> [4] \"tbl_duckdb_connection\" \"tbl_dbi\"               \"tbl_sql\"               #> [7] \"tbl_lazy\"              \"tbl\" library(CDMConnector) library(dplyr) #>  #> Attaching package: 'dplyr' #> The following objects are masked from 'package:stats': #>  #>     filter, lag #> The following objects are masked from 'package:base': #>  #>     intersect, setdiff, setequal, union settings(cdm[[\"dus_cohort\"]]) |> glimpse() #> Rows: 1 #> Columns: 11 #> $ cohort_definition_id    <int> 1 #> $ cohort_name             <chr> \"acetaminophen\" #> $ duration_range_min      <chr> \"1\" #> $ duration_range_max      <chr> \"Inf\" #> $ impute_duration         <chr> \"none\" #> $ gap_era                 <chr> \"30\" #> $ prior_use_washout       <chr> \"0\" #> $ prior_observation       <chr> \"0\" #> $ cohort_date_range_start <chr> NA #> $ cohort_date_range_end   <chr> NA #> $ limit                   <chr> \"all\" cohortCount(cdm[[\"dus_cohort\"]]) #> # A tibble: 1 × 3 #>   cohort_definition_id number_records number_subjects #>                  <int>          <int>           <int> #> 1                    1             70              62 attrition(cdm[[\"dus_cohort\"]]) |> glimpse() #> Rows: 2 #> Columns: 7 #> $ cohort_definition_id <int> 1, 1 #> $ number_records       <int> 71, 70 #> $ number_subjects      <int> 62, 62 #> $ reason_id            <int> 1, 2 #> $ reason               <chr> \"Initial qualifying events\", \"join exposures sepa… #> $ excluded_records     <int> 0, 1 #> $ excluded_subjects    <int> 0, 0"},{"path":"https://darwin-eu-dev.github.io/DrugUtilisation/index.html","id":"indication","dir":"","previous_headings":"Example","what":"Indication","title":"Summarise Patient-Level Drug Utilisation in Data Mapped to the OMOP Common Data Model","text":"Indications always cohorts. option package create concept based cohorts using generateConceptCohortSet. can add indication using function addIndication. add new column indication gap indication. can combine indications single column using indicationToStrata() function. column can used stratification results needed:","code":"indications <- list(headache = 378253, influenza = 4266367) cdm <- generateConceptCohortSet(cdm, indications, \"indications_cohort\") cohortCount(cdm[[\"indications_cohort\"]]) #> # A tibble: 2 × 3 #>   cohort_definition_id number_records number_subjects #>                  <int>          <int>           <int> #> 1                    1             52              52 #> 2                    2             46              46 x <- cdm[[\"dus_cohort\"]] |>   addIndication(     indicationCohortName = \"indications_cohort\", indicationGap = c(0, 30, 365),      unknownIndicationTable = c(\"condition_occurrence\")   ) glimpse(x) #> Rows: ?? #> Columns: 16 #> Database: DuckDB v1.0.0 [nuriamb@Windows 10 x64:R 4.2.3/:memory:] #> $ cohort_definition_id         <int> 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1,… #> $ subject_id                   <int> 88, 79, 9, 98, 48, 57, 77, 40, 63, 47, 35… #> $ cohort_start_date            <date> 2015-08-19, 2020-05-02, 2016-03-17, 2020… #> $ cohort_end_date              <date> 2016-05-09, 2022-02-21, 2016-09-02, 2020… #> $ indication_gap_0_headache    <dbl> 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,… #> $ indication_gap_0_influenza   <dbl> 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,… #> $ indication_gap_0_none        <dbl> 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1,… #> $ indication_gap_0_unknown     <dbl> 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,… #> $ indication_gap_30_influenza  <dbl> 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,… #> $ indication_gap_30_headache   <dbl> 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,… #> $ indication_gap_30_none       <dbl> 1, 1, 1, 0, 1, 1, 0, 1, 1, 1, 1, 1, 1, 1,… #> $ indication_gap_30_unknown    <dbl> 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0,… #> $ indication_gap_365_influenza <dbl> 1, 0, 0, 1, 0, 1, 0, 0, 0, 0, 0, 1, 0, 0,… #> $ indication_gap_365_headache  <dbl> 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1,… #> $ indication_gap_365_none      <dbl> 0, 1, 1, 0, 1, 0, 0, 1, 0, 1, 1, 0, 1, 0,… #> $ indication_gap_365_unknown   <dbl> 0, 0, 0, 0, 0, 0, 1, 0, 1, 0, 0, 0, 0, 0,… x <- x |> indicationToStrata(keep = TRUE) glimpse(x) #> Rows: ?? #> Columns: 19 #> Database: DuckDB v1.0.0 [nuriamb@Windows 10 x64:R 4.2.3/:memory:] #> $ cohort_definition_id         <int> 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1,… #> $ subject_id                   <int> 88, 79, 9, 98, 48, 57, 77, 40, 63, 47, 35… #> $ cohort_start_date            <date> 2015-08-19, 2020-05-02, 2016-03-17, 2020… #> $ cohort_end_date              <date> 2016-05-09, 2022-02-21, 2016-09-02, 2020… #> $ indication_gap_0_headache    <dbl> 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,… #> $ indication_gap_0_influenza   <dbl> 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,… #> $ indication_gap_0_none        <dbl> 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1,… #> $ indication_gap_0_unknown     <dbl> 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,… #> $ indication_gap_30_influenza  <dbl> 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,… #> $ indication_gap_30_headache   <dbl> 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,… #> $ indication_gap_30_none       <dbl> 1, 1, 1, 0, 1, 1, 0, 1, 1, 1, 1, 1, 1, 1,… #> $ indication_gap_30_unknown    <dbl> 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0,… #> $ indication_gap_365_influenza <dbl> 1, 0, 0, 1, 0, 1, 0, 0, 0, 0, 0, 1, 0, 0,… #> $ indication_gap_365_headache  <dbl> 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1,… #> $ indication_gap_365_none      <dbl> 0, 1, 1, 0, 1, 0, 0, 1, 0, 1, 1, 0, 1, 0,… #> $ indication_gap_365_unknown   <dbl> 0, 0, 0, 0, 0, 0, 1, 0, 1, 0, 0, 0, 0, 0,… #> $ indication_gap_0             <chr> \"None\", \"None\", \"None\", \"None\", \"None\", \"… #> $ indication_gap_30            <chr> \"None\", \"None\", \"None\", \"Influenza\", \"Non… #> $ indication_gap_365           <chr> \"Influenza\", \"None\", \"None\", \"Influenza a… table(x |> pull(\"indication_gap_365\")) #>  #>               Headache              Influenza Influenza and Headache  #>                      5                      5                      2  #>                   None                Unknown  #>                     48                     10"},{"path":"https://darwin-eu-dev.github.io/DrugUtilisation/index.html","id":"summarise-the-indication","dir":"","previous_headings":"Example","what":"Summarise the indication","title":"Summarise Patient-Level Drug Utilisation in Data Mapped to the OMOP Common Data Model","text":"can summarise indication results using summariseIndication function:","code":"summariseIndication(x, cdm) #> Warning: The `cdm` argument of `summariseIndication()` is deprecated as of #> DrugUtilisation 0.5.0. #> This warning is displayed once every 8 hours. #> Call `lifecycle::last_lifecycle_warnings()` to see where this warning was #> generated. #> ℹ The following estimates will be computed: #> • indication_gap_0_headache: count, percentage #> • indication_gap_0_influenza: count, percentage #> • indication_gap_0_none: count, percentage #> • indication_gap_0_unknown: count, percentage #> • indication_gap_30_influenza: count, percentage #> • indication_gap_30_headache: count, percentage #> • indication_gap_30_none: count, percentage #> • indication_gap_30_unknown: count, percentage #> • indication_gap_365_influenza: count, percentage #> • indication_gap_365_headache: count, percentage #> • indication_gap_365_none: count, percentage #> • indication_gap_365_unknown: count, percentage #> • indication_gap_0: count, percentage #> • indication_gap_30: count, percentage #> • indication_gap_365: count, percentage #> → Start summary of data, at 2024-07-02 15:12:33 #>  #> ✔ Summary finished, at 2024-07-02 15:12:33 #> # A tibble: 46 × 13 #>    result_id cdm_name group_name  group_level   strata_name strata_level #>        <int> <chr>    <chr>       <chr>         <chr>       <chr>        #>  1         1 DUS MOCK cohort_name acetaminophen overall     overall      #>  2         1 DUS MOCK cohort_name acetaminophen overall     overall      #>  3         1 DUS MOCK cohort_name acetaminophen overall     overall      #>  4         1 DUS MOCK cohort_name acetaminophen overall     overall      #>  5         1 DUS MOCK cohort_name acetaminophen overall     overall      #>  6         1 DUS MOCK cohort_name acetaminophen overall     overall      #>  7         1 DUS MOCK cohort_name acetaminophen overall     overall      #>  8         1 DUS MOCK cohort_name acetaminophen overall     overall      #>  9         1 DUS MOCK cohort_name acetaminophen overall     overall      #> 10         1 DUS MOCK cohort_name acetaminophen overall     overall      #> # ℹ 36 more rows #> # ℹ 7 more variables: variable_name <chr>, variable_level <chr>, #> #   estimate_name <chr>, estimate_type <chr>, estimate_value <chr>, #> #   additional_name <chr>, additional_level <chr> summariseIndication(x, cdm) |> glimpse() #> ℹ The following estimates will be computed: #> • indication_gap_0_headache: count, percentage #> • indication_gap_0_influenza: count, percentage #> • indication_gap_0_none: count, percentage #> • indication_gap_0_unknown: count, percentage #> • indication_gap_30_influenza: count, percentage #> • indication_gap_30_headache: count, percentage #> • indication_gap_30_none: count, percentage #> • indication_gap_30_unknown: count, percentage #> • indication_gap_365_influenza: count, percentage #> • indication_gap_365_headache: count, percentage #> • indication_gap_365_none: count, percentage #> • indication_gap_365_unknown: count, percentage #> • indication_gap_0: count, percentage #> • indication_gap_30: count, percentage #> • indication_gap_365: count, percentage #> → Start summary of data, at 2024-07-02 15:12:33 #>  #> ✔ Summary finished, at 2024-07-02 15:12:34 #> Rows: 46 #> Columns: 13 #> $ result_id        <int> 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1,… #> $ cdm_name         <chr> \"DUS MOCK\", \"DUS MOCK\", \"DUS MOCK\", \"DUS MOCK\", \"DUS … #> $ group_name       <chr> \"cohort_name\", \"cohort_name\", \"cohort_name\", \"cohort_… #> $ group_level      <chr> \"acetaminophen\", \"acetaminophen\", \"acetaminophen\", \"a… #> $ strata_name      <chr> \"overall\", \"overall\", \"overall\", \"overall\", \"overall\"… #> $ strata_level     <chr> \"overall\", \"overall\", \"overall\", \"overall\", \"overall\"… #> $ variable_name    <chr> \"number records\", \"number subjects\", \"Indication on i… #> $ variable_level   <chr> NA, NA, \"Headache\", \"Headache\", \"Influenza\", \"Influen… #> $ estimate_name    <chr> \"count\", \"count\", \"count\", \"percentage\", \"count\", \"pe… #> $ estimate_type    <chr> \"integer\", \"integer\", \"integer\", \"percentage\", \"integ… #> $ estimate_value   <chr> \"70\", \"62\", \"0\", \"0\", \"0\", \"0\", \"69\", \"98.57142857142… #> $ additional_name  <chr> \"overall\", \"overall\", \"overall\", \"overall\", \"overall\"… #> $ additional_level <chr> \"overall\", \"overall\", \"overall\", \"overall\", \"overall\"…"},{"path":"https://darwin-eu-dev.github.io/DrugUtilisation/index.html","id":"add-strata","dir":"","previous_headings":"Example","what":"Add strata","title":"Summarise Patient-Level Drug Utilisation in Data Mapped to the OMOP Common Data Model","text":"summarise functions option add strata. Strata always point preexisting columns. can see example create age_group sex columns using PatientProfiles use strata","code":"x <- x |>   PatientProfiles::addAge(ageGroup = list(c(0, 19), c(20, 39), c(40, 59), c(60, 79), c(80, 150))) |>   PatientProfiles::addSex() summariseIndication(x, cdm, strata = list(\"age_group\", \"sex\", c(\"age_group\", \"sex\"))) #> ℹ The following estimates will be computed: #> • indication_gap_0_headache: count, percentage #> • indication_gap_0_influenza: count, percentage #> • indication_gap_0_none: count, percentage #> • indication_gap_0_unknown: count, percentage #> • indication_gap_30_influenza: count, percentage #> • indication_gap_30_headache: count, percentage #> • indication_gap_30_none: count, percentage #> • indication_gap_30_unknown: count, percentage #> • indication_gap_365_influenza: count, percentage #> • indication_gap_365_headache: count, percentage #> • indication_gap_365_none: count, percentage #> • indication_gap_365_unknown: count, percentage #> • indication_gap_0: count, percentage #> • indication_gap_30: count, percentage #> • indication_gap_365: count, percentage #> → Start summary of data, at 2024-07-02 15:12:35 #>  #> ✔ Summary finished, at 2024-07-02 15:12:35 #> # A tibble: 550 × 13 #>    result_id cdm_name group_name  group_level   strata_name strata_level #>        <int> <chr>    <chr>       <chr>         <chr>       <chr>        #>  1         1 DUS MOCK cohort_name acetaminophen overall     overall      #>  2         1 DUS MOCK cohort_name acetaminophen overall     overall      #>  3         1 DUS MOCK cohort_name acetaminophen overall     overall      #>  4         1 DUS MOCK cohort_name acetaminophen overall     overall      #>  5         1 DUS MOCK cohort_name acetaminophen overall     overall      #>  6         1 DUS MOCK cohort_name acetaminophen overall     overall      #>  7         1 DUS MOCK cohort_name acetaminophen overall     overall      #>  8         1 DUS MOCK cohort_name acetaminophen overall     overall      #>  9         1 DUS MOCK cohort_name acetaminophen overall     overall      #> 10         1 DUS MOCK cohort_name acetaminophen overall     overall      #> # ℹ 540 more rows #> # ℹ 7 more variables: variable_name <chr>, variable_level <chr>, #> #   estimate_name <chr>, estimate_type <chr>, estimate_value <chr>, #> #   additional_name <chr>, additional_level <chr> summariseIndication(x, cdm, strata = list(\"age_group\", \"sex\", c(\"age_group\", \"sex\"))) |> glimpse() #> ℹ The following estimates will be computed: #> • indication_gap_0_headache: count, percentage #> • indication_gap_0_influenza: count, percentage #> • indication_gap_0_none: count, percentage #> • indication_gap_0_unknown: count, percentage #> • indication_gap_30_influenza: count, percentage #> • indication_gap_30_headache: count, percentage #> • indication_gap_30_none: count, percentage #> • indication_gap_30_unknown: count, percentage #> • indication_gap_365_influenza: count, percentage #> • indication_gap_365_headache: count, percentage #> • indication_gap_365_none: count, percentage #> • indication_gap_365_unknown: count, percentage #> • indication_gap_0: count, percentage #> • indication_gap_30: count, percentage #> • indication_gap_365: count, percentage #> → Start summary of data, at 2024-07-02 15:12:36 #>  #> ✔ Summary finished, at 2024-07-02 15:12:36 #> Rows: 550 #> Columns: 13 #> $ result_id        <int> 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1,… #> $ cdm_name         <chr> \"DUS MOCK\", \"DUS MOCK\", \"DUS MOCK\", \"DUS MOCK\", \"DUS … #> $ group_name       <chr> \"cohort_name\", \"cohort_name\", \"cohort_name\", \"cohort_… #> $ group_level      <chr> \"acetaminophen\", \"acetaminophen\", \"acetaminophen\", \"a… #> $ strata_name      <chr> \"overall\", \"overall\", \"overall\", \"overall\", \"overall\"… #> $ strata_level     <chr> \"overall\", \"overall\", \"overall\", \"overall\", \"overall\"… #> $ variable_name    <chr> \"number records\", \"number subjects\", \"Indication on i… #> $ variable_level   <chr> NA, NA, \"Headache\", \"Headache\", \"Influenza\", \"Influen… #> $ estimate_name    <chr> \"count\", \"count\", \"count\", \"percentage\", \"count\", \"pe… #> $ estimate_type    <chr> \"integer\", \"integer\", \"integer\", \"percentage\", \"integ… #> $ estimate_value   <chr> \"70\", \"62\", \"0\", \"0\", \"0\", \"0\", \"69\", \"98.57142857142… #> $ additional_name  <chr> \"overall\", \"overall\", \"overall\", \"overall\", \"overall\"… #> $ additional_level <chr> \"overall\", \"overall\", \"overall\", \"overall\", \"overall\"…"},{"path":"https://darwin-eu-dev.github.io/DrugUtilisation/index.html","id":"daily-dose","dir":"","previous_headings":"Example","what":"Daily dose","title":"Summarise Patient-Level Drug Utilisation in Data Mapped to the OMOP Common Data Model","text":"can compute daily dose certain ingredient subset drug_exposure whole drug exposure (can computationally expensive).","code":"cdm[[\"drug_exposure\"]] |>  addDailyDose(ingredientConceptId = 1125315) |>  glimpse() #> Rows: ?? #> Columns: 9 #> Database: DuckDB v1.0.0 [nuriamb@Windows 10 x64:R 4.2.3/:memory:] #> $ drug_exposure_id         <int> 8, 12, 17, 23, 24, 27, 34, 35, 40, 49, 50, 59… #> $ person_id                <int> 3, 4, 7, 8, 9, 9, 12, 13, 14, 19, 19, 23, 25,… #> $ drug_concept_id          <dbl> 43135274, 1125360, 1125360, 2905077, 1125360,… #> $ drug_exposure_start_date <date> 1996-09-13, 2004-12-26, 1969-09-09, 2019-09-… #> $ drug_exposure_end_date   <date> 2008-07-15, 2006-04-15, 1970-02-14, 2020-12-… #> $ drug_type_concept_id     <dbl> 38000177, 38000177, 38000177, 38000177, 38000… #> $ quantity                 <dbl> 50, 100, 80, 10, 25, 35, 10, 90, 45, 80, 40, … #> $ daily_dose               <dbl> 4.625347, 105.042017, 251.572327, 202.105263,… #> $ unit                     <chr> \"milligram\", \"milligram\", \"milligram\", \"milli…"},{"path":"https://darwin-eu-dev.github.io/DrugUtilisation/index.html","id":"coverage","dir":"","previous_headings":"Example > Daily dose","what":"Coverage","title":"Summarise Patient-Level Drug Utilisation in Data Mapped to the OMOP Common Data Model","text":"Currently can evaluate coverage daily dose conceptList overall using summariseDoseCoverage. restrict certain ingredient.","code":"summariseDoseCoverage(cdm = cdm, ingredient = 1125315)  #> ℹ The following estimates will be computed: #> • daily_dose: count_missing, percentage_missing, mean, sd, min, q05, q25, #>   median, q75, q95, max #> ! Table is collected to memory as not all requested estimates are supported on #>   the database side #> → Start summary of data, at 2024-07-02 15:12:38 #>  #> ✔ Summary finished, at 2024-07-02 15:12:39 #> # A tibble: 84 × 13 #>    result_id cdm_name group_name      group_level   strata_name strata_level #>        <int> <chr>    <chr>           <chr>         <chr>       <chr>        #>  1         1 DUS MOCK ingredient_name acetaminophen overall     overall      #>  2         1 DUS MOCK ingredient_name acetaminophen overall     overall      #>  3         1 DUS MOCK ingredient_name acetaminophen overall     overall      #>  4         1 DUS MOCK ingredient_name acetaminophen overall     overall      #>  5         1 DUS MOCK ingredient_name acetaminophen overall     overall      #>  6         1 DUS MOCK ingredient_name acetaminophen overall     overall      #>  7         1 DUS MOCK ingredient_name acetaminophen overall     overall      #>  8         1 DUS MOCK ingredient_name acetaminophen overall     overall      #>  9         1 DUS MOCK ingredient_name acetaminophen overall     overall      #> 10         1 DUS MOCK ingredient_name acetaminophen overall     overall      #> # ℹ 74 more rows #> # ℹ 7 more variables: variable_name <chr>, variable_level <chr>, #> #   estimate_name <chr>, estimate_type <chr>, estimate_value <chr>, #> #   additional_name <chr>, additional_level <chr>"},{"path":"https://darwin-eu-dev.github.io/DrugUtilisation/index.html","id":"druguse","dir":"","previous_headings":"Example","what":"DrugUse","title":"Summarise Patient-Level Drug Utilisation in Data Mapped to the OMOP Common Data Model","text":"can add columns related drug use using addDrugUse. always provide reference ingredient.","code":"x <- x |>  addDrugUse(    ingredientConceptId = 1125315,    dose = TRUE,    quantity = TRUE,    duration = TRUE  )"},{"path":"https://darwin-eu-dev.github.io/DrugUtilisation/index.html","id":"summarise-the-drug-use","dir":"","previous_headings":"Example","what":"Summarise the drug use","title":"Summarise Patient-Level Drug Utilisation in Data Mapped to the OMOP Common Data Model","text":"can summarise drug use using summariseDrugUse function","code":"summariseDrugUse(x) #> ! names of group will be ignored #> ℹ The following estimates will be computed: #> • number_exposures: min, q05, q25, median, q75, q95, max, mean, sd, #>   count_missing, percentage_missing #> • duration: min, q05, q25, median, q75, q95, max, mean, sd, count_missing, #>   percentage_missing #> • cumulative_quantity: min, q05, q25, median, q75, q95, max, mean, sd, #>   count_missing, percentage_missing #> • number_eras: min, q05, q25, median, q75, q95, max, mean, sd, count_missing, #>   percentage_missing #> • initial_quantity: min, q05, q25, median, q75, q95, max, mean, sd, #>   count_missing, percentage_missing #> • impute_daily_dose_percentage: min, q05, q25, median, q75, q95, max, mean, sd, #>   count_missing, percentage_missing #> • impute_duration_percentage: min, q05, q25, median, q75, q95, max, mean, sd, #>   count_missing, percentage_missing #> • initial_daily_dose_milligram: min, q05, q25, median, q75, q95, max, mean, sd, #>   count_missing, percentage_missing #> • cumulative_dose_milligram: min, q05, q25, median, q75, q95, max, mean, sd, #>   count_missing, percentage_missing #> ! Table is collected to memory as not all requested estimates are supported on #>   the database side #> → Start summary of data, at 2024-07-02 15:12:46 #>  #> ✔ Summary finished, at 2024-07-02 15:12:47 #> # A tibble: 101 × 13 #>    result_id cdm_name group_name  group_level   strata_name strata_level #>        <int> <chr>    <chr>       <chr>         <chr>       <chr>        #>  1         1 DUS MOCK cohort_name acetaminophen overall     overall      #>  2         1 DUS MOCK cohort_name acetaminophen overall     overall      #>  3         1 DUS MOCK cohort_name acetaminophen overall     overall      #>  4         1 DUS MOCK cohort_name acetaminophen overall     overall      #>  5         1 DUS MOCK cohort_name acetaminophen overall     overall      #>  6         1 DUS MOCK cohort_name acetaminophen overall     overall      #>  7         1 DUS MOCK cohort_name acetaminophen overall     overall      #>  8         1 DUS MOCK cohort_name acetaminophen overall     overall      #>  9         1 DUS MOCK cohort_name acetaminophen overall     overall      #> 10         1 DUS MOCK cohort_name acetaminophen overall     overall      #> # ℹ 91 more rows #> # ℹ 7 more variables: variable_name <chr>, variable_level <chr>, #> #   estimate_name <chr>, estimate_type <chr>, estimate_value <chr>, #> #   additional_name <chr>, additional_level <chr>"},{"path":"https://darwin-eu-dev.github.io/DrugUtilisation/reference/DrugUtilisation-package.html","id":null,"dir":"Reference","previous_headings":"","what":"DrugUtilisation: Summarise Patient-Level Drug Utilisation in Data Mapped to the OMOP Common Data Model — DrugUtilisation-package","title":"DrugUtilisation: Summarise Patient-Level Drug Utilisation in Data Mapped to the OMOP Common Data Model — DrugUtilisation-package","text":"Summarise patient-level drug utilisation cohorts using data mapped Observational Medical Outcomes Partnership (OMOP) common data model. New users prevalent users cohorts can generated characteristics, indication drug use summarised.","code":""},{"path":[]},{"path":"https://darwin-eu-dev.github.io/DrugUtilisation/reference/DrugUtilisation-package.html","id":"author","dir":"Reference","previous_headings":"","what":"Author","title":"DrugUtilisation: Summarise Patient-Level Drug Utilisation in Data Mapped to the OMOP Common Data Model — DrugUtilisation-package","text":"Maintainer: Martí Català marti.catalasabate@ndorms.ox.ac.uk (ORCID) Authors: Mike Du mike.du@ndorms.ox.ac.uk (ORCID) Yuchen Guo yuchen.guo@ndorms.ox.ac.uk (ORCID) Kim Lopez-Guell kim.lopez@spc.ox.ac.uk (ORCID) Nuria Mercade-Besora nuria.mercadebesora@ndorms.ox.ac.uk (ORCID) Xihang Chen xihang.chen@ndorms.ox.ac.uk (ORCID) contributors: Edward Burn edward.burn@ndorms.ox.ac.uk (ORCID) [contributor] Xintong Li xintong.li@ndorms.ox.ac.uk (ORCID) [contributor] Marta Alcalde-Herraiz marta.alcaldeherraiz@ndorms.ox.ac.uk (ORCID) [contributor]","code":""},{"path":"https://darwin-eu-dev.github.io/DrugUtilisation/reference/addCumulativeDose.html","id":null,"dir":"Reference","previous_headings":"","what":"To add a new column with the cumulative dose. To add multiple columns use addDrugUtilisation() for efficiency. — addCumulativeDose","title":"To add a new column with the cumulative dose. To add multiple columns use addDrugUtilisation() for efficiency. — addCumulativeDose","text":"add new column cumulative dose. add multiple columns use addDrugUtilisation() efficiency.","code":""},{"path":"https://darwin-eu-dev.github.io/DrugUtilisation/reference/addCumulativeDose.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"To add a new column with the cumulative dose. To add multiple columns use addDrugUtilisation() for efficiency. — addCumulativeDose","text":"","code":"addCumulativeDose(   cohort,   ingredientConceptId,   conceptSet = NULL,   indexDate = \"cohort_start_date\",   censorDate = \"cohort_end_date\",   restrictIncident = TRUE,   nameStyle = \"cumulative_dose_{concept_name}_{ingredient}\",   name = NULL )"},{"path":"https://darwin-eu-dev.github.io/DrugUtilisation/reference/addCumulativeDose.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"To add a new column with the cumulative dose. To add multiple columns use addDrugUtilisation() for efficiency. — addCumulativeDose","text":"cohort Cohort cdm. ingredientConceptId Ingredient OMOP concept interested study. compulsory input, default value provided. conceptSet List concepts included. NULL descendants ingredient concept id used. indexDate Name column indicates date start analysis. censorDate Name column indicates date stop analysis, NULL end individuals observation used. restrictIncident Whether include incident prescriptions analysis. FALSE prescriptions overlap study period included. nameStyle Character string specify nameStyle new columns. name Name new computed cohort table, NULL temporary tables created.","code":""},{"path":"https://darwin-eu-dev.github.io/DrugUtilisation/reference/addCumulativeDose.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"To add a new column with the cumulative dose. To add multiple columns use addDrugUtilisation() for efficiency. — addCumulativeDose","text":"cohort added column.","code":""},{"path":"https://darwin-eu-dev.github.io/DrugUtilisation/reference/addCumulativeDose.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"To add a new column with the cumulative dose. To add multiple columns use addDrugUtilisation() for efficiency. — addCumulativeDose","text":"","code":"# \\donttest{ library(DrugUtilisation)  cdm <- mockDrugUtilisation()  cdm$cohort1|>   addCumulativeDose(ingredientConceptId = 1125315) #> # Source:   table<og_008_1721357135> [10 x 5] #> # Database: DuckDB v1.0.0 [unknown@Linux 6.5.0-1023-azure:R 4.4.1/:memory:] #>    cohort_definition_id subject_id cohort_start_date cohort_end_date #>                   <int>      <int> <date>            <date>          #>  1                    1          1 2020-09-20        2021-03-18      #>  2                    3          2 2022-05-21        2022-06-05      #>  3                    1          7 2015-09-10        2018-05-02      #>  4                    3          8 2012-02-04        2012-02-15      #>  5                    2          3 2010-02-10        2010-07-21      #>  6                    1          4 2022-01-26        2022-04-28      #>  7                    3          5 2019-07-17        2019-12-26      #>  8                    3          6 1991-05-25        1992-04-18      #>  9                    2          9 2022-10-05        2022-11-12      #> 10                    1         10 1997-11-07        2003-08-04      #> # ℹ 1 more variable: #> #   cumulative_dose_ingredient_1125315_descendants_1125315 <dbl> # }"},{"path":"https://darwin-eu-dev.github.io/DrugUtilisation/reference/addCumulativeQuantity.html","id":null,"dir":"Reference","previous_headings":"","what":"To add a new column with the cumulative quantity. To add multiple columns use addDrugUtilisation() for efficiency. — addCumulativeQuantity","title":"To add a new column with the cumulative quantity. To add multiple columns use addDrugUtilisation() for efficiency. — addCumulativeQuantity","text":"add new column cumulative quantity. add multiple columns use addDrugUtilisation() efficiency.","code":""},{"path":"https://darwin-eu-dev.github.io/DrugUtilisation/reference/addCumulativeQuantity.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"To add a new column with the cumulative quantity. To add multiple columns use addDrugUtilisation() for efficiency. — addCumulativeQuantity","text":"","code":"addCumulativeQuantity(   cohort,   conceptSet,   indexDate = \"cohort_start_date\",   censorDate = \"cohort_end_date\",   restrictIncident = TRUE,   nameStyle = \"cumulative_quantity_{concept_name}\",   name = NULL )"},{"path":"https://darwin-eu-dev.github.io/DrugUtilisation/reference/addCumulativeQuantity.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"To add a new column with the cumulative quantity. To add multiple columns use addDrugUtilisation() for efficiency. — addCumulativeQuantity","text":"cohort Cohort cdm. conceptSet List concepts included. indexDate Name column indicates date start analysis. censorDate Name column indicates date stop analysis, NULL end individuals observation used. restrictIncident Whether include incident prescriptions analysis. FALSE prescriptions overlap study period included. nameStyle Character string specify nameStyle new columns. name Name new computed cohort table, NULL temporary tables created.","code":""},{"path":"https://darwin-eu-dev.github.io/DrugUtilisation/reference/addCumulativeQuantity.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"To add a new column with the cumulative quantity. To add multiple columns use addDrugUtilisation() for efficiency. — addCumulativeQuantity","text":"cohort added column.","code":""},{"path":"https://darwin-eu-dev.github.io/DrugUtilisation/reference/addCumulativeQuantity.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"To add a new column with the cumulative quantity. To add multiple columns use addDrugUtilisation() for efficiency. — addCumulativeQuantity","text":"","code":"# \\donttest{ library(DrugUtilisation)  cdm <- mockDrugUtilisation() codelist <- getDrugIngredientCodes(cdm, name = \"acetaminophen\") cdm <- generateDrugUtilisationCohortSet(   cdm = cdm, name = \"dus_cohort\", conceptSet = codelist )  cdm$dus_cohort |>   addCumulativeQuantity(conceptSet = codelist) #> # Source:   table<og_015_1721357151> [?? x 5] #> # Database: DuckDB v1.0.0 [unknown@Linux 6.5.0-1023-azure:R 4.4.1/:memory:] #>    cohort_definition_id subject_id cohort_start_date cohort_end_date #>                   <int>      <int> <date>            <date>          #>  1                    1          1 2021-02-25        2021-03-11      #>  2                    1          2 2022-05-24        2022-06-02      #>  3                    1          9 2022-09-11        2022-11-09      #>  4                    1          5 2014-07-28        2019-11-20      #>  5                    1          7 2016-02-01        2017-10-04      #>  6                    1          8 2012-02-15        2012-02-17      #>  7                    1          3 2009-04-18        2009-11-07      #>  8                    1          6 1991-01-28        1991-09-17      #>  9                    1          7 2018-05-21        2018-07-20      #> 10                    1          4 2021-05-05        2021-12-15      #> # ℹ more rows #> # ℹ 1 more variable: cumulative_quantity_161_acetaminophen <dbl> # }"},{"path":"https://darwin-eu-dev.github.io/DrugUtilisation/reference/addDailyDose.html","id":null,"dir":"Reference","previous_headings":"","what":"add daily dose information to a drug_exposure table — addDailyDose","title":"add daily dose information to a drug_exposure table — addDailyDose","text":"add daily dose information drug_exposure table","code":""},{"path":"https://darwin-eu-dev.github.io/DrugUtilisation/reference/addDailyDose.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"add daily dose information to a drug_exposure table — addDailyDose","text":"","code":"addDailyDose(   drugExposure,   cdm = attr(drugExposure, \"cdm_reference\"),   ingredientConceptId,   name = NULL )"},{"path":"https://darwin-eu-dev.github.io/DrugUtilisation/reference/addDailyDose.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"add daily dose information to a drug_exposure table — addDailyDose","text":"drugExposure drugExposure must contain drug_concept_id, quantity, drug_exposure_start_date drug_exposure_end_date columns cdm cdm reference ingredientConceptId ingredientConceptId filter drugs interest name Name computed table, NULL temporary table generated.","code":""},{"path":"https://darwin-eu-dev.github.io/DrugUtilisation/reference/addDailyDose.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"add daily dose information to a drug_exposure table — addDailyDose","text":"input table","code":""},{"path":"https://darwin-eu-dev.github.io/DrugUtilisation/reference/addDailyDose.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"add daily dose information to a drug_exposure table — addDailyDose","text":"","code":"# \\donttest{ library(DrugUtilisation) library(dplyr) #>  #> Attaching package: ‘dplyr’ #> The following objects are masked from ‘package:stats’: #>  #>     filter, lag #> The following objects are masked from ‘package:base’: #>  #>     intersect, setdiff, setequal, union  cdm <- mockDrugUtilisation()  cdm[[\"drug_exposure\"]] |>   filter(drug_concept_id == 2905077) |>   addDailyDose(ingredientConceptId = 1125315) #> # Source:   table<og_018_1721357158> [3 x 9] #> # Database: DuckDB v1.0.0 [unknown@Linux 6.5.0-1023-azure:R 4.4.1/:memory:] #>   drug_exposure_id person_id drug_concept_id drug_exposure_start_date #>              <int>     <int>           <dbl> <date>                   #> 1                3         2         2905077 2022-06-06               #> 2               22         7         2905077 2016-07-08               #> 3               26         8         2905077 2012-02-15               #> # ℹ 5 more variables: drug_exposure_end_date <date>, #> #   drug_type_concept_id <dbl>, quantity <dbl>, daily_dose <dbl>, unit <chr> # }"},{"path":[]},{"path":"https://darwin-eu-dev.github.io/DrugUtilisation/reference/addDrugUse.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Add new columns with drug use related information — addDrugUse","text":"","code":"addDrugUse(   cohort,   cdm = lifecycle::deprecated(),   ingredientConceptId,   conceptSet = NULL,   duration = TRUE,   quantity = TRUE,   dose = TRUE,   gapEra = 0,   eraJoinMode = \"zero\",   overlapMode = \"sum\",   sameIndexMode = \"sum\",   imputeDuration = \"none\",   imputeDailyDose = \"none\",   durationRange = c(1, Inf),   dailyDoseRange = c(0, Inf) )"},{"path":"https://darwin-eu-dev.github.io/DrugUtilisation/reference/addDrugUse.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Add new columns with drug use related information — addDrugUse","text":"cohort Cohort cdm cdm deprecated ingredientConceptId Ingredient OMOP concept interested study. compulsory input, default value provided. conceptSet List concepts included. NULL descendants ingredient concept id used. duration Whether add duration related columns. quantity Whether add quantity related columns. dose Whether add dose related columns. gapEra Number days two continuous exposures considered era. eraJoinMode two different continuous exposures joined era. four options: \"zero\" exposures joined considering period continuous exposures subject treated daily dose zero. time exposures contributes total exposed time. \"join\" exposures joined considering period continuous exposures subject treated daily dose zero. time exposures contribute total exposed time. \"previous\" exposures joined considering period continuous exposures subject treated daily dose previous subexposure. time exposures contributes total exposed time. \"subsequent\" exposures joined considering period continuous exposures subject treated daily dose subsequent subexposure. time exposures contributes total exposed time. overlapMode overlapping two exposures start day solved inside subexposure. five possible options: \"previous\" considered daily_dose one earliest exposure. \"subsequent\" considered daily_dose one new exposure starts subexposure. \"minimum\" considered daily_dose minimum exposures subexposure. \"maximum\" considered daily_dose maximum exposures subexposure. \"sum\" considered daily_dose sum exposures present subexposure. sameIndexMode overlapping two exposures start day solved inside subexposure. three possible options: \"minimum\" considered daily_dose minimum exposures subexposure. \"maximum\" considered daily_dose maximum exposures subexposure. \"sum\" considered daily_dose sum exposures present subexposure. imputeDuration Whether/duration imputed \"none\", \"median\", \"mean\", \"mode\" number imputeDailyDose Whether/daily_dose imputed \"none\", \"median\", \"mean\", \"mode\" number durationRange Range duration must comprised. numeric vector length two, NAs first value equal smaller second one. must NULL imputeDuration \"none\". NULL restrictions applied. dailyDoseRange Range daily_dose must comprised. numeric vector length two, NAs first value equal smaller second one. must NULL imputeDailyDose \"none\". NULL restrictions applied.","code":""},{"path":"https://darwin-eu-dev.github.io/DrugUtilisation/reference/addDrugUse.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Add new columns with drug use related information — addDrugUse","text":"cohort added columns.","code":""},{"path":"https://darwin-eu-dev.github.io/DrugUtilisation/reference/addDrugUse.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Add new columns with drug use related information — addDrugUse","text":"","code":"# \\donttest{ library(DrugUtilisation)  cdm <- mockDrugUtilisation() cdm <- generateDrugUtilisationCohortSet(   cdm, \"dus_cohort\", getDrugIngredientCodes(cdm, name = \"acetaminophen\") ) cdm[[\"dus_cohort\"]] |>   addDrugUse(ingredientConceptId = 1125315) #> Warning: `addDrugUse()` was deprecated in DrugUtilisation 0.7.0. #> ℹ Please use `addDrugUtilisation()` instead. #> # Source:   table<og_026_1721357178> [?? x 13] #> # Database: DuckDB v1.0.0 [unknown@Linux 6.5.0-1023-azure:R 4.4.1/:memory:] #>    cohort_definition_id subject_id cohort_start_date cohort_end_date duration #>                   <int>      <int> <date>            <date>             <dbl> #>  1                    1          9 2022-09-11        2022-11-09            60 #>  2                    1          1 2021-02-25        2021-03-11            15 #>  3                    1          2 2022-05-24        2022-06-02            10 #>  4                    1          7 2016-02-01        2017-10-04           612 #>  5                    1          8 2012-02-15        2012-02-17             3 #>  6                    1          5 2014-07-28        2019-11-20          1942 #>  7                    1          2 2022-06-06        2022-06-07             2 #>  8                    1          4 2021-05-05        2021-12-15           225 #>  9                    1          7 2018-05-21        2018-07-20            61 #> 10                    1          3 2009-04-18        2009-11-07           204 #> # ℹ more rows #> # ℹ 8 more variables: number_exposures <dbl>, cumulative_quantity <dbl>, #> #   initial_quantity <dbl>, impute_duration_percentage <dbl>, #> #   number_eras <dbl>, impute_daily_dose_percentage <dbl>, #> #   initial_daily_dose_milligram <dbl>, cumulative_dose_milligram <dbl> # }"},{"path":"https://darwin-eu-dev.github.io/DrugUtilisation/reference/addDrugUtilisation.html","id":null,"dir":"Reference","previous_headings":"","what":"Add new columns with drug use related information — addDrugUtilisation","title":"Add new columns with drug use related information — addDrugUtilisation","text":"Add new columns drug use related information","code":""},{"path":"https://darwin-eu-dev.github.io/DrugUtilisation/reference/addDrugUtilisation.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Add new columns with drug use related information — addDrugUtilisation","text":"","code":"addDrugUtilisation(   cohort,   indexDate = \"cohort_start_date\",   censorDate = \"cohort_end_date\",   ingredientConceptId = NULL,   conceptSet = NULL,   restrictIncident = TRUE,   gapEra = 1,   numberExposures = TRUE,   numberEras = TRUE,   exposedTime = TRUE,   timeToExposure = TRUE,   initialQuantity = TRUE,   cumulativeQuantity = TRUE,   initialDailyDose = TRUE,   cumulativeDose = TRUE,   nameStyle = \"{value}_{concept_name}_{ingredient}\",   name = NULL )"},{"path":"https://darwin-eu-dev.github.io/DrugUtilisation/reference/addDrugUtilisation.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Add new columns with drug use related information — addDrugUtilisation","text":"cohort Cohort cdm indexDate Name column indicates date start analysis. censorDate Name column indicates date stop analysis, NULL end individuals observation used. ingredientConceptId Ingredient OMOP concept interested study. compulsory input, default value provided. conceptSet List concepts included. NULL descendants ingredient concept id used. restrictIncident Whether include incident prescriptions analysis. FALSE prescriptions overlap study period included. gapEra Number days two continuous exposures considered era. numberExposures Whether add column number exposures. numberEras Whether add column number eras. exposedTime Whether add column number exposed days. timeToExposure Whether add column number days indexDate start first exposure. initialQuantity Whether add column initial quantity. cumulativeQuantity Whether add column cumulative quantity identified prescription. initialDailyDose Whether add column initial daily dose. cumulativeDose Whether add column cumulative dose. nameStyle Character string specify nameStyle new columns. name Name new computed cohort table, NULL temporary tables created.","code":""},{"path":"https://darwin-eu-dev.github.io/DrugUtilisation/reference/addDrugUtilisation.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Add new columns with drug use related information — addDrugUtilisation","text":"cohort added columns.","code":""},{"path":"https://darwin-eu-dev.github.io/DrugUtilisation/reference/addDrugUtilisation.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Add new columns with drug use related information — addDrugUtilisation","text":"","code":"# \\donttest{ library(DrugUtilisation)  cdm <- mockDrugUtilisation() cdm <- generateDrugUtilisationCohortSet(   cdm, \"dus_cohort\", getDrugIngredientCodes(cdm, name = \"acetaminophen\") ) cdm[[\"dus_cohort\"]] |>   addDrugUtilisation(ingredientConceptId = 1125315) #> # Source:   table<og_041_1721357199> [?? x 12] #> # Database: DuckDB v1.0.0 [unknown@Linux 6.5.0-1023-azure:R 4.4.1/:memory:] #>    cohort_definition_id subject_id cohort_start_date cohort_end_date #>                   <int>      <int> <date>            <date>          #>  1                    1          5 2014-07-28        2019-11-20      #>  2                    1          8 2012-02-15        2012-02-17      #>  3                    1          7 2016-02-01        2017-10-04      #>  4                    1          1 2021-02-25        2021-03-11      #>  5                    1          9 2022-09-11        2022-11-09      #>  6                    1          2 2022-05-24        2022-06-02      #>  7                    1          2 2022-06-06        2022-06-07      #>  8                    1          4 2021-05-05        2021-12-15      #>  9                    1          7 2018-05-21        2018-07-20      #> 10                    1          6 1991-01-28        1991-09-17      #> # ℹ more rows #> # ℹ 8 more variables: number_exposures_ingredient_1125315_descendants <int>, #> #   time_to_exposure_ingredient_1125315_descendants <int>, #> #   cumulative_quantity_ingredient_1125315_descendants <dbl>, #> #   initial_quantity_ingredient_1125315_descendants <dbl>, #> #   number_eras_ingredient_1125315_descendants <int>, #> #   exposed_time_ingredient_1125315_descendants <int>, … # }"},{"path":"https://darwin-eu-dev.github.io/DrugUtilisation/reference/addExposedTime.html","id":null,"dir":"Reference","previous_headings":"","what":"To add a new column with the exposed time. To add multiple columns use addDrugUtilisation() for efficiency. — addExposedTime","title":"To add a new column with the exposed time. To add multiple columns use addDrugUtilisation() for efficiency. — addExposedTime","text":"add new column exposed time. add multiple columns use addDrugUtilisation() efficiency.","code":""},{"path":"https://darwin-eu-dev.github.io/DrugUtilisation/reference/addExposedTime.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"To add a new column with the exposed time. To add multiple columns use addDrugUtilisation() for efficiency. — addExposedTime","text":"","code":"addExposedTime(   cohort,   conceptSet,   indexDate = \"cohort_start_date\",   censorDate = \"cohort_end_date\",   restrictIncident = TRUE,   gapEra = 1,   nameStyle = \"exposed_time_{concept_name}\",   name = NULL )"},{"path":"https://darwin-eu-dev.github.io/DrugUtilisation/reference/addExposedTime.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"To add a new column with the exposed time. To add multiple columns use addDrugUtilisation() for efficiency. — addExposedTime","text":"cohort Cohort cdm. conceptSet List concepts included. indexDate Name column indicates date start analysis. censorDate Name column indicates date stop analysis, NULL end individuals observation used. restrictIncident Whether include incident prescriptions analysis. FALSE prescriptions overlap study period included. gapEra Number days two continuous exposures considered era. nameStyle Character string specify nameStyle new columns. name Name new computed cohort table, NULL temporary tables created.","code":""},{"path":"https://darwin-eu-dev.github.io/DrugUtilisation/reference/addExposedTime.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"To add a new column with the exposed time. To add multiple columns use addDrugUtilisation() for efficiency. — addExposedTime","text":"cohort added column.","code":""},{"path":"https://darwin-eu-dev.github.io/DrugUtilisation/reference/addExposedTime.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"To add a new column with the exposed time. To add multiple columns use addDrugUtilisation() for efficiency. — addExposedTime","text":"","code":"# \\donttest{ library(DrugUtilisation)  cdm <- mockDrugUtilisation() codelist <- getDrugIngredientCodes(cdm, name = \"acetaminophen\") cdm <- generateDrugUtilisationCohortSet(   cdm = cdm, name = \"dus_cohort\", conceptSet = codelist )  cdm$dus_cohort |>   addExposedTime(conceptSet = codelist) #> # Source:   table<og_048_1721357216> [?? x 5] #> # Database: DuckDB v1.0.0 [unknown@Linux 6.5.0-1023-azure:R 4.4.1/:memory:] #>    cohort_definition_id subject_id cohort_start_date cohort_end_date #>                   <int>      <int> <date>            <date>          #>  1                    1          4 2021-05-05        2021-12-15      #>  2                    1          2 2022-06-06        2022-06-07      #>  3                    1          5 2014-07-28        2019-11-20      #>  4                    1          8 2012-02-15        2012-02-17      #>  5                    1          7 2016-02-01        2017-10-04      #>  6                    1          7 2018-05-21        2018-07-20      #>  7                    1          3 2009-04-18        2009-11-07      #>  8                    1          6 1991-01-28        1991-09-17      #>  9                    1          1 2021-02-25        2021-03-11      #> 10                    1          9 2022-09-11        2022-11-09      #> # ℹ more rows #> # ℹ 1 more variable: exposed_time_161_acetaminophen <int> # }"},{"path":"https://darwin-eu-dev.github.io/DrugUtilisation/reference/addIndication.html","id":null,"dir":"Reference","previous_headings":"","what":"Get indication for a target cohort — addIndication","title":"Get indication for a target cohort — addIndication","text":"Get indication target cohort","code":""},{"path":"https://darwin-eu-dev.github.io/DrugUtilisation/reference/addIndication.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Get indication for a target cohort — addIndication","text":"","code":"addIndication(   x,   indicationCohortName,   indicationCohortId = NULL,   indicationWindow = list(c(0, 0)),   unknownIndicationTable = NULL,   indexDate = \"cohort_start_date\",   name = NULL )"},{"path":"https://darwin-eu-dev.github.io/DrugUtilisation/reference/addIndication.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Get indication for a target cohort — addIndication","text":"x Table cdm indicationCohortName Name indication cohort table indicationCohortId target cohort Id add indication indicationWindow time window interests unknownIndicationTable Tables search unknown indications indexDate Date indication name name permenant table","code":""},{"path":"https://darwin-eu-dev.github.io/DrugUtilisation/reference/addIndication.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Get indication for a target cohort — addIndication","text":"cohort adding indications","code":""},{"path":"https://darwin-eu-dev.github.io/DrugUtilisation/reference/addIndication.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Get indication for a target cohort — addIndication","text":"","code":"# \\donttest{ library(DrugUtilisation) library(CDMConnector)  cdm <- mockDrugUtilisation()  indications <- list(\"headache\" = 378253, \"asthma\" = 317009) cdm <- generateConceptCohortSet(   cdm, indications, \"indication_cohorts\" )  acetaminophen <- getDrugIngredientCodes(cdm, \"acetaminophen\") cdm <- generateDrugUtilisationCohortSet(cdm, \"drug_cohort\", acetaminophen)  cdm[[\"drug_cohort\"]] |>   addIndication(\"indication_cohorts\", indicationWindow = list(c(0,0))) #> # Source:   table<og_053_1721357231> [?? x 5] #> # Database: DuckDB v1.0.0 [unknown@Linux 6.5.0-1023-azure:R 4.4.1/:memory:] #>    cohort_definition_id subject_id cohort_start_date cohort_end_date #>                   <int>      <int> <date>            <date>          #>  1                    1          1 2021-02-25        2021-03-11      #>  2                    1          6 1991-01-28        1991-09-17      #>  3                    1          3 2009-04-18        2009-11-07      #>  4                    1          2 2022-06-06        2022-06-07      #>  5                    1          7 2016-02-01        2017-10-04      #>  6                    1          5 2014-07-28        2019-11-20      #>  7                    1          2 2022-05-24        2022-06-02      #>  8                    1          7 2018-05-21        2018-07-20      #>  9                    1          9 2022-09-11        2022-11-09      #> 10                    1          4 2021-05-05        2021-12-15      #> # ℹ more rows #> # ℹ 1 more variable: indication_0_to_0 <chr> # }"},{"path":"https://darwin-eu-dev.github.io/DrugUtilisation/reference/addInitialDailyDose.html","id":null,"dir":"Reference","previous_headings":"","what":"To add a new column with the initial daily dose. To add multiple columns use addDrugUtilisation() for efficiency. — addInitialDailyDose","title":"To add a new column with the initial daily dose. To add multiple columns use addDrugUtilisation() for efficiency. — addInitialDailyDose","text":"add new column initial daily dose. add multiple columns use addDrugUtilisation() efficiency.","code":""},{"path":"https://darwin-eu-dev.github.io/DrugUtilisation/reference/addInitialDailyDose.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"To add a new column with the initial daily dose. To add multiple columns use addDrugUtilisation() for efficiency. — addInitialDailyDose","text":"","code":"addInitialDailyDose(   cohort,   ingredientConceptId,   conceptSet = NULL,   indexDate = \"cohort_start_date\",   censorDate = \"cohort_end_date\",   restrictIncident = TRUE,   nameStyle = \"initial_daily_dose_{concept_name}_{ingredient}\",   name = NULL )"},{"path":"https://darwin-eu-dev.github.io/DrugUtilisation/reference/addInitialDailyDose.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"To add a new column with the initial daily dose. To add multiple columns use addDrugUtilisation() for efficiency. — addInitialDailyDose","text":"cohort Cohort cdm. ingredientConceptId Ingredient OMOP concept interested study. compulsory input, default value provided. conceptSet List concepts included. NULL descendants ingredient concept id used. indexDate Name column indicates date start analysis. censorDate Name column indicates date stop analysis, NULL end individuals observation used. restrictIncident Whether include incident prescriptions analysis. FALSE prescriptions overlap study period included. nameStyle Character string specify nameStyle new columns. name Name new computed cohort table, NULL temporary tables created.","code":""},{"path":"https://darwin-eu-dev.github.io/DrugUtilisation/reference/addInitialDailyDose.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"To add a new column with the initial daily dose. To add multiple columns use addDrugUtilisation() for efficiency. — addInitialDailyDose","text":"cohort added column.","code":""},{"path":"https://darwin-eu-dev.github.io/DrugUtilisation/reference/addInitialDailyDose.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"To add a new column with the initial daily dose. To add multiple columns use addDrugUtilisation() for efficiency. — addInitialDailyDose","text":"","code":"# \\donttest{ library(DrugUtilisation)  cdm <- mockDrugUtilisation()  cdm$cohort1|>   addInitialDailyDose(ingredientConceptId = 1125315) #> # Source:   table<og_074_1721357247> [10 x 5] #> # Database: DuckDB v1.0.0 [unknown@Linux 6.5.0-1023-azure:R 4.4.1/:memory:] #>    cohort_definition_id subject_id cohort_start_date cohort_end_date #>                   <int>      <int> <date>            <date>          #>  1                    1          1 2020-09-20        2021-03-18      #>  2                    3          2 2022-05-21        2022-06-05      #>  3                    1          7 2015-09-10        2018-05-02      #>  4                    3          8 2012-02-04        2012-02-15      #>  5                    2          3 2010-02-10        2010-07-21      #>  6                    1          4 2022-01-26        2022-04-28      #>  7                    3          5 2019-07-17        2019-12-26      #>  8                    3          6 1991-05-25        1992-04-18      #>  9                    2          9 2022-10-05        2022-11-12      #> 10                    1         10 1997-11-07        2003-08-04      #> # ℹ 1 more variable: #> #   initial_daily_dose_ingredient_1125315_descendants_1125315 <dbl> # }"},{"path":"https://darwin-eu-dev.github.io/DrugUtilisation/reference/addInitialQuantity.html","id":null,"dir":"Reference","previous_headings":"","what":"To add a new column with the initial quantity. To add multiple columns use addDrugUtilisation() for efficiency. — addInitialQuantity","title":"To add a new column with the initial quantity. To add multiple columns use addDrugUtilisation() for efficiency. — addInitialQuantity","text":"add new column initial quantity. add multiple columns use addDrugUtilisation() efficiency.","code":""},{"path":"https://darwin-eu-dev.github.io/DrugUtilisation/reference/addInitialQuantity.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"To add a new column with the initial quantity. To add multiple columns use addDrugUtilisation() for efficiency. — addInitialQuantity","text":"","code":"addInitialQuantity(   cohort,   conceptSet,   indexDate = \"cohort_start_date\",   censorDate = \"cohort_end_date\",   restrictIncident = TRUE,   nameStyle = \"initial_quantity_{concept_name}\",   name = NULL )"},{"path":"https://darwin-eu-dev.github.io/DrugUtilisation/reference/addInitialQuantity.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"To add a new column with the initial quantity. To add multiple columns use addDrugUtilisation() for efficiency. — addInitialQuantity","text":"cohort Cohort cdm. conceptSet List concepts included. indexDate Name column indicates date start analysis. censorDate Name column indicates date stop analysis, NULL end individuals observation used. restrictIncident Whether include incident prescriptions analysis. FALSE prescriptions overlap study period included. nameStyle Character string specify nameStyle new columns. name Name new computed cohort table, NULL temporary tables created.","code":""},{"path":"https://darwin-eu-dev.github.io/DrugUtilisation/reference/addInitialQuantity.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"To add a new column with the initial quantity. To add multiple columns use addDrugUtilisation() for efficiency. — addInitialQuantity","text":"cohort added column.","code":""},{"path":"https://darwin-eu-dev.github.io/DrugUtilisation/reference/addInitialQuantity.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"To add a new column with the initial quantity. To add multiple columns use addDrugUtilisation() for efficiency. — addInitialQuantity","text":"","code":"# \\donttest{ library(DrugUtilisation)  cdm <- mockDrugUtilisation() codelist <- getDrugIngredientCodes(cdm, name = \"acetaminophen\") cdm <- generateDrugUtilisationCohortSet(   cdm = cdm, name = \"dus_cohort\", conceptSet = codelist )  cdm$dus_cohort |>   addInitialQuantity(conceptSet = codelist) #> # Source:   table<og_081_1721357263> [?? x 5] #> # Database: DuckDB v1.0.0 [unknown@Linux 6.5.0-1023-azure:R 4.4.1/:memory:] #>    cohort_definition_id subject_id cohort_start_date cohort_end_date #>                   <int>      <int> <date>            <date>          #>  1                    1          1 2021-02-25        2021-03-11      #>  2                    1          2 2022-05-24        2022-06-02      #>  3                    1          9 2022-09-11        2022-11-09      #>  4                    1          5 2014-07-28        2019-11-20      #>  5                    1          7 2016-02-01        2017-10-04      #>  6                    1          8 2012-02-15        2012-02-17      #>  7                    1          6 1991-01-28        1991-09-17      #>  8                    1          7 2018-05-21        2018-07-20      #>  9                    1          3 2009-04-18        2009-11-07      #> 10                    1          2 2022-06-06        2022-06-07      #> # ℹ more rows #> # ℹ 1 more variable: initial_quantity_161_acetaminophen <dbl> # }"},{"path":"https://darwin-eu-dev.github.io/DrugUtilisation/reference/addNumberEras.html","id":null,"dir":"Reference","previous_headings":"","what":"To add a new column with the number of eras. To add multiple columns use addDrugUtilisation() for efficiency. — addNumberEras","title":"To add a new column with the number of eras. To add multiple columns use addDrugUtilisation() for efficiency. — addNumberEras","text":"add new column number eras. add multiple columns use addDrugUtilisation() efficiency.","code":""},{"path":"https://darwin-eu-dev.github.io/DrugUtilisation/reference/addNumberEras.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"To add a new column with the number of eras. To add multiple columns use addDrugUtilisation() for efficiency. — addNumberEras","text":"","code":"addNumberEras(   cohort,   conceptSet,   indexDate = \"cohort_start_date\",   censorDate = \"cohort_end_date\",   restrictIncident = TRUE,   gapEra = 1,   nameStyle = \"number_eras_{concept_name}\",   name = NULL )"},{"path":"https://darwin-eu-dev.github.io/DrugUtilisation/reference/addNumberEras.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"To add a new column with the number of eras. To add multiple columns use addDrugUtilisation() for efficiency. — addNumberEras","text":"cohort Cohort cdm. conceptSet List concepts included. indexDate Name column indicates date start analysis. censorDate Name column indicates date stop analysis, NULL end individuals observation used. restrictIncident Whether include incident prescriptions analysis. FALSE prescriptions overlap study period included. gapEra Number days two continuous exposures considered era. nameStyle Character string specify nameStyle new columns. name Name new computed cohort table, NULL temporary tables created.","code":""},{"path":"https://darwin-eu-dev.github.io/DrugUtilisation/reference/addNumberEras.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"To add a new column with the number of eras. To add multiple columns use addDrugUtilisation() for efficiency. — addNumberEras","text":"cohort added column.","code":""},{"path":"https://darwin-eu-dev.github.io/DrugUtilisation/reference/addNumberEras.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"To add a new column with the number of eras. To add multiple columns use addDrugUtilisation() for efficiency. — addNumberEras","text":"","code":"# \\donttest{ library(DrugUtilisation)  cdm <- mockDrugUtilisation() codelist <- getDrugIngredientCodes(cdm, name = \"acetaminophen\") cdm <- generateDrugUtilisationCohortSet(   cdm = cdm, name = \"dus_cohort\", conceptSet = codelist )  cdm$dus_cohort |>   addNumberEras(conceptSet = codelist) #> # Source:   table<og_088_1721357281> [?? x 5] #> # Database: DuckDB v1.0.0 [unknown@Linux 6.5.0-1023-azure:R 4.4.1/:memory:] #>    cohort_definition_id subject_id cohort_start_date cohort_end_date #>                   <int>      <int> <date>            <date>          #>  1                    1          8 2012-02-15        2012-02-17      #>  2                    1          7 2016-02-01        2017-10-04      #>  3                    1          5 2014-07-28        2019-11-20      #>  4                    1          9 2022-09-11        2022-11-09      #>  5                    1          2 2022-05-24        2022-06-02      #>  6                    1          1 2021-02-25        2021-03-11      #>  7                    1          3 2009-04-18        2009-11-07      #>  8                    1          7 2018-05-21        2018-07-20      #>  9                    1          6 1991-01-28        1991-09-17      #> 10                    1          4 2021-05-05        2021-12-15      #> # ℹ more rows #> # ℹ 1 more variable: number_eras_161_acetaminophen <int> # }"},{"path":"https://darwin-eu-dev.github.io/DrugUtilisation/reference/addNumberExposures.html","id":null,"dir":"Reference","previous_headings":"","what":"To add a new column with the number of exposures. To add multiple columns use addDrugUtilisation() for efficiency. — addNumberExposures","title":"To add a new column with the number of exposures. To add multiple columns use addDrugUtilisation() for efficiency. — addNumberExposures","text":"add new column number exposures. add multiple columns use addDrugUtilisation() efficiency.","code":""},{"path":"https://darwin-eu-dev.github.io/DrugUtilisation/reference/addNumberExposures.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"To add a new column with the number of exposures. To add multiple columns use addDrugUtilisation() for efficiency. — addNumberExposures","text":"","code":"addNumberExposures(   cohort,   conceptSet,   indexDate = \"cohort_start_date\",   censorDate = \"cohort_end_date\",   restrictIncident = TRUE,   nameStyle = \"number_exposures_{concept_name}\",   name = NULL )"},{"path":"https://darwin-eu-dev.github.io/DrugUtilisation/reference/addNumberExposures.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"To add a new column with the number of exposures. To add multiple columns use addDrugUtilisation() for efficiency. — addNumberExposures","text":"cohort Cohort cdm conceptSet List concepts included. indexDate Name column indicates date start analysis. censorDate Name column indicates date stop analysis, NULL end individuals observation used. restrictIncident Whether include incident prescriptions analysis. FALSE prescriptions overlap study period included. nameStyle Character string specify nameStyle new columns. name Name new computed cohort table, NULL temporary tables created.","code":""},{"path":"https://darwin-eu-dev.github.io/DrugUtilisation/reference/addNumberExposures.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"To add a new column with the number of exposures. To add multiple columns use addDrugUtilisation() for efficiency. — addNumberExposures","text":"cohort added columns.","code":""},{"path":"https://darwin-eu-dev.github.io/DrugUtilisation/reference/addNumberExposures.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"To add a new column with the number of exposures. To add multiple columns use addDrugUtilisation() for efficiency. — addNumberExposures","text":"","code":"# \\donttest{ library(DrugUtilisation)  cdm <- mockDrugUtilisation() codelist <- getDrugIngredientCodes(cdm, name = \"acetaminophen\") cdm <- generateDrugUtilisationCohortSet(   cdm = cdm, name = \"dus_cohort\", conceptSet = codelist )  cdm$dus_cohort |>   addNumberExposures(conceptSet = codelist) #> # Source:   table<og_095_1721357298> [?? x 5] #> # Database: DuckDB v1.0.0 [unknown@Linux 6.5.0-1023-azure:R 4.4.1/:memory:] #>    cohort_definition_id subject_id cohort_start_date cohort_end_date #>                   <int>      <int> <date>            <date>          #>  1                    1          4 2021-05-05        2021-12-15      #>  2                    1          2 2022-06-06        2022-06-07      #>  3                    1          3 2009-04-18        2009-11-07      #>  4                    1          6 1991-01-28        1991-09-17      #>  5                    1          7 2018-05-21        2018-07-20      #>  6                    1          5 2014-07-28        2019-11-20      #>  7                    1          7 2016-02-01        2017-10-04      #>  8                    1          8 2012-02-15        2012-02-17      #>  9                    1          1 2021-02-25        2021-03-11      #> 10                    1          2 2022-05-24        2022-06-02      #> # ℹ more rows #> # ℹ 1 more variable: number_exposures_161_acetaminophen <int> # }"},{"path":"https://darwin-eu-dev.github.io/DrugUtilisation/reference/addRoute.html","id":null,"dir":"Reference","previous_headings":"","what":"add route column to a table containing drug_exposure information — addRoute","title":"add route column to a table containing drug_exposure information — addRoute","text":"add route column table containing drug_exposure information","code":""},{"path":"https://darwin-eu-dev.github.io/DrugUtilisation/reference/addRoute.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"add route column to a table containing drug_exposure information — addRoute","text":"","code":"addRoute(drugTable, cdm = attr(drugTable, \"cdm_reference\"))"},{"path":"https://darwin-eu-dev.github.io/DrugUtilisation/reference/addRoute.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"add route column to a table containing drug_exposure information — addRoute","text":"drugTable Table cdm must contain drug_concept_id cdm 'cdm' object created CDMConnector::cdm_from_con(). must must contain 'concept_relationship' table.","code":""},{"path":"https://darwin-eu-dev.github.io/DrugUtilisation/reference/addRoute.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"add route column to a table containing drug_exposure information — addRoute","text":"adds route current table","code":""},{"path":"https://darwin-eu-dev.github.io/DrugUtilisation/reference/addRoute.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"add route column to a table containing drug_exposure information — addRoute","text":"","code":"# \\donttest{ library(DrugUtilisation) library(dplyr)  cdm <- mockDrugUtilisation()  cdm[[\"drug_exposure\"]] |>   addRoute() #> # Source:   SQL [?? x 8] #> # Database: DuckDB v1.0.0 [unknown@Linux 6.5.0-1023-azure:R 4.4.1/:memory:] #>    drug_exposure_id person_id drug_concept_id drug_exposure_start_date #>               <int>     <int>           <dbl> <date>                   #>  1               30         9        43135274 2022-09-11               #>  2               26         8         2905077 2012-02-15               #>  3               34        10         1516978 2004-12-17               #>  4               33        10         1503328 1992-02-27               #>  5               32         9         1516980 2022-07-21               #>  6               21         7         1125360 2016-02-01               #>  7               36        10         1539463 2003-12-24               #>  8               17         5         1539462 2017-08-29               #>  9               23         7        43135274 2017-07-11               #> 10               22         7         2905077 2016-07-08               #> # ℹ more rows #> # ℹ 4 more variables: drug_exposure_end_date <date>, #> #   drug_type_concept_id <dbl>, quantity <dbl>, route <chr> # }"},{"path":"https://darwin-eu-dev.github.io/DrugUtilisation/reference/addTimeToExposure.html","id":null,"dir":"Reference","previous_headings":"","what":"To add a new column with the time to exposure. To add multiple columns use addDrugUtilisation() for efficiency. — addTimeToExposure","title":"To add a new column with the time to exposure. To add multiple columns use addDrugUtilisation() for efficiency. — addTimeToExposure","text":"add new column time exposure. add multiple columns use addDrugUtilisation() efficiency.","code":""},{"path":"https://darwin-eu-dev.github.io/DrugUtilisation/reference/addTimeToExposure.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"To add a new column with the time to exposure. To add multiple columns use addDrugUtilisation() for efficiency. — addTimeToExposure","text":"","code":"addTimeToExposure(   cohort,   conceptSet,   indexDate = \"cohort_start_date\",   censorDate = \"cohort_end_date\",   restrictIncident = TRUE,   nameStyle = \"time_to_exposure_{concept_name}\",   name = NULL )"},{"path":"https://darwin-eu-dev.github.io/DrugUtilisation/reference/addTimeToExposure.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"To add a new column with the time to exposure. To add multiple columns use addDrugUtilisation() for efficiency. — addTimeToExposure","text":"cohort Cohort cdm. conceptSet List concepts included. indexDate Name column indicates date start analysis. censorDate Name column indicates date stop analysis, NULL end individuals observation used. restrictIncident Whether include incident prescriptions analysis. FALSE prescriptions overlap study period included. nameStyle Character string specify nameStyle new columns. name Name new computed cohort table, NULL temporary tables created.","code":""},{"path":"https://darwin-eu-dev.github.io/DrugUtilisation/reference/addTimeToExposure.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"To add a new column with the time to exposure. To add multiple columns use addDrugUtilisation() for efficiency. — addTimeToExposure","text":"cohort added column.","code":""},{"path":"https://darwin-eu-dev.github.io/DrugUtilisation/reference/addTimeToExposure.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"To add a new column with the time to exposure. To add multiple columns use addDrugUtilisation() for efficiency. — addTimeToExposure","text":"","code":"# \\donttest{ library(DrugUtilisation)  cdm <- mockDrugUtilisation() codelist <- getDrugIngredientCodes(cdm, name = \"acetaminophen\") cdm <- generateDrugUtilisationCohortSet(   cdm = cdm, name = \"dus_cohort\", conceptSet = codelist )  cdm$dus_cohort |>   addTimeToExposure(conceptSet = codelist) #> # Source:   table<og_102_1721357320> [?? x 5] #> # Database: DuckDB v1.0.0 [unknown@Linux 6.5.0-1023-azure:R 4.4.1/:memory:] #>    cohort_definition_id subject_id cohort_start_date cohort_end_date #>                   <int>      <int> <date>            <date>          #>  1                    1          2 2022-06-06        2022-06-07      #>  2                    1          4 2021-05-05        2021-12-15      #>  3                    1          6 1991-01-28        1991-09-17      #>  4                    1          3 2009-04-18        2009-11-07      #>  5                    1          7 2018-05-21        2018-07-20      #>  6                    1          5 2014-07-28        2019-11-20      #>  7                    1          7 2016-02-01        2017-10-04      #>  8                    1          8 2012-02-15        2012-02-17      #>  9                    1          1 2021-02-25        2021-03-11      #> 10                    1          2 2022-05-24        2022-06-02      #> # ℹ more rows #> # ℹ 1 more variable: time_to_exposure_161_acetaminophen <int> # }"},{"path":"https://darwin-eu-dev.github.io/DrugUtilisation/reference/benchmarkDrugUtilisation.html","id":null,"dir":"Reference","previous_headings":"","what":"Run benchmark of drug utilisation cohort generation — benchmarkDrugUtilisation","title":"Run benchmark of drug utilisation cohort generation — benchmarkDrugUtilisation","text":"Run benchmark drug utilisation cohort generation","code":""},{"path":"https://darwin-eu-dev.github.io/DrugUtilisation/reference/benchmarkDrugUtilisation.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Run benchmark of drug utilisation cohort generation — benchmarkDrugUtilisation","text":"","code":"benchmarkDrugUtilisation(   cdm,   numberOfCohort = 1:4,   indicationCohortName = \"cohort1\",   ingredientId = 1125315,   drugExposureName = \"drug_exposure\" )"},{"path":"https://darwin-eu-dev.github.io/DrugUtilisation/reference/benchmarkDrugUtilisation.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Run benchmark of drug utilisation cohort generation — benchmarkDrugUtilisation","text":"cdm CDM reference object numberOfCohort Number cohort generate benchmarking. integer vector integers indicationCohortName Name indication cohort table ingredientId Ingredient OMOP concept interested study. compulsory input, default value provided. drugExposureName Name drug_exposure table cdm, table must contain drug_concept_id, quantity, drug_exposure_start_date drug_exposure_end_date columns","code":""},{"path":"https://darwin-eu-dev.github.io/DrugUtilisation/reference/benchmarkDrugUtilisation.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Run benchmark of drug utilisation cohort generation — benchmarkDrugUtilisation","text":"tibble time taken different analyses","code":""},{"path":"https://darwin-eu-dev.github.io/DrugUtilisation/reference/benchmarkDrugUtilisation.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Run benchmark of drug utilisation cohort generation — benchmarkDrugUtilisation","text":"","code":"# \\donttest{ library(DrugUtilisation)  cdm <- mockDrugUtilisation()  timings <- benchmarkDrugUtilisation(cdm) #> Warning: The `durationRange` argument of `generateDrugUtilisationCohortSet()` is #> deprecated as of DrugUtilisation 0.7.0. #> ℹ The deprecated feature was likely used in the DrugUtilisation package. #>   Please report the issue to the authors. #> Warning: The `imputeDuration` argument of `generateDrugUtilisationCohortSet()` is #> deprecated as of DrugUtilisation 0.7.0. #> ℹ The deprecated feature was likely used in the DrugUtilisation package. #>   Please report the issue to the authors. #> Warning: The `priorUseWashout` argument of `generateDrugUtilisationCohortSet()` is #> deprecated as of DrugUtilisation 0.7.0. #> ℹ Please use `requirePriorDrugWashout()` instead. #> ℹ The deprecated feature was likely used in the DrugUtilisation package. #>   Please report the issue to the authors. #> Warning: The `priorObservation` argument of `generateDrugUtilisationCohortSet()` is #> deprecated as of DrugUtilisation 0.7.0. #> ℹ Please use `requireObservationBeforeDrug()` instead. #> ℹ The deprecated feature was likely used in the DrugUtilisation package. #>   Please report the issue to the authors. #> Warning: The `cohortDateRange` argument of `generateDrugUtilisationCohortSet()` is #> deprecated as of DrugUtilisation 0.7.0. #> ℹ Please use `requireDrugInDateRange()` instead. #> ℹ The deprecated feature was likely used in the DrugUtilisation package. #>   Please report the issue to the authors. #> Warning: The `limit` argument of `generateDrugUtilisationCohortSet()` is deprecated as #> of DrugUtilisation 0.7.0. #> ℹ Please use `requireIsFirstDrugEntry()` instead. #> ℹ The deprecated feature was likely used in the DrugUtilisation package. #>   Please report the issue to the authors. #> Warning: The `cdm` argument of `summariseDrugUse()` is deprecated as of DrugUtilisation #> 0.5.0. #> ℹ The deprecated feature was likely used in the DrugUtilisation package. #>   Please report the issue to the authors. #> ! names of group will be ignored #> ℹ The following estimates will be computed: #> → Start summary of data, at 2024-07-19 02:49:03.081819 #> ✔ Summary finished, at 2024-07-19 02:49:03.12568 #> ! names of group will be ignored #> ℹ The following estimates will be computed: #> → Start summary of data, at 2024-07-19 02:49:19.820465 #> ✔ Summary finished, at 2024-07-19 02:49:19.855167 #> ! names of group will be ignored #> ℹ The following estimates will be computed: #> → Start summary of data, at 2024-07-19 02:49:36.653141 #> ✔ Summary finished, at 2024-07-19 02:49:36.688361 #> ! names of group will be ignored #> ℹ The following estimates will be computed: #> → Start summary of data, at 2024-07-19 02:49:53.408027 #> ✔ Summary finished, at 2024-07-19 02:49:53.44317  timings #> # A tibble: 17 × 5 #>    task                time_taken_secs time_taken_mins time_taken_hours person_n #>    <chr>                         <dbl>           <dbl>            <dbl>    <dbl> #>  1 DUS 1 cohorts                  3.08            0.05                0       10 #>  2 add indication 1 c…            4.76            0.08                0       10 #>  3 add drug use for 1…            7.94            0.13                0       10 #>  4 summarise drug use…            7.94            0.13                0       10 #>  5 DUS 2 cohorts                  3.06            0.05                0       10 #>  6 add indication 2 c…            4.78            0.08                0       10 #>  7 add drug use for 2…            8.01            0.13                0       10 #>  8 summarise drug use…            8.01            0.13                0       10 #>  9 DUS 3 cohorts                  2.99            0.05                0       10 #> 10 add indication 3 c…            4.94            0.08                0       10 #> 11 add drug use for 3…            8.02            0.13                0       10 #> 12 summarise drug use…            8.02            0.13                0       10 #> 13 DUS 4 cohorts                  2.96            0.05                0       10 #> 14 add indication 4 c…            4.95            0.08                0       10 #> 15 add drug use for 4…            7.98            0.13                0       10 #> 16 summarise drug use…            7.98            0.13                0       10 #> 17 add daily dose                 0.91            0.02                0       10 # }"},{"path":[]},{"path":"https://darwin-eu-dev.github.io/DrugUtilisation/reference/dailyDoseCoverage.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Check coverage of daily dose computation in a sample of the cdm for selected concept sets and ingredient — dailyDoseCoverage","text":"","code":"dailyDoseCoverage(cdm, ingredientConceptId)"},{"path":"https://darwin-eu-dev.github.io/DrugUtilisation/reference/dailyDoseCoverage.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Check coverage of daily dose computation in a sample of the cdm for selected concept sets and ingredient — dailyDoseCoverage","text":"cdm cdm reference created using CDMConnector ingredientConceptId Code indicating ingredient interest","code":""},{"path":"https://darwin-eu-dev.github.io/DrugUtilisation/reference/dailyDoseCoverage.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Check coverage of daily dose computation in a sample of the cdm for selected concept sets and ingredient — dailyDoseCoverage","text":"function returns information coverage computeDailyDose.R selected ingredients concept sets","code":""},{"path":"https://darwin-eu-dev.github.io/DrugUtilisation/reference/defaultTableOptions.html","id":null,"dir":"Reference","previous_headings":"","what":"Additional arguments for the table functions. — defaultTableOptions","title":"Additional arguments for the table functions. — defaultTableOptions","text":"provides list allowed inputs .option argument table functions, given default values.","code":""},{"path":"https://darwin-eu-dev.github.io/DrugUtilisation/reference/defaultTableOptions.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Additional arguments for the table functions. — defaultTableOptions","text":"","code":"defaultTableOptions()"},{"path":"https://darwin-eu-dev.github.io/DrugUtilisation/reference/defaultTableOptions.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Additional arguments for the table functions. — defaultTableOptions","text":"default .options named list.","code":""},{"path":"https://darwin-eu-dev.github.io/DrugUtilisation/reference/defaultTableOptions.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Additional arguments for the table functions. — defaultTableOptions","text":"","code":"{ defaultTableOptions() } #> $decimals #>    integer percentage    numeric proportion  #>          0          2          2          2  #>  #> $decimalMark #> [1] \".\" #>  #> $bigMark #> [1] \",\" #>  #> $keepNotFormatted #> [1] TRUE #>  #> $useFormatOrder #> [1] TRUE #>  #> $delim #> [1] \"\\n\" #>  #> $includeHeaderKey #> [1] TRUE #>  #> $style #> [1] \"default\" #>  #> $na #> [1] \"-\" #>  #> $title #> NULL #>  #> $subtitle #> NULL #>  #> $caption #> NULL #>  #> $groupAsColumn #> [1] FALSE #>  #> $groupOrder #> NULL #>  #> $colsToMergeRows #> [1] \"all_columns\" #>"},{"path":"https://darwin-eu-dev.github.io/DrugUtilisation/reference/generateAtcCohortSet.html","id":null,"dir":"Reference","previous_headings":"","what":"Generates a cohort of the drug use of ATC name(s) of interest. — generateAtcCohortSet","title":"Generates a cohort of the drug use of ATC name(s) of interest. — generateAtcCohortSet","text":"Generates cohort drug use ATC name(s) interest.","code":""},{"path":"https://darwin-eu-dev.github.io/DrugUtilisation/reference/generateAtcCohortSet.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Generates a cohort of the drug use of ATC name(s) of interest. — generateAtcCohortSet","text":"","code":"generateAtcCohortSet(   cdm,   name,   atcName = NULL,   level = c(\"ATC 1st\"),   doseForm = NULL,   gapEra = 1,   durationRange = lifecycle::deprecated(),   imputeDuration = lifecycle::deprecated(),   priorUseWashout = lifecycle::deprecated(),   priorObservation = lifecycle::deprecated(),   cohortDateRange = lifecycle::deprecated(),   limit = lifecycle::deprecated() )"},{"path":"https://darwin-eu-dev.github.io/DrugUtilisation/reference/generateAtcCohortSet.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Generates a cohort of the drug use of ATC name(s) of interest. — generateAtcCohortSet","text":"cdm cdm_reference object. name Name GeneratedCohortSet atcName Names ATC interest. level ATC level. Can one \"ATC 1st\", \"ATC 2nd\", \"ATC 3rd\", \"ATC 4th\", \"ATC 5th\" doseForm descendants codes specified dose form returned. NULL, descendant codes returned regardless dose form. gapEra Number days two continuous exposures considered era. durationRange Deprecated. imputeDuration Deprecated. priorUseWashout Deprecated priorObservation Deprecated. cohortDateRange Deprecated. limit Deprecated.","code":""},{"path":"https://darwin-eu-dev.github.io/DrugUtilisation/reference/generateAtcCohortSet.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Generates a cohort of the drug use of ATC name(s) of interest. — generateAtcCohortSet","text":"function returns 'cdm' object created cohorts references object.","code":""},{"path":"https://darwin-eu-dev.github.io/DrugUtilisation/reference/generateAtcCohortSet.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Generates a cohort of the drug use of ATC name(s) of interest. — generateAtcCohortSet","text":"","code":"# \\donttest{ library(DrugUtilisation) cdm <- mockDrugUtilisation() cdm <- generateAtcCohortSet(cdm, name =  \"test\", priorObservation = 365) #> Warning: The `priorObservation` argument of `generateAtcCohortSet()` is deprecated as of #> DrugUtilisation 0.7.0. #> ℹ Please use `requireObservationBeforeDrug()` instead. #> Warning: cohort_name must be snake case, the following cohorts will be renamed: #> • A_alimentary_tract_and_metabolism -> a_alimentary_tract_and_metabolism cdm #>  #> ── # OMOP CDM reference (duckdb) of DUS MOCK ─────────────────────────────────── #> • omop tables: person, observation_period, concept, concept_ancestor, #> drug_strength, drug_exposure, condition_occurrence, visit_occurrence, #> observation, concept_relationship #> • cohort tables: cohort1, cohort2, test #> • achilles tables: - #> • other tables: - cdm$test #> # Source:   table<main.test> [0 x 4] #> # Database: DuckDB v1.0.0 [unknown@Linux 6.5.0-1023-azure:R 4.4.1/:memory:] #> # ℹ 4 variables: cohort_definition_id <int>, subject_id <int>, #> #   cohort_start_date <date>, cohort_end_date <date> settings(cdm$test) #> # A tibble: 1 × 4 #>   cohort_definition_id cohort_name                       gap_era dose_form #>                  <int> <chr>                             <chr>   <chr>     #> 1                    1 a_alimentary_tract_and_metabolism 1       \"\"        # }"},{"path":"https://darwin-eu-dev.github.io/DrugUtilisation/reference/generateDrugUtilisationCohortSet.html","id":null,"dir":"Reference","previous_headings":"","what":"Generates a cohort of the drug use of a certain list of concepts. — generateDrugUtilisationCohortSet","title":"Generates a cohort of the drug use of a certain list of concepts. — generateDrugUtilisationCohortSet","text":"Generates cohort drug use certain list concepts.","code":""},{"path":"https://darwin-eu-dev.github.io/DrugUtilisation/reference/generateDrugUtilisationCohortSet.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Generates a cohort of the drug use of a certain list of concepts. — generateDrugUtilisationCohortSet","text":"","code":"generateDrugUtilisationCohortSet(   cdm,   name,   conceptSet,   gapEra = 1,   durationRange = lifecycle::deprecated(),   imputeDuration = lifecycle::deprecated(),   priorUseWashout = lifecycle::deprecated(),   priorObservation = lifecycle::deprecated(),   cohortDateRange = lifecycle::deprecated(),   limit = lifecycle::deprecated() )"},{"path":"https://darwin-eu-dev.github.io/DrugUtilisation/reference/generateDrugUtilisationCohortSet.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Generates a cohort of the drug use of a certain list of concepts. — generateDrugUtilisationCohortSet","text":"cdm cdm_reference object. name Name GeneratedCohortSet conceptSet Named list concept sets. gapEra Number days two continuous exposures considered era. durationRange Deprecated. imputeDuration Deprecated. priorUseWashout Deprecated. priorObservation Deprecated. cohortDateRange Deprecated. limit Deprecated.","code":""},{"path":"https://darwin-eu-dev.github.io/DrugUtilisation/reference/generateDrugUtilisationCohortSet.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Generates a cohort of the drug use of a certain list of concepts. — generateDrugUtilisationCohortSet","text":"function returns 'cdm' object created tables references object.","code":""},{"path":"https://darwin-eu-dev.github.io/DrugUtilisation/reference/generateDrugUtilisationCohortSet.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Generates a cohort of the drug use of a certain list of concepts. — generateDrugUtilisationCohortSet","text":"","code":"# \\donttest{ library(CDMConnector) library(DrugUtilisation)  cdm <- mockDrugUtilisation()  druglist <- getDrugIngredientCodes(cdm, c(\"acetaminophen\", \"metformin\"))  cdm <- generateDrugUtilisationCohortSet(   cdm = cdm,   name = \"drug_cohorts\",   conceptSet = druglist )  cdm[[\"drug_cohorts\"]] #> # Source:   SQL [?? x 4] #> # Database: DuckDB v1.0.0 [unknown@Linux 6.5.0-1023-azure:R 4.4.1/:memory:] #>    cohort_definition_id subject_id cohort_start_date cohort_end_date #>                   <int>      <int> <date>            <date>          #>  1                    1          5 2014-07-28        2019-11-20      #>  2                    2         10 1992-02-27        2004-03-07      #>  3                    2          3 2005-06-02        2008-05-08      #>  4                    1          9 2022-09-11        2022-11-09      #>  5                    1          2 2022-06-06        2022-06-07      #>  6                    1          7 2018-05-21        2018-07-20      #>  7                    2          8 2012-02-07        2012-02-19      #>  8                    1          1 2021-02-25        2021-03-11      #>  9                    1          3 2009-04-18        2009-11-07      #> 10                    1          6 1991-01-28        1991-09-17      #> # ℹ more rows  settings(cdm[[\"drug_cohorts\"]]) #> # A tibble: 2 × 3 #>   cohort_definition_id cohort_name       gap_era #>                  <int> <chr>             <chr>   #> 1                    1 161_acetaminophen 1       #> 2                    2 6809_metformin    1        cohortCount(cdm[[\"drug_cohorts\"]]) #> # A tibble: 2 × 3 #>   cohort_definition_id number_records number_subjects #>                  <int>          <int>           <int> #> 1                    1             11               9 #> 2                    2              6               5  attrition(cdm[[\"drug_cohorts\"]]) #> # A tibble: 4 × 7 #>   cohort_definition_id number_records number_subjects reason_id reason           #>                  <int>          <int>           <int>     <int> <chr>            #> 1                    1             11               9         1 Initial qualify… #> 2                    1             11               9         2 join exposures … #> 3                    2              7               5         1 Initial qualify… #> 4                    2              6               5         2 join exposures … #> # ℹ 2 more variables: excluded_records <int>, excluded_subjects <int> # }"},{"path":"https://darwin-eu-dev.github.io/DrugUtilisation/reference/generateIngredientCohortSet.html","id":null,"dir":"Reference","previous_headings":"","what":"Generates a cohort of the drug use of ingredient name(s) of interest. — generateIngredientCohortSet","title":"Generates a cohort of the drug use of ingredient name(s) of interest. — generateIngredientCohortSet","text":"Generates cohort drug use ingredient name(s) interest.","code":""},{"path":"https://darwin-eu-dev.github.io/DrugUtilisation/reference/generateIngredientCohortSet.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Generates a cohort of the drug use of ingredient name(s) of interest. — generateIngredientCohortSet","text":"","code":"generateIngredientCohortSet(   cdm,   name,   ingredient = NULL,   doseForm = NULL,   ingredientRange = c(1, Inf),   gapEra = 1,   durationRange = lifecycle::deprecated(),   imputeDuration = lifecycle::deprecated(),   priorUseWashout = lifecycle::deprecated(),   priorObservation = lifecycle::deprecated(),   cohortDateRange = lifecycle::deprecated(),   limit = lifecycle::deprecated() )"},{"path":"https://darwin-eu-dev.github.io/DrugUtilisation/reference/generateIngredientCohortSet.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Generates a cohort of the drug use of ingredient name(s) of interest. — generateIngredientCohortSet","text":"cdm cdm_reference object. name Name GeneratedCohortSet ingredient Accepts vectors named lists ingredient names. vector input, e.g., c(\"acetaminophen\", \"codeine\"), generates cohort table descendant concept codes ingredient, assigning unique cohort_definition_id. named list input, e.g., list( \"test_1\" = c(\"simvastatin\", \"acetaminophen\"), \"test_2\" = \"metformin\"), produces cohort table based structure input, name leads combined set descendant concept codes specified ingredients, creating distinct cohort_definition_id named group. doseForm descendants codes specified dose form returned. NULL, descendant codes returned regardless dose form. ingredientRange Used restrict descendant codes associated specific number ingredients. Must vector length two first element minimum number ingredients allowed second maximum. value c(2, 2) restrict concepts associated two ingredients. gapEra Number days two continuous exposures considered era. durationRange Deprecated. imputeDuration Deprecated. priorUseWashout Deprecated priorObservation Deprecated. cohortDateRange Deprecated. limit Deprecated.","code":""},{"path":"https://darwin-eu-dev.github.io/DrugUtilisation/reference/generateIngredientCohortSet.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Generates a cohort of the drug use of ingredient name(s) of interest. — generateIngredientCohortSet","text":"function returns 'cdm' object created cohorts references object.","code":""},{"path":"https://darwin-eu-dev.github.io/DrugUtilisation/reference/generateIngredientCohortSet.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Generates a cohort of the drug use of ingredient name(s) of interest. — generateIngredientCohortSet","text":"","code":"# \\donttest{ library(DrugUtilisation) cdm <- mockDrugUtilisation() cdm <- generateIngredientCohortSet(   cdm = cdm,   ingredient = \"acetaminophen\",   name = \"test\" ) cdm #>  #> ── # OMOP CDM reference (duckdb) of DUS MOCK ─────────────────────────────────── #> • omop tables: person, observation_period, concept, concept_ancestor, #> drug_strength, drug_exposure, condition_occurrence, visit_occurrence, #> observation, concept_relationship #> • cohort tables: cohort1, cohort2, test #> • achilles tables: - #> • other tables: - # }"},{"path":"https://darwin-eu-dev.github.io/DrugUtilisation/reference/mockDrugUtilisation.html","id":null,"dir":"Reference","previous_headings":"","what":"It creates a mock database for testing drugutilisation package — mockDrugUtilisation","title":"It creates a mock database for testing drugutilisation package — mockDrugUtilisation","text":"creates mock database testing drugutilisation package","code":""},{"path":"https://darwin-eu-dev.github.io/DrugUtilisation/reference/mockDrugUtilisation.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"It creates a mock database for testing drugutilisation package — mockDrugUtilisation","text":"","code":"mockDrugUtilisation(   connectionDetails = list(con = DBI::dbConnect(duckdb::duckdb(), \":memory:\"),     writeSchema = \"main\"),   numberIndividuals = 10,   seed = 1,   concept = NULL,   concept_ancestor = NULL,   drug_strength = NULL,   person = NULL,   observation_period = NULL,   drug_exposure = NULL,   condition_occurrence = NULL,   observation = NULL,   concept_relationship = NULL,   extraTables = list(),   ... )"},{"path":"https://darwin-eu-dev.github.io/DrugUtilisation/reference/mockDrugUtilisation.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"It creates a mock database for testing drugutilisation package — mockDrugUtilisation","text":"connectionDetails Details connection numberIndividuals Number individuals mock cdm seed Seed random numbers concept concept tibble, NULL mock one created concept_ancestor concept_ancestor tibble, NULL mock one created drug_strength drug_strength tibble, NULL mock one created person person tibble, NULL mock one created observation_period observation_period tibble, NULL mock one created drug_exposure drug_exposure tibble, NULL mock one created condition_occurrence condition_occurrence tibble, NULL mock one created observation observation tibble, NULL mock one created concept_relationship concept_relationship tibble, NULL mock one created. extraTables Extra tibbles instantiated cohorts cdm tables ... Cohorts can added cdm reference, cohort1 cohort2 created provided","code":""},{"path":"https://darwin-eu-dev.github.io/DrugUtilisation/reference/mockDrugUtilisation.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"It creates a mock database for testing drugutilisation package — mockDrugUtilisation","text":"cdm reference mock tables","code":""},{"path":"https://darwin-eu-dev.github.io/DrugUtilisation/reference/mockDrugUtilisation.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"It creates a mock database for testing drugutilisation package — mockDrugUtilisation","text":"","code":"# \\donttest{ library(DrugUtilisation)  cdm <- mockDrugUtilisation()  cdm #>  #> ── # OMOP CDM reference (duckdb) of DUS MOCK ─────────────────────────────────── #> • omop tables: person, observation_period, concept, concept_ancestor, #> drug_strength, drug_exposure, condition_occurrence, visit_occurrence, #> observation, concept_relationship #> • cohort tables: cohort1, cohort2 #> • achilles tables: - #> • other tables: - # }"},{"path":"https://darwin-eu-dev.github.io/DrugUtilisation/reference/patternTable.html","id":null,"dir":"Reference","previous_headings":"","what":"Function to create a tibble with the patterns from current drug strength table — patternTable","title":"Function to create a tibble with the patterns from current drug strength table — patternTable","text":"Function create tibble patterns current drug strength table","code":""},{"path":"https://darwin-eu-dev.github.io/DrugUtilisation/reference/patternTable.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Function to create a tibble with the patterns from current drug strength table — patternTable","text":"","code":"patternTable(cdm)"},{"path":"https://darwin-eu-dev.github.io/DrugUtilisation/reference/patternTable.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Function to create a tibble with the patterns from current drug strength table — patternTable","text":"cdm 'cdm' object created CDMConnector::cdm_from_con(). must must contain 'drug_strength' 'concept' tables.","code":""},{"path":"https://darwin-eu-dev.github.io/DrugUtilisation/reference/patternTable.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Function to create a tibble with the patterns from current drug strength table — patternTable","text":"function creates tibble different patterns found table, plus column potentially valid invalid combinations.","code":""},{"path":"https://darwin-eu-dev.github.io/DrugUtilisation/reference/patternTable.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Function to create a tibble with the patterns from current drug strength table — patternTable","text":"","code":"# \\donttest{ library(DrugUtilisation)  cdm <- mockDrugUtilisation()  patternTable(cdm) #> # A tibble: 5 × 12 #>   pattern_id formula_name            validity number_concepts number_ingredients #>        <dbl> <chr>                   <chr>              <dbl>              <dbl> #> 1          9 fixed amount formulati… pattern…               7                  4 #> 2         18 concentration formulat… pattern…               1                  1 #> 3         24 concentration formulat… pattern…               1                  1 #> 4         40 concentration formulat… pattern…               1                  1 #> 5         NA NA                      no patt…               4                  4 #> # ℹ 7 more variables: number_records <dbl>, amount_numeric <dbl>, #> #   amount_unit_concept_id <dbl>, numerator_numeric <dbl>, #> #   numerator_unit_concept_id <dbl>, denominator_numeric <dbl>, #> #   denominator_unit_concept_id <dbl> # }"},{"path":"https://darwin-eu-dev.github.io/DrugUtilisation/reference/patternsWithFormula.html","id":null,"dir":"Reference","previous_headings":"","what":"Patterns valid to compute daily dose with the associated formula. — patternsWithFormula","title":"Patterns valid to compute daily dose with the associated formula. — patternsWithFormula","text":"Patterns valid compute daily dose associated formula.","code":""},{"path":"https://darwin-eu-dev.github.io/DrugUtilisation/reference/patternsWithFormula.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Patterns valid to compute daily dose with the associated formula. — patternsWithFormula","text":"","code":"patternsWithFormula"},{"path":"https://darwin-eu-dev.github.io/DrugUtilisation/reference/patternsWithFormula.html","id":"format","dir":"Reference","previous_headings":"","what":"Format","title":"Patterns valid to compute daily dose with the associated formula. — patternsWithFormula","text":"data frame eight variables: pattern_id, amount, amount_unit, numerator, numerator_unit, denominator, denominator_unit, formula_name formula.","code":""},{"path":"https://darwin-eu-dev.github.io/DrugUtilisation/reference/plotDrugRestart.html","id":null,"dir":"Reference","previous_headings":"","what":"Generate a custom ggplot2 from a summarised_result object generated with summariseDrugRestart() function. — plotDrugRestart","title":"Generate a custom ggplot2 from a summarised_result object generated with summariseDrugRestart() function. — plotDrugRestart","text":"Generate custom ggplot2 summarised_result object generated summariseDrugRestart() function.","code":""},{"path":"https://darwin-eu-dev.github.io/DrugUtilisation/reference/plotDrugRestart.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Generate a custom ggplot2 from a summarised_result object generated with summariseDrugRestart() function. — plotDrugRestart","text":"","code":"plotDrugRestart(   result,   facetX = \"variable_name\",   facetY = c(\"cdm_name\", \"cohort_name\", \"strata\"),   colour = \"variable_level\",   splitStrata = TRUE )"},{"path":"https://darwin-eu-dev.github.io/DrugUtilisation/reference/plotDrugRestart.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Generate a custom ggplot2 from a summarised_result object generated with summariseDrugRestart() function. — plotDrugRestart","text":"result summarised_result object results summariseDrugRestart(). facetX Vector variables facet horizontally. Allowed options : \"cdm_name\", \"cohort_name\", \"strata\", \"variable_name\" facetY Vector variables facet vertically Allowed options : \"cdm_name\", \"cohort_name\", \"strata\", \"variable_name\". colour Vector variables distinct colour. Allowed options : \"cdm_name\", \"cohort_name\", \"strata\", \"variable_name\", \"variable_level\". splitStrata Weather split strata columns.","code":""},{"path":"https://darwin-eu-dev.github.io/DrugUtilisation/reference/plotDrugRestart.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Generate a custom ggplot2 from a summarised_result object generated with summariseDrugRestart() function. — plotDrugRestart","text":"ggplot2 object.","code":""},{"path":"https://darwin-eu-dev.github.io/DrugUtilisation/reference/plotDrugRestart.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Generate a custom ggplot2 from a summarised_result object generated with summariseDrugRestart() function. — plotDrugRestart","text":"","code":"if (FALSE) { # \\dontrun{ library(DrugUtilisation)  cdm <- mockDrugUtilisation()  conceptlist <- list(\"a\" = 1125360, \"b\" = c(1503297, 1503327)) cdm <- generateDrugUtilisationCohortSet(   cdm = cdm,   name = \"switch_cohort\",   conceptSet = conceptlist )  result <- cdm$cohort1 |>   summariseDrugRestart(switchCohortTable = \"switch_cohort\")  plotDrugRestart(result)  CDMConnector::cdmDisconnect(cdm = cdm) } # }"},{"path":"https://darwin-eu-dev.github.io/DrugUtilisation/reference/plotTreatment.html","id":null,"dir":"Reference","previous_headings":"","what":"Generate a custom ggplot2 from a summarised_result object generated with summariseTreatment function. — plotTreatment","title":"Generate a custom ggplot2 from a summarised_result object generated with summariseTreatment function. — plotTreatment","text":"Generate custom ggplot2 summarised_result object generated summariseTreatment function.","code":""},{"path":"https://darwin-eu-dev.github.io/DrugUtilisation/reference/plotTreatment.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Generate a custom ggplot2 from a summarised_result object generated with summariseTreatment function. — plotTreatment","text":"","code":"plotTreatment(   result,   facetX = \"window_name\",   facetY = c(\"cdm_name\", \"cohort_name\", \"strata\"),   splitStrata = TRUE,   colour = \"treatment\" )"},{"path":"https://darwin-eu-dev.github.io/DrugUtilisation/reference/plotTreatment.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Generate a custom ggplot2 from a summarised_result object generated with summariseTreatment function. — plotTreatment","text":"result ... facetX ... facetY ... splitStrata ... colour ...","code":""},{"path":"https://darwin-eu-dev.github.io/DrugUtilisation/reference/plotTreatment.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Generate a custom ggplot2 from a summarised_result object generated with summariseTreatment function. — plotTreatment","text":"ggplot2 object.","code":""},{"path":"https://darwin-eu-dev.github.io/DrugUtilisation/reference/plotTreatment.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Generate a custom ggplot2 from a summarised_result object generated with summariseTreatment function. — plotTreatment","text":"","code":"if (FALSE) { # \\dontrun{ library(duckdb) library(CDMConnector) library(PatientProfiles) library(DrugUtilisation)  con <- dbConnect(duckdb(), eunomiaDir(\"GiBleed\")) cdm <- cdmFromCon(con = con, cdmSchema = \"main\", writeSchema = \"main\")  codes <- getDrugIngredientCodes(cdm = cdm, name = \"acetaminophen\") cdm <- generateDrugUtilisationCohortSet(   cdm = cdm, conceptSet = codes, name = \"study_cohort\")  alternative <- getDrugIngredientCodes(cdm = cdm, name = c(   \"acetaminophen\", \"dextromethorphan\", \"doxylamine\", \"hydrocodone\"))  result <- cdm$study_cohort |>   addSex() |>   addAge(ageGroup = list(\"<40\" = c(0, 39), \">=40\" = c(40, 150))) |>   summariseTreatmentFromConceptSet(     treatmentConceptSet = alternative,     window = list(c(0, 199), c(200, 399), c(400, 599), c(600, 799)),     strata = list(c(\"age_group\", \"sex\"))   )  plotTreatment(result) } # }"},{"path":"https://darwin-eu-dev.github.io/DrugUtilisation/reference/readConceptList.html","id":null,"dir":"Reference","previous_headings":"","what":"Get concept ids from a provided path to json files — readConceptList","title":"Get concept ids from a provided path to json files — readConceptList","text":"Get concept ids provided path json files","code":""},{"path":"https://darwin-eu-dev.github.io/DrugUtilisation/reference/readConceptList.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Get concept ids from a provided path to json files — readConceptList","text":"","code":"readConceptList(path, cdm)"},{"path":"https://darwin-eu-dev.github.io/DrugUtilisation/reference/readConceptList.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Get concept ids from a provided path to json files — readConceptList","text":"path path file folder containing jsons read cdm cdm reference created CDMConnector","code":""},{"path":"https://darwin-eu-dev.github.io/DrugUtilisation/reference/readConceptList.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Get concept ids from a provided path to json files — readConceptList","text":"list concept_ids respective concept_ids interest","code":""},{"path":"https://darwin-eu-dev.github.io/DrugUtilisation/reference/readConceptList.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Get concept ids from a provided path to json files — readConceptList","text":"","code":"# \\donttest{ library(DrugUtilisation)  cdm <- mockDrugUtilisation()  codelist <- readConceptList(   path = system.file(\"concepts\",package=\"DrugUtilisation\"), cdm = cdm ) #> Warning: `readConceptList()` was deprecated in DrugUtilisation 0.5.0. #> ℹ Please use `codesFromConceptSet()` instead. # }"},{"path":"https://darwin-eu-dev.github.io/DrugUtilisation/reference/reexports.html","id":null,"dir":"Reference","previous_headings":"","what":"Objects exported from other packages — reexports","title":"Objects exported from other packages — reexports","text":"objects imported packages. Follow links see documentation. CodelistGenerator codesFromCohort, codesFromConceptSet, getATCCodes, getDrugIngredientCodes omopgenerics attrition, bind, cohortCodelist, cohortCount, exportSummarisedResult, settings, suppress PatientProfiles mockDisconnect","code":""},{"path":"https://darwin-eu-dev.github.io/DrugUtilisation/reference/requireDrugInDateRange.html","id":null,"dir":"Reference","previous_headings":"","what":"Restrict to observations that have an indexDate within a certain range. — requireDrugInDateRange","title":"Restrict to observations that have an indexDate within a certain range. — requireDrugInDateRange","text":"Restrict observations indexDate within certain range.","code":""},{"path":"https://darwin-eu-dev.github.io/DrugUtilisation/reference/requireDrugInDateRange.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Restrict to observations that have an indexDate within a certain range. — requireDrugInDateRange","text":"","code":"requireDrugInDateRange(   cohort,   dateRange,   indexDate = \"cohort_start_date\",   cohortId = NULL,   name = omopgenerics::tableName(cohort) )"},{"path":"https://darwin-eu-dev.github.io/DrugUtilisation/reference/requireDrugInDateRange.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Restrict to observations that have an indexDate within a certain range. — requireDrugInDateRange","text":"cohort cohort table cdm reference. dateRange Date interval consider. indexDate Column points date column cohort. cohortId IDs cohorts modify. default NULL meaning cohorts used; otherwise, specified cohorts modified, rest remain unchanged. name Name new cohort. Default name original cohort name.","code":""},{"path":"https://darwin-eu-dev.github.io/DrugUtilisation/reference/requireDrugInDateRange.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Restrict to observations that have an indexDate within a certain range. — requireDrugInDateRange","text":"cohort table object requirements applied.","code":""},{"path":"https://darwin-eu-dev.github.io/DrugUtilisation/reference/requireDrugInDateRange.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Restrict to observations that have an indexDate within a certain range. — requireDrugInDateRange","text":"","code":"# \\donttest{ cdm <- mockDrugUtilisation() cdm$cohort1 <- cdm$cohort1 |>   requireDrugInDateRange(     dateRange = as.Date(c(\"2020-01-01\", NA)), cohortId = 1) attrition(cdm$cohort1) #> # A tibble: 4 × 7 #>   cohort_definition_id number_records number_subjects reason_id reason           #>                  <int>          <int>           <int>     <int> <chr>            #> 1                    1              4               4         1 Qualifying init… #> 2                    1              2               2         2 require cohort_… #> 3                    2              2               2         1 Qualifying init… #> 4                    3              4               4         1 Qualifying init… #> # ℹ 2 more variables: excluded_records <int>, excluded_subjects <int> # }"},{"path":"https://darwin-eu-dev.github.io/DrugUtilisation/reference/requireIsFirstDrugEntry.html","id":null,"dir":"Reference","previous_headings":"","what":"Require only first record per subject. — requireIsFirstDrugEntry","title":"Require only first record per subject. — requireIsFirstDrugEntry","text":"Require first record per subject.","code":""},{"path":"https://darwin-eu-dev.github.io/DrugUtilisation/reference/requireIsFirstDrugEntry.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Require only first record per subject. — requireIsFirstDrugEntry","text":"","code":"requireIsFirstDrugEntry(   cohort,   cohortId = NULL,   name = omopgenerics::tableName(cohort) )"},{"path":"https://darwin-eu-dev.github.io/DrugUtilisation/reference/requireIsFirstDrugEntry.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Require only first record per subject. — requireIsFirstDrugEntry","text":"cohort cohort table cdm reference. cohortId IDs cohorts modify. default NULL meaning cohorts used; otherwise, specified cohorts modified, rest remain unchanged. name Name new cohort. Default name original cohort name.","code":""},{"path":"https://darwin-eu-dev.github.io/DrugUtilisation/reference/requireIsFirstDrugEntry.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Require only first record per subject. — requireIsFirstDrugEntry","text":"cohort table object requirements applied.","code":""},{"path":"https://darwin-eu-dev.github.io/DrugUtilisation/reference/requireIsFirstDrugEntry.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Require only first record per subject. — requireIsFirstDrugEntry","text":"","code":"# \\donttest{ cdm <- mockDrugUtilisation() cdm$cohort1 <- cdm$cohort1 |>   requireIsFirstDrugEntry() attrition(cdm$cohort1) #> # A tibble: 6 × 7 #>   cohort_definition_id number_records number_subjects reason_id reason           #>                  <int>          <int>           <int>     <int> <chr>            #> 1                    1              4               4         1 Qualifying init… #> 2                    1              4               4         2 require is the … #> 3                    2              2               2         1 Qualifying init… #> 4                    2              2               2         2 require is the … #> 5                    3              4               4         1 Qualifying init… #> 6                    3              4               4         2 require is the … #> # ℹ 2 more variables: excluded_records <int>, excluded_subjects <int> # }"},{"path":"https://darwin-eu-dev.github.io/DrugUtilisation/reference/requireObservationBeforeDrug.html","id":null,"dir":"Reference","previous_headings":"","what":"Require number of days of observation before the drug starts. — requireObservationBeforeDrug","title":"Require number of days of observation before the drug starts. — requireObservationBeforeDrug","text":"Require number days observation drug starts.","code":""},{"path":"https://darwin-eu-dev.github.io/DrugUtilisation/reference/requireObservationBeforeDrug.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Require number of days of observation before the drug starts. — requireObservationBeforeDrug","text":"","code":"requireObservationBeforeDrug(   cohort,   priorObservation,   cohortId = NULL,   name = omopgenerics::tableName(cohort) )"},{"path":"https://darwin-eu-dev.github.io/DrugUtilisation/reference/requireObservationBeforeDrug.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Require number of days of observation before the drug starts. — requireObservationBeforeDrug","text":"cohort cohort table cdm reference. priorObservation Number days prior observation records considered. cohortId IDs cohorts modify. default NULL meaning cohorts used; otherwise, specified cohorts modified, rest remain unchanged. name Name new cohort. Default name original cohort name.","code":""},{"path":"https://darwin-eu-dev.github.io/DrugUtilisation/reference/requireObservationBeforeDrug.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Require number of days of observation before the drug starts. — requireObservationBeforeDrug","text":"cohort table object requirements applied.","code":""},{"path":"https://darwin-eu-dev.github.io/DrugUtilisation/reference/requireObservationBeforeDrug.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Require number of days of observation before the drug starts. — requireObservationBeforeDrug","text":"","code":"# \\donttest{ cdm <- mockDrugUtilisation() cdm$cohort1 <- cdm$cohort1 |>   requireObservationBeforeDrug(priorObservation = 365, cohortId = 1) attrition(cdm$cohort1) #> # A tibble: 4 × 7 #>   cohort_definition_id number_records number_subjects reason_id reason           #>                  <int>          <int>           <int>     <int> <chr>            #> 1                    1              4               4         1 Qualifying init… #> 2                    1              2               2         2 require prior o… #> 3                    2              2               2         1 Qualifying init… #> 4                    3              4               4         1 Qualifying init… #> # ℹ 2 more variables: excluded_records <int>, excluded_subjects <int> # }"},{"path":"https://darwin-eu-dev.github.io/DrugUtilisation/reference/requirePriorDrugWashout.html","id":null,"dir":"Reference","previous_headings":"","what":"Require prior days with no exposure. — requirePriorDrugWashout","title":"Require prior days with no exposure. — requirePriorDrugWashout","text":"Require prior days exposure.","code":""},{"path":"https://darwin-eu-dev.github.io/DrugUtilisation/reference/requirePriorDrugWashout.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Require prior days with no exposure. — requirePriorDrugWashout","text":"","code":"requirePriorDrugWashout(   cohort,   priorUseWashout,   cohortId = NULL,   name = omopgenerics::tableName(cohort) )"},{"path":"https://darwin-eu-dev.github.io/DrugUtilisation/reference/requirePriorDrugWashout.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Require prior days with no exposure. — requirePriorDrugWashout","text":"cohort cohort table cdm reference. priorUseWashout length priorUseWashout applied. NOTE priorUseWashout infinity requireIsFirstDrugEntry called instead. cohortId IDs cohorts modify. default NULL meaning cohorts used; otherwise, specified cohorts modified, rest remain unchanged. name Name new cohort. Default name original cohort name.","code":""},{"path":"https://darwin-eu-dev.github.io/DrugUtilisation/reference/requirePriorDrugWashout.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Require prior days with no exposure. — requirePriorDrugWashout","text":"cohort table object requirements applied.","code":""},{"path":"https://darwin-eu-dev.github.io/DrugUtilisation/reference/requirePriorDrugWashout.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Require prior days with no exposure. — requirePriorDrugWashout","text":"","code":"# \\donttest{ cdm <- mockDrugUtilisation() cdm$cohort1 <- cdm$cohort1 |>   requirePriorDrugWashout(priorUseWashout = 90, cohortId = c(2,3)) attrition(cdm$cohort1) #> # A tibble: 5 × 7 #>   cohort_definition_id number_records number_subjects reason_id reason           #>                  <int>          <int>           <int>     <int> <chr>            #> 1                    1              4               4         1 Qualifying init… #> 2                    2              2               2         1 Qualifying init… #> 3                    2              2               2         2 require prior u… #> 4                    3              4               4         1 Qualifying init… #> 5                    3              4               4         2 require prior u… #> # ℹ 2 more variables: excluded_records <int>, excluded_subjects <int> # }"},{"path":"https://darwin-eu-dev.github.io/DrugUtilisation/reference/stratifyByUnit.html","id":null,"dir":"Reference","previous_headings":"","what":"Function to stratify a conceptSet by unit — stratifyByUnit","title":"Function to stratify a conceptSet by unit — stratifyByUnit","text":"Function stratify conceptSet unit","code":""},{"path":"https://darwin-eu-dev.github.io/DrugUtilisation/reference/stratifyByUnit.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Function to stratify a conceptSet by unit — stratifyByUnit","text":"","code":"stratifyByUnit(conceptSet, cdm, ingredientConceptId)"},{"path":"https://darwin-eu-dev.github.io/DrugUtilisation/reference/stratifyByUnit.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Function to stratify a conceptSet by unit — stratifyByUnit","text":"conceptSet List concept sets cdm cdm reference ingredientConceptId ConceptId refers ingredient","code":""},{"path":"https://darwin-eu-dev.github.io/DrugUtilisation/reference/stratifyByUnit.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Function to stratify a conceptSet by unit — stratifyByUnit","text":"conceptSet stratified unit","code":""},{"path":"https://darwin-eu-dev.github.io/DrugUtilisation/reference/stratifyByUnit.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Function to stratify a conceptSet by unit — stratifyByUnit","text":"","code":"# \\donttest{ library(DrugUtilisation)  cdm <- mockDrugUtilisation()  codelist <- getDrugIngredientCodes(cdm, \"acetaminophen\")  codelistStratified <- stratifyByUnit(codelist, cdm, 1125315)  codelistStratified #> $`161_acetaminophen unit: milligram` #> [1]  1125360  2905077 43135274 #>  # }"},{"path":"https://darwin-eu-dev.github.io/DrugUtilisation/reference/summariseDoseCoverage.html","id":null,"dir":"Reference","previous_headings":"","what":"Check coverage of daily dose computation in a sample of the cdm for selected concept sets and ingredient — summariseDoseCoverage","title":"Check coverage of daily dose computation in a sample of the cdm for selected concept sets and ingredient — summariseDoseCoverage","text":"Check coverage daily dose computation sample cdm selected concept sets ingredient","code":""},{"path":"https://darwin-eu-dev.github.io/DrugUtilisation/reference/summariseDoseCoverage.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Check coverage of daily dose computation in a sample of the cdm for selected concept sets and ingredient — summariseDoseCoverage","text":"","code":"summariseDoseCoverage(   cdm,   ingredientConceptId,   estimates = c(\"count_missing\", \"percentage_missing\", \"mean\", \"sd\", \"q25\", \"median\",     \"q75\"),   sampleSize = NULL )"},{"path":"https://darwin-eu-dev.github.io/DrugUtilisation/reference/summariseDoseCoverage.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Check coverage of daily dose computation in a sample of the cdm for selected concept sets and ingredient — summariseDoseCoverage","text":"cdm cdm reference created using CDMConnector. ingredientConceptId Code indicating ingredient interest. estimates Estimates obtain. sampleSize Maximum number records ingredient estimate dose coverage. ingredient , random sample equal sampleSize considered. NULL, records used.","code":""},{"path":"https://darwin-eu-dev.github.io/DrugUtilisation/reference/summariseDoseCoverage.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Check coverage of daily dose computation in a sample of the cdm for selected concept sets and ingredient — summariseDoseCoverage","text":"function returns information coverage computeDailyDose.R selected ingredients concept sets","code":""},{"path":"https://darwin-eu-dev.github.io/DrugUtilisation/reference/summariseDoseCoverage.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Check coverage of daily dose computation in a sample of the cdm for selected concept sets and ingredient — summariseDoseCoverage","text":"","code":"# \\donttest{ library(DrugUtilisation)  cdm <- mockDrugUtilisation()  summariseDoseCoverage(cdm, 1125315) #> ℹ The following estimates will be computed: #> • daily_dose: count_missing, percentage_missing, mean, sd, q25, median, q75 #> ! Table is collected to memory as not all requested estimates are supported on #>   the database side #> → Start summary of data, at 2024-07-19 02:51:29.480429 #> ✔ Summary finished, at 2024-07-19 02:51:29.742336 #> # A tibble: 56 × 13 #>    result_id cdm_name group_name      group_level   strata_name strata_level #>        <int> <chr>    <chr>           <chr>         <chr>       <chr>        #>  1         1 DUS MOCK ingredient_name acetaminophen overall     overall      #>  2         1 DUS MOCK ingredient_name acetaminophen overall     overall      #>  3         1 DUS MOCK ingredient_name acetaminophen overall     overall      #>  4         1 DUS MOCK ingredient_name acetaminophen overall     overall      #>  5         1 DUS MOCK ingredient_name acetaminophen overall     overall      #>  6         1 DUS MOCK ingredient_name acetaminophen overall     overall      #>  7         1 DUS MOCK ingredient_name acetaminophen overall     overall      #>  8         1 DUS MOCK ingredient_name acetaminophen overall     overall      #>  9         1 DUS MOCK ingredient_name acetaminophen unit        milligram    #> 10         1 DUS MOCK ingredient_name acetaminophen unit        milligram    #> # ℹ 46 more rows #> # ℹ 7 more variables: variable_name <chr>, variable_level <chr>, #> #   estimate_name <chr>, estimate_type <chr>, estimate_value <chr>, #> #   additional_name <chr>, additional_level <chr> # }"},{"path":[]},{"path":"https://darwin-eu-dev.github.io/DrugUtilisation/reference/summariseDrugRestart.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Summarise the drug restart per window. — summariseDrugRestart","text":"","code":"summariseDrugRestart(   cohort,   switchCohortTable,   switchCohortId = NULL,   strata = list(),   followUpDays = Inf,   censorDate = NULL,   restrictToFirstDiscontinuation = TRUE )"},{"path":"https://darwin-eu-dev.github.io/DrugUtilisation/reference/summariseDrugRestart.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Summarise the drug restart per window. — summariseDrugRestart","text":"cohort cohort table. switchCohortTable cohort table cdm contains possible alternative treatments. switchCohortId cohort ids used switchCohortTable. NULL cohort definition ids used. strata List column names vectors column names groups stratify results . followUpDays vector number days follow . can multiple values. censorDate Date censoring. Individuals always censored end observation. restrictToFirstDiscontinuation Whether consider first discontinuation episode .","code":""},{"path":"https://darwin-eu-dev.github.io/DrugUtilisation/reference/summariseDrugRestart.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Summarise the drug restart per window. — summariseDrugRestart","text":"summarised_result object percentages restart, swicth exposed per window.","code":""},{"path":"https://darwin-eu-dev.github.io/DrugUtilisation/reference/summariseDrugRestart.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Summarise the drug restart per window. — summariseDrugRestart","text":"","code":"# \\donttest{ library(DrugUtilisation)  cdm <- mockDrugUtilisation()  conceptlist <- list(\"a\" = 1125360, \"b\" = c(1503297, 1503327)) cdm <- generateDrugUtilisationCohortSet(   cdm = cdm,   name = \"switch_cohort\",   conceptSet = conceptlist )  result <- cdm$cohort1 |>   summariseDrugRestart(switchCohortTable = \"switch_cohort\") #> Warning: Missing values are always removed in SQL aggregation functions. #> Use `na.rm = TRUE` to silence this warning #> This warning is displayed once every 8 hours.  tableDrugRestart(result) #> ! Results have not been suppressed.     Follow-up       Event       Estimate name       Estimate value     unknown; Cohort 1     End of observation Restart N (%) 0 (0.00 %) Switch N (%) 1 (25.00 %) Restart and switch N (%) 0 (0.00 %) Not treated N (%) 3 (75.00 %)unknown; Cohort 2     End of observation Restart N (%) 0 (0.00 %) Switch N (%) 0 (0.00 %) Restart and switch N (%) 0 (0.00 %) Not treated N (%) 2 (100.00 %)unknown; Cohort 3     End of observation Restart N (%) 0 (0.00 %) Switch N (%) 0 (0.00 %) Restart and switch N (%) 0 (0.00 %) Not treated N (%) 4 (100.00 %) CDMConnector::cdmDisconnect(cdm = cdm) # }"},{"path":"https://darwin-eu-dev.github.io/DrugUtilisation/reference/summariseDrugUse.html","id":null,"dir":"Reference","previous_headings":"","what":"This function is used to summarise the dose table over multiple cohorts. — summariseDrugUse","title":"This function is used to summarise the dose table over multiple cohorts. — summariseDrugUse","text":"function used summarise dose table multiple cohorts.","code":""},{"path":"https://darwin-eu-dev.github.io/DrugUtilisation/reference/summariseDrugUse.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"This function is used to summarise the dose table over multiple cohorts. — summariseDrugUse","text":"","code":"summariseDrugUse(   cohort,   cdm = lifecycle::deprecated(),   strata = list(),   estimates = c(\"min\", \"q05\", \"q25\", \"median\", \"q75\", \"q95\", \"max\", \"mean\", \"sd\",     \"count_missing\", \"percentage_missing\"),   minCellCount = lifecycle::deprecated() )"},{"path":"https://darwin-eu-dev.github.io/DrugUtilisation/reference/summariseDrugUse.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"This function is used to summarise the dose table over multiple cohorts. — summariseDrugUse","text":"cohort Cohort drug use variables strata. cdm Deprecated. strata Stratification list. estimates Estimates want columns. minCellCount Deprecated.","code":""},{"path":"https://darwin-eu-dev.github.io/DrugUtilisation/reference/summariseDrugUse.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"This function is used to summarise the dose table over multiple cohorts. — summariseDrugUse","text":"summary drug use stratified cohort_name strata_name","code":""},{"path":"https://darwin-eu-dev.github.io/DrugUtilisation/reference/summariseDrugUse.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"This function is used to summarise the dose table over multiple cohorts. — summariseDrugUse","text":"","code":"# \\donttest{ library(DrugUtilisation) library(PatientProfiles)  cdm <- mockDrugUtilisation() cdm <- generateDrugUtilisationCohortSet(   cdm, \"dus_cohort\", getDrugIngredientCodes(cdm, \"acetaminophen\") ) cdm[[\"dus_cohort\"]] <- cdm[[\"dus_cohort\"]] |>   addDrugUse(ingredientConceptId = 1125315) result <- summariseDrugUse(cdm[[\"dus_cohort\"]]) #> ! names of group will be ignored #> ℹ The following estimates will be computed: #> • number_exposures: min, q05, q25, median, q75, q95, max, mean, sd, #>   count_missing, percentage_missing #> • duration: min, q05, q25, median, q75, q95, max, mean, sd, count_missing, #>   percentage_missing #> • cumulative_quantity: min, q05, q25, median, q75, q95, max, mean, sd, #>   count_missing, percentage_missing #> • number_eras: min, q05, q25, median, q75, q95, max, mean, sd, count_missing, #>   percentage_missing #> • initial_quantity: min, q05, q25, median, q75, q95, max, mean, sd, #>   count_missing, percentage_missing #> • impute_daily_dose_percentage: min, q05, q25, median, q75, q95, max, mean, sd, #>   count_missing, percentage_missing #> • impute_duration_percentage: min, q05, q25, median, q75, q95, max, mean, sd, #>   count_missing, percentage_missing #> • initial_daily_dose_milligram: min, q05, q25, median, q75, q95, max, mean, sd, #>   count_missing, percentage_missing #> • cumulative_dose_milligram: min, q05, q25, median, q75, q95, max, mean, sd, #>   count_missing, percentage_missing #> ! Table is collected to memory as not all requested estimates are supported on #>   the database side #> → Start summary of data, at 2024-07-19 02:52:08.960914 #> ✔ Summary finished, at 2024-07-19 02:52:09.114396 print(result) #> # A tibble: 101 × 13 #>    result_id cdm_name group_name  group_level       strata_name strata_level #>        <int> <chr>    <chr>       <chr>             <chr>       <chr>        #>  1         1 DUS MOCK cohort_name 161_acetaminophen overall     overall      #>  2         1 DUS MOCK cohort_name 161_acetaminophen overall     overall      #>  3         1 DUS MOCK cohort_name 161_acetaminophen overall     overall      #>  4         1 DUS MOCK cohort_name 161_acetaminophen overall     overall      #>  5         1 DUS MOCK cohort_name 161_acetaminophen overall     overall      #>  6         1 DUS MOCK cohort_name 161_acetaminophen overall     overall      #>  7         1 DUS MOCK cohort_name 161_acetaminophen overall     overall      #>  8         1 DUS MOCK cohort_name 161_acetaminophen overall     overall      #>  9         1 DUS MOCK cohort_name 161_acetaminophen overall     overall      #> 10         1 DUS MOCK cohort_name 161_acetaminophen overall     overall      #> # ℹ 91 more rows #> # ℹ 7 more variables: variable_name <chr>, variable_level <chr>, #> #   estimate_name <chr>, estimate_type <chr>, estimate_value <chr>, #> #   additional_name <chr>, additional_level <chr>  cdm[[\"dus_cohort\"]] <- cdm[[\"dus_cohort\"]] |>   addSex() |>   addAge(ageGroup = list(\"<40\" = c(0, 39), \">=40\" = c(40, 150)))  summariseDrugUse(   cdm[[\"dus_cohort\"]], strata = list(    \"age_group\" = \"age_group\", \"sex\" = \"sex\",    \"age_group and sex\" = c(\"age_group\", \"sex\")   ) ) #> ! names of group will be ignored #> ! names of strata will be ignored #> ℹ The following estimates will be computed: #> • number_exposures: min, q05, q25, median, q75, q95, max, mean, sd, #>   count_missing, percentage_missing #> • duration: min, q05, q25, median, q75, q95, max, mean, sd, count_missing, #>   percentage_missing #> • cumulative_quantity: min, q05, q25, median, q75, q95, max, mean, sd, #>   count_missing, percentage_missing #> • number_eras: min, q05, q25, median, q75, q95, max, mean, sd, count_missing, #>   percentage_missing #> • initial_quantity: min, q05, q25, median, q75, q95, max, mean, sd, #>   count_missing, percentage_missing #> • impute_daily_dose_percentage: min, q05, q25, median, q75, q95, max, mean, sd, #>   count_missing, percentage_missing #> • impute_duration_percentage: min, q05, q25, median, q75, q95, max, mean, sd, #>   count_missing, percentage_missing #> • initial_daily_dose_milligram: min, q05, q25, median, q75, q95, max, mean, sd, #>   count_missing, percentage_missing #> • cumulative_dose_milligram: min, q05, q25, median, q75, q95, max, mean, sd, #>   count_missing, percentage_missing #> ! Table is collected to memory as not all requested estimates are supported on #>   the database side #> → Start summary of data, at 2024-07-19 02:52:10.396533 #> ✔ Summary finished, at 2024-07-19 02:52:11.187585 #> # A tibble: 808 × 13 #>    result_id cdm_name group_name  group_level       strata_name strata_level #>        <int> <chr>    <chr>       <chr>             <chr>       <chr>        #>  1         1 DUS MOCK cohort_name 161_acetaminophen overall     overall      #>  2         1 DUS MOCK cohort_name 161_acetaminophen overall     overall      #>  3         1 DUS MOCK cohort_name 161_acetaminophen overall     overall      #>  4         1 DUS MOCK cohort_name 161_acetaminophen overall     overall      #>  5         1 DUS MOCK cohort_name 161_acetaminophen overall     overall      #>  6         1 DUS MOCK cohort_name 161_acetaminophen overall     overall      #>  7         1 DUS MOCK cohort_name 161_acetaminophen overall     overall      #>  8         1 DUS MOCK cohort_name 161_acetaminophen overall     overall      #>  9         1 DUS MOCK cohort_name 161_acetaminophen overall     overall      #> 10         1 DUS MOCK cohort_name 161_acetaminophen overall     overall      #> # ℹ 798 more rows #> # ℹ 7 more variables: variable_name <chr>, variable_level <chr>, #> #   estimate_name <chr>, estimate_type <chr>, estimate_value <chr>, #> #   additional_name <chr>, additional_level <chr> # }"},{"path":"https://darwin-eu-dev.github.io/DrugUtilisation/reference/summariseDrugUtilisation.html","id":null,"dir":"Reference","previous_headings":"","what":"This function is used to summarise the dose utilisation table over multiple cohorts. — summariseDrugUtilisation","title":"This function is used to summarise the dose utilisation table over multiple cohorts. — summariseDrugUtilisation","text":"function used summarise dose utilisation table multiple cohorts.","code":""},{"path":"https://darwin-eu-dev.github.io/DrugUtilisation/reference/summariseDrugUtilisation.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"This function is used to summarise the dose utilisation table over multiple cohorts. — summariseDrugUtilisation","text":"","code":"summariseDrugUtilisation(   cohort,   strata = list(),   estimates = c(\"q25\", \"median\", \"q75\", \"mean\", \"sd\", \"count_missing\",     \"percentage_missing\"),   ingredientConceptId = NULL,   conceptSet = NULL,   indexDate = \"cohort_start_date\",   censorDate = \"cohort_end_date\",   restrictIncident = TRUE,   gapEra = 1,   numberExposures = TRUE,   numberEras = TRUE,   exposedTime = TRUE,   timeToExposure = TRUE,   initialQuantity = TRUE,   cumulativeQuantity = TRUE,   initialDailyDose = TRUE,   cumulativeDose = TRUE )"},{"path":"https://darwin-eu-dev.github.io/DrugUtilisation/reference/summariseDrugUtilisation.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"This function is used to summarise the dose utilisation table over multiple cohorts. — summariseDrugUtilisation","text":"cohort Cohort drug use variables strata. strata Stratification list. estimates Estimates want columns. ingredientConceptId Ingredient OMOP concept interested study. compulsory input, default value provided. conceptSet List concepts included. NULL descendants ingredient concept id used. indexDate Name column indicates date start analysis. censorDate Name column indicates date stop analysis, NULL end individuals observation used. restrictIncident Whether include incident prescriptions analysis. FALSE prescriptions overlap study period included. gapEra Number days two continuous exposures considered era. numberExposures Whether add column number exposures. numberEras Whether add column number eras. exposedTime Whether add column number exposed days. timeToExposure Whether add column number days indexDate start first exposure. initialQuantity Whether add column initial quantity. cumulativeQuantity Whether add column cumulative quantity identified prescription. initialDailyDose Whether add column initial daily dose. cumulativeDose Whether add column cumulative dose.","code":""},{"path":"https://darwin-eu-dev.github.io/DrugUtilisation/reference/summariseDrugUtilisation.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"This function is used to summarise the dose utilisation table over multiple cohorts. — summariseDrugUtilisation","text":"summary drug utilisation stratified cohort_name strata_name","code":""},{"path":"https://darwin-eu-dev.github.io/DrugUtilisation/reference/summariseDrugUtilisation.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"This function is used to summarise the dose utilisation table over multiple cohorts. — summariseDrugUtilisation","text":"","code":"# \\donttest{ library(DrugUtilisation) library(CodelistGenerator)  cdm <- mockDrugUtilisation() cdm <- generateDrugUtilisationCohortSet(   cdm, \"dus_cohort\", getDrugIngredientCodes(cdm, name = \"acetaminophen\") ) cdm[[\"dus_cohort\"]] %>%   summariseDrugUtilisation(ingredientConceptId = 1125315) #> # A tibble: 58 × 13 #>    result_id cdm_name group_name  group_level       strata_name strata_level #>        <int> <chr>    <chr>       <chr>             <chr>       <chr>        #>  1         1 DUS MOCK cohort_name 161_acetaminophen overall     overall      #>  2         1 DUS MOCK cohort_name 161_acetaminophen overall     overall      #>  3         1 DUS MOCK cohort_name 161_acetaminophen overall     overall      #>  4         1 DUS MOCK cohort_name 161_acetaminophen overall     overall      #>  5         1 DUS MOCK cohort_name 161_acetaminophen overall     overall      #>  6         1 DUS MOCK cohort_name 161_acetaminophen overall     overall      #>  7         1 DUS MOCK cohort_name 161_acetaminophen overall     overall      #>  8         1 DUS MOCK cohort_name 161_acetaminophen overall     overall      #>  9         1 DUS MOCK cohort_name 161_acetaminophen overall     overall      #> 10         1 DUS MOCK cohort_name 161_acetaminophen overall     overall      #> # ℹ 48 more rows #> # ℹ 7 more variables: variable_name <chr>, variable_level <chr>, #> #   estimate_name <chr>, estimate_type <chr>, estimate_value <chr>, #> #   additional_name <chr>, additional_level <chr> # }"},{"path":"https://darwin-eu-dev.github.io/DrugUtilisation/reference/summariseIndication.html","id":null,"dir":"Reference","previous_headings":"","what":"This function is used to summarise the indication table over multiple cohorts. — summariseIndication","title":"This function is used to summarise the indication table over multiple cohorts. — summariseIndication","text":"function used summarise indication table multiple cohorts.","code":""},{"path":"https://darwin-eu-dev.github.io/DrugUtilisation/reference/summariseIndication.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"This function is used to summarise the indication table over multiple cohorts. — summariseIndication","text":"","code":"summariseIndication(   cohort,   strata = list(),   indicationCohortName,   indicationCohortId = NULL,   indicationWindow = list(c(0, 0)),   unknownIndicationTable = NULL,   indexDate = \"cohort_start_date\" )"},{"path":"https://darwin-eu-dev.github.io/DrugUtilisation/reference/summariseIndication.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"This function is used to summarise the indication table over multiple cohorts. — summariseIndication","text":"cohort Cohort indications strata. strata Stratification list. indicationCohortName Name indication cohort table indicationCohortId target cohort Id add indication indicationWindow time window interests unknownIndicationTable Tables search unknown indications indexDate Date indication","code":""},{"path":"https://darwin-eu-dev.github.io/DrugUtilisation/reference/summariseIndication.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"This function is used to summarise the indication table over multiple cohorts. — summariseIndication","text":"summarise result object","code":""},{"path":"https://darwin-eu-dev.github.io/DrugUtilisation/reference/summariseIndication.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"This function is used to summarise the indication table over multiple cohorts. — summariseIndication","text":"","code":"# \\donttest{ library(DrugUtilisation) library(PatientProfiles) library(CDMConnector)  cdm <- mockDrugUtilisation() indications <- list(\"headache\" = 378253, \"asthma\" = 317009) cdm <- generateConceptCohortSet(cdm, indications, \"indication_cohorts\") acetaminophen <- getDrugIngredientCodes(cdm, \"acetaminophen\") cdm <- generateDrugUtilisationCohortSet(cdm, \"drug_cohort\", acetaminophen) cdm[[\"drug_cohort\"]] <- cdm[[\"drug_cohort\"]] |>   addIndication(     indicationCohortName = \"indication_cohorts\",     indicationWindow = list(c(0,0),c(-30,0),c(-365,0))   )  # }"},{"path":"https://darwin-eu-dev.github.io/DrugUtilisation/reference/summariseTreatmentFromCohort.html","id":null,"dir":"Reference","previous_headings":"","what":"This function is used to summarise the dose table over multiple cohorts. — summariseTreatmentFromCohort","title":"This function is used to summarise the dose table over multiple cohorts. — summariseTreatmentFromCohort","text":"function used summarise dose table multiple cohorts.","code":""},{"path":"https://darwin-eu-dev.github.io/DrugUtilisation/reference/summariseTreatmentFromCohort.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"This function is used to summarise the dose table over multiple cohorts. — summariseTreatmentFromCohort","text":"","code":"summariseTreatmentFromCohort(   cohort,   window,   treatmentCohortName,   treatmentCohortId = NULL,   strata = list(),   indexDate = \"cohort_start_date\",   censorDate = NULL,   combination = FALSE,   minCellCount = lifecycle::deprecated() )"},{"path":"https://darwin-eu-dev.github.io/DrugUtilisation/reference/summariseTreatmentFromCohort.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"This function is used to summarise the dose table over multiple cohorts. — summariseTreatmentFromCohort","text":"cohort Cohort drug use variables strata. window Window summarise treatments. treatmentCohortName Name cohort cdm contains interest treatments. treatmentCohortId Cohort definition id interest treatmentCohortName. strata Stratification list. indexDate Variable x contains date compute intersection. censorDate Whether censor overlap events specific date column date x. NULL, end observation used. combination Whether include combination treatments. minCellCount \\ifelse{html}{\\href{https://lifecycle.r-lib.org/articles/stages.html#deprecated}{\\figure{lifecycle-deprecated.svg}{options: alt='[Deprecated]'}}}{\\strong{[Deprecated]}}","code":""},{"path":"https://darwin-eu-dev.github.io/DrugUtilisation/reference/summariseTreatmentFromCohort.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"This function is used to summarise the dose table over multiple cohorts. — summariseTreatmentFromCohort","text":"summary drug use stratified cohort_name strata_name","code":""},{"path":"https://darwin-eu-dev.github.io/DrugUtilisation/reference/summariseTreatmentFromCohort.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"This function is used to summarise the dose table over multiple cohorts. — summariseTreatmentFromCohort","text":"","code":"# \\donttest{ library(DrugUtilisation)  cdm <- mockDrugUtilisation() cdm$cohort1 |>   summariseTreatmentFromCohort(     treatmentCohortName = \"cohort2\",     window = list(c(0, 30), c(31, 365))   ) #> ℹ The following estimates will be computed: #> • window1_cohort_1: count, percentage #> • window2_cohort_1: count, percentage #> • window1_cohort_3: count, percentage #> • window1_cohort_2: count, percentage #> • window2_cohort_2: count, percentage #> • window2_cohort_3: count, percentage #> • window1_untreated: count, percentage #> • window2_untreated: count, percentage #> → Start summary of data, at 2024-07-19 02:53:11.958351 #> ✔ Summary finished, at 2024-07-19 02:53:12.020341 #> # A tibble: 48 × 13 #>    result_id cdm_name group_name  group_level strata_name strata_level #>        <int> <chr>    <chr>       <chr>       <chr>       <chr>        #>  1         1 DUS MOCK cohort_name cohort_1    overall     overall      #>  2         1 DUS MOCK cohort_name cohort_1    overall     overall      #>  3         1 DUS MOCK cohort_name cohort_1    overall     overall      #>  4         1 DUS MOCK cohort_name cohort_1    overall     overall      #>  5         1 DUS MOCK cohort_name cohort_1    overall     overall      #>  6         1 DUS MOCK cohort_name cohort_1    overall     overall      #>  7         1 DUS MOCK cohort_name cohort_1    overall     overall      #>  8         1 DUS MOCK cohort_name cohort_1    overall     overall      #>  9         1 DUS MOCK cohort_name cohort_1    overall     overall      #> 10         1 DUS MOCK cohort_name cohort_1    overall     overall      #> # ℹ 38 more rows #> # ℹ 7 more variables: variable_name <chr>, variable_level <chr>, #> #   estimate_name <chr>, estimate_type <chr>, estimate_value <chr>, #> #   additional_name <chr>, additional_level <chr> # }"},{"path":"https://darwin-eu-dev.github.io/DrugUtilisation/reference/summariseTreatmentFromConceptSet.html","id":null,"dir":"Reference","previous_headings":"","what":"This function is used to summarise the dose table over multiple cohorts. — summariseTreatmentFromConceptSet","title":"This function is used to summarise the dose table over multiple cohorts. — summariseTreatmentFromConceptSet","text":"function used summarise dose table multiple cohorts.","code":""},{"path":"https://darwin-eu-dev.github.io/DrugUtilisation/reference/summariseTreatmentFromConceptSet.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"This function is used to summarise the dose table over multiple cohorts. — summariseTreatmentFromConceptSet","text":"","code":"summariseTreatmentFromConceptSet(   cohort,   window,   treatmentConceptSet,   strata = list(),   indexDate = \"cohort_start_date\",   censorDate = NULL,   combination = FALSE,   minCellCount = lifecycle::deprecated() )"},{"path":"https://darwin-eu-dev.github.io/DrugUtilisation/reference/summariseTreatmentFromConceptSet.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"This function is used to summarise the dose table over multiple cohorts. — summariseTreatmentFromConceptSet","text":"cohort Cohort drug use variables strata. window Window summarise treatments. treatmentConceptSet Concept set list summarise. strata Stratification list. indexDate Variable x contains date compute intersection. censorDate Whether censor overlap events specific date column date x. NULL, end observation used. combination Whether include combination treatments. minCellCount \\ifelse{html}{\\href{https://lifecycle.r-lib.org/articles/stages.html#deprecated}{\\figure{lifecycle-deprecated.svg}{options: alt='[Deprecated]'}}}{\\strong{[Deprecated]}}","code":""},{"path":"https://darwin-eu-dev.github.io/DrugUtilisation/reference/summariseTreatmentFromConceptSet.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"This function is used to summarise the dose table over multiple cohorts. — summariseTreatmentFromConceptSet","text":"summary drug use stratified cohort_name strata_name","code":""},{"path":"https://darwin-eu-dev.github.io/DrugUtilisation/reference/summariseTreatmentFromConceptSet.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"This function is used to summarise the dose table over multiple cohorts. — summariseTreatmentFromConceptSet","text":"","code":"# \\donttest{ library(DrugUtilisation)  cdm <- mockDrugUtilisation() cdm$cohort1 |>   summariseTreatmentFromConceptSet(     treatmentConceptSet = list(\"a\" = 1503327, \"c\" = 43135274, \"b\" = 2905077),     window = list(c(0, Inf))   ) #> ℹ The following estimates will be computed: #> • window1_a: count, percentage #> • window1_b: count, percentage #> • window1_c: count, percentage #> • window1_untreated: count, percentage #> → Start summary of data, at 2024-07-19 02:53:20.003657 #> ✔ Summary finished, at 2024-07-19 02:53:20.063542 #> # A tibble: 24 × 13 #>    result_id cdm_name group_name  group_level strata_name strata_level #>        <int> <chr>    <chr>       <chr>       <chr>       <chr>        #>  1         1 DUS MOCK cohort_name cohort_1    overall     overall      #>  2         1 DUS MOCK cohort_name cohort_1    overall     overall      #>  3         1 DUS MOCK cohort_name cohort_1    overall     overall      #>  4         1 DUS MOCK cohort_name cohort_1    overall     overall      #>  5         1 DUS MOCK cohort_name cohort_1    overall     overall      #>  6         1 DUS MOCK cohort_name cohort_1    overall     overall      #>  7         1 DUS MOCK cohort_name cohort_1    overall     overall      #>  8         1 DUS MOCK cohort_name cohort_1    overall     overall      #>  9         1 DUS MOCK cohort_name cohort_2    overall     overall      #> 10         1 DUS MOCK cohort_name cohort_2    overall     overall      #> # ℹ 14 more rows #> # ℹ 7 more variables: variable_name <chr>, variable_level <chr>, #> #   estimate_name <chr>, estimate_type <chr>, estimate_value <chr>, #> #   additional_name <chr>, additional_level <chr> # }"},{"path":[]},{"path":"https://darwin-eu-dev.github.io/DrugUtilisation/reference/tableDoseCoverage.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Format a dose_coverage object into a visual table. — tableDoseCoverage","text":"","code":"tableDoseCoverage(   result,   header = c(\"variable\", \"estimate\"),   splitStrata = TRUE,   ingridientName = TRUE,   cdmName = TRUE,   groupColumn = NULL,   type = \"gt\",   formatEstimateName = c(`N (%)` = \"<count_missing> (<percentage_missing> %)\", N =     \"<count>\", `Mean (SD)` = \"<mean> (<sd>)\", `Median (Q25 - Q75)` =     \"<median> (<q25> - <q75>)\"),   .options = list() )"},{"path":"https://darwin-eu-dev.github.io/DrugUtilisation/reference/tableDoseCoverage.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Format a dose_coverage object into a visual table. — tableDoseCoverage","text":"result summarised_result object results summariseDoseCoverage(). header vector containing elements go header order. Allowed : cdm_name, group, strata, variable, estimate. splitStrata TRUE strata columns splitted. ingridientName TRUE cohort names displayed. cdmName TRUE database names displayed. groupColumn Column use group labels. type Type desired formatted table, possibilities: \"gt\", \"flextable\", \"tibble\". formatEstimateName Named list estimate name's join, sorted computation order. Indicate estimate_name's <...>. .options Named list additional formatting options. DrugUtilisation::defaultTableOptions() shows allowed arguments default values.","code":""},{"path":"https://darwin-eu-dev.github.io/DrugUtilisation/reference/tableDoseCoverage.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Format a dose_coverage object into a visual table. — tableDoseCoverage","text":"table formatted version summariseDrugCoverage() results.","code":""},{"path":"https://darwin-eu-dev.github.io/DrugUtilisation/reference/tableDoseCoverage.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Format a dose_coverage object into a visual table. — tableDoseCoverage","text":"","code":"# \\donttest{ library(DrugUtilisation)  cdm <- mockDrugUtilisation()  result <- summariseDoseCoverage(cdm, 1125315) #> ℹ The following estimates will be computed: #> • daily_dose: count_missing, percentage_missing, mean, sd, q25, median, q75 #> ! Table is collected to memory as not all requested estimates are supported on #>   the database side #> → Start summary of data, at 2024-07-19 02:53:26.863213 #> ✔ Summary finished, at 2024-07-19 02:53:27.116505  tableDoseCoverage(result) #> ! Results have not been suppressed.     Database name       Ingredient name       Unit       Route       Pattern id                Number records                       Missing dose                       Daily dose            N       N (%)       Mean (SD)       Median (Q25 - Q75)     DUS MOCK Acetaminophen Overall Overall Overall 13 0 (0.00 %) 15,354.72 (40,814.75) 233.33 (61.27 - 2,128.60)  Milligram Overall Overall 13 0 (0.00 %) 15,354.72 (40,814.75) 233.33 (61.27 - 2,128.60)   Oral Overall 4 0 (0.00 %) 743.94 (1,285.41) 152.22 (54.50 - 841.67)   Topical Overall 9 0 (0.00 %) 21,848.40 (48,414.57) 573.77 (61.27 - 2,128.60)   Oral 9 4 0 (0.00 %) 743.94 (1,285.41) 152.22 (54.50 - 841.67)   Topical 18 3 0 (0.00 %) 64,709.53 (72,396.68) 48,000.00 (25,064.30 - 96,000.00)    9 6 0 (0.00 %) 417.83 (686.46) 73.56 (35.64 - 451.79) # }"},{"path":[]},{"path":"https://darwin-eu-dev.github.io/DrugUtilisation/reference/tableDrugRestart.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Format a drug_restart object into a visual table. — tableDrugRestart","text":"","code":"tableDrugRestart(   result,   header = c(\"strata\"),   splitStrata = TRUE,   cohortName = TRUE,   cdmName = TRUE,   groupColumn = c(\"cdm_name\", \"cohort_name\"),   type = \"gt\",   formatEstimateName = c(`N (%)` = \"<count> (<percentage> %)\"),   .options = list() )"},{"path":"https://darwin-eu-dev.github.io/DrugUtilisation/reference/tableDrugRestart.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Format a drug_restart object into a visual table. — tableDrugRestart","text":"result summarised_result object results summariseDrugRestart(). header vector containing elements go header order. Allowed values: cdm_name, cohort_name, strata, variable, estimate. splitStrata TRUE strata columns splitted. cohortName TRUE cohort names displayed. cdmName TRUE database names displayed. groupColumn Column use group labels. Allowed values: cdm_name, cohort_name, strata, variable_name, variable_level, estimate_name. type Type desired formatted table, possibilities: \"gt\", \"flextable\", \"tibble\". formatEstimateName Named list estimate name's join, sorted computation order. Indicate estimate_name's <...>. .options Named list additional formatting options. DrugUtilisation::defaultTableOptions() shows allowed arguments default values.","code":""},{"path":"https://darwin-eu-dev.github.io/DrugUtilisation/reference/tableDrugRestart.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Format a drug_restart object into a visual table. — tableDrugRestart","text":"table formatted version summariseDrugRestart() results.","code":""},{"path":"https://darwin-eu-dev.github.io/DrugUtilisation/reference/tableDrugRestart.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Format a drug_restart object into a visual table. — tableDrugRestart","text":"","code":"# \\donttest{ library(DrugUtilisation)  cdm <- mockDrugUtilisation()  conceptlist <- list(\"a\" = 1125360, \"b\" = c(1503297, 1503327)) cdm <- generateDrugUtilisationCohortSet(   cdm = cdm,   name = \"switch_cohort\",   conceptSet = conceptlist )  result <- cdm$cohort1 |>   summariseDrugRestart(switchCohortTable = \"switch_cohort\")  tableDrugRestart(result) #> ! Results have not been suppressed.     Follow-up       Event       Estimate name       Estimate value     unknown; Cohort 1     End of observation Restart N (%) 0 (0.00 %) Switch N (%) 1 (25.00 %) Restart and switch N (%) 0 (0.00 %) Not treated N (%) 3 (75.00 %)unknown; Cohort 2     End of observation Restart N (%) 0 (0.00 %) Switch N (%) 0 (0.00 %) Restart and switch N (%) 0 (0.00 %) Not treated N (%) 2 (100.00 %)unknown; Cohort 3     End of observation Restart N (%) 0 (0.00 %) Switch N (%) 0 (0.00 %) Restart and switch N (%) 0 (0.00 %) Not treated N (%) 4 (100.00 %) CDMConnector::cdmDisconnect(cdm = cdm) # }"},{"path":[]},{"path":"https://darwin-eu-dev.github.io/DrugUtilisation/reference/tableDrugUtilisation.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Format a drug_utilisation object into a visual table. — tableDrugUtilisation","text":"","code":"tableDrugUtilisation(   result,   header = c(\"group\", \"strata\"),   splitStrata = TRUE,   cohortName = TRUE,   cdmName = TRUE,   conceptSet = TRUE,   ingredient = TRUE,   groupColumn = NULL,   type = \"gt\",   formatEstimateName = c(`N (%)` = \"<count_missing> (<percentage_missing> %)\", N =     \"<count>\", `Mean (SD)` = \"<mean> (<sd>)\", `Median (Q25 - Q75)` =     \"<median> (<q25> - <q75>)\"),   .options = list() )"},{"path":"https://darwin-eu-dev.github.io/DrugUtilisation/reference/tableDrugUtilisation.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Format a drug_utilisation object into a visual table. — tableDrugUtilisation","text":"result summarised_result object results summariseDrugUtilisation(). header vector containing elements go header order. Allowed : cdm_name, group, strata, variable, estimate. splitStrata TRUE strata columns splitted. cohortName TRUE cohort names displayed. cdmName TRUE database names displayed. conceptSet TRUE concept sets name displayed. ingredient TRUE ingredients names displayed dose calculation. groupColumn Column use group labels, can : \"cdm_name\", \"cohort_name\", \"concept_set\", \"variable_name\", /\"ingredient\". strata split, levels can used, otherwise \"strata_name\" \"strata_level\" can used table group format. type Type desired formatted table, possibilities: \"gt\", \"flextable\", \"tibble\". formatEstimateName Named list estimate name's join, sorted computation order. Indicate estimate_name's <...>. .options Named list additional formatting options. DrugUtilisation::defaultTableOptions() shows allowed arguments default values.","code":""},{"path":"https://darwin-eu-dev.github.io/DrugUtilisation/reference/tableDrugUtilisation.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Format a drug_utilisation object into a visual table. — tableDrugUtilisation","text":"table formatted version summariseIndication() results.","code":""},{"path":"https://darwin-eu-dev.github.io/DrugUtilisation/reference/tableDrugUtilisation.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Format a drug_utilisation object into a visual table. — tableDrugUtilisation","text":"","code":"# \\donttest{  library(DrugUtilisation) library(CodelistGenerator)  cdm <- mockDrugUtilisation() cdm <- generateDrugUtilisationCohortSet(   cdm, \"dus_cohort\", getDrugIngredientCodes(cdm, name = \"acetaminophen\") ) cdm[[\"dus_cohort\"]] %>%   summariseDrugUtilisation(ingredientConceptId = 1125315) |>   tableDrugUtilisation() #> ! Results have not been suppressed.     Database name       Variable       Unit       Estimate name       Concept set       Ingredient                Cohort name            161 acetaminophen     DUS MOCK Number records - N Overall Overall 11 Number subjects - N Overall Overall 9 Number exposures - N (%) Ingredient 1125315 descendants Overall 0 (0.00 %)   Mean (SD) Ingredient 1125315 descendants Overall 1.18 (0.60)   Median (Q25 - Q75) Ingredient 1125315 descendants Overall 1 (1 - 1) Time to exposure - N (%) Ingredient 1125315 descendants Overall 0 (0.00 %)   Mean (SD) Ingredient 1125315 descendants Overall 0.00 (0.00)   Median (Q25 - Q75) Ingredient 1125315 descendants Overall 0 (0 - 0) Cumulative quantity - N (%) Ingredient 1125315 descendants Overall 0 (0.00 %)   Mean (SD) Ingredient 1125315 descendants Overall 50.55 (33.26)   Median (Q25 - Q75) Ingredient 1125315 descendants Overall 40.00 (35.00 - 57.50) Initial quantity - N (%) Ingredient 1125315 descendants Overall 0 (0.00 %)   Mean (SD) Ingredient 1125315 descendants Overall 41.36 (24.71)   Median (Q25 - Q75) Ingredient 1125315 descendants Overall 35.00 (30.00 - 42.50) Number eras - N (%) Ingredient 1125315 descendants Overall 0 (0.00 %)   Mean (SD) Ingredient 1125315 descendants Overall 1.00 (0.00)   Median (Q25 - Q75) Ingredient 1125315 descendants Overall 1 (1 - 1) Exposed time - N (%) Ingredient 1125315 descendants Overall 0 (0.00 %)   Mean (SD) Ingredient 1125315 descendants Overall 306.09 (571.79)   Median (Q25 - Q75) Ingredient 1125315 descendants Overall 61 (12 - 229) Cumulative dose Milligram N (%) Ingredient 1125315 descendants Acetaminophen 0 (0.00 %)   Mean (SD) Ingredient 1125315 descendants Acetaminophen 151,900.00 (298,018.82)   Median (Q25 - Q75) Ingredient 1125315 descendants Acetaminophen 20,000.00 (16,750.00 - 68,000.00) Initial daily dose Milligram N (%) Ingredient 1125315 descendants Acetaminophen 0 (0.00 %)   Mean (SD) Ingredient 1125315 descendants Acetaminophen 17,952.55 (44,164.85)   Median (Q25 - Q75) Ingredient 1125315 descendants Acetaminophen 233.33 (66.19 - 2,208.33)# }"},{"path":[]},{"path":"https://darwin-eu-dev.github.io/DrugUtilisation/reference/tableIndication.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Format a summarised_indication object into a visual table. — tableIndication","text":"","code":"tableIndication(   result,   header = c(\"group\", \"strata\"),   splitStrata = TRUE,   cohortName = TRUE,   cdmName = TRUE,   groupColumn = \"variable_name\",   type = \"gt\",   .options = list() )"},{"path":"https://darwin-eu-dev.github.io/DrugUtilisation/reference/tableIndication.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Format a summarised_indication object into a visual table. — tableIndication","text":"result summarised_result object results summariseIndication(). header vector containing elements go header order. Allowed : cdm_name, group, strata, variable. splitStrata TRUE strata columns splitted. cohortName TRUE cohort names displayed. cdmName TRUE database names displayed. groupColumn Column use group labels. type Type desired formatted table, possibilities: \"gt\", \"flextable\", \"tibble\". .options Named list additional formatting options. DrugUtilisation::defaultTableOptions() shows allowed arguments default values.","code":""},{"path":"https://darwin-eu-dev.github.io/DrugUtilisation/reference/tableIndication.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Format a summarised_indication object into a visual table. — tableIndication","text":"table formatted version summariseIndication() results.","code":""},{"path":"https://darwin-eu-dev.github.io/DrugUtilisation/reference/tableIndication.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Format a summarised_indication object into a visual table. — tableIndication","text":"","code":"# \\donttest{  library(DrugUtilisation)  cdm <- mockDrugUtilisation()  # result <- cdm$cohort1 |> #  addIndication( #    indicationCohortName = \"cohort2\", indicationGap = c(0, 7, 30, Inf), #    unknownIndicationTable = \"condition_occurrence\" #  ) |> #  summariseIndication()  # tableIndication(result)  # }"},{"path":[]},{"path":"https://darwin-eu-dev.github.io/DrugUtilisation/reference/tableTreatment.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Format a summarised_treatment object into a visual table. — tableTreatment","text":"","code":"tableTreatment(   result,   header = c(\"window_name\"),   splitStrata = TRUE,   cdmName = TRUE,   groupColumn = c(\"cdm_name\", \"cohort_name\"),   type = \"gt\",   formatEstimateName = c(`N (%)` = \"<count> (<percentage> %)\"),   .options = list() )"},{"path":"https://darwin-eu-dev.github.io/DrugUtilisation/reference/tableTreatment.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Format a summarised_treatment object into a visual table. — tableTreatment","text":"result summarised_result object results summariseTreatmentFromCohort() summariseTreatmentFromConceptSet(). header vector containing elements go header order. Allowed values: cdm_name, cohort_name, strata, variable, estimate window_name. splitStrata TRUE strata columns splitted. cdmName TRUE database names displayed. groupColumn Column use group labels. Allowed values: cdm_name, cohort_name, strata, variable, estimate window_name. type Type desired formatted table, possibilities: \"gt\", \"flextable\", \"tibble\". formatEstimateName Named list estimate name's join, sorted computation order. Indicate estimate_name's <...>. .options Named list additional formatting options. DrugUtilisation::defaultTableOptions() shows allowed arguments default values.","code":""},{"path":"https://darwin-eu-dev.github.io/DrugUtilisation/reference/tableTreatment.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Format a summarised_treatment object into a visual table. — tableTreatment","text":"table formatted version summariseTreatmentFromConceptSet() summariseTreatmentFromCohort() results.","code":""},{"path":"https://darwin-eu-dev.github.io/DrugUtilisation/reference/tableTreatment.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Format a summarised_treatment object into a visual table. — tableTreatment","text":"","code":"# \\donttest{ library(DrugUtilisation)  cdm <- mockDrugUtilisation() result <- cdm$cohort1 |>   summariseTreatmentFromConceptSet(     treatmentConceptSet = list(\"a\" = 1503327, \"c\" = 43135274, \"b\" = 2905077),     window = list(c(0, 180), c(181, 360))   ) #> ℹ The following estimates will be computed: #> • window1_a: count, percentage #> • window2_a: count, percentage #> • window1_b: count, percentage #> • window1_c: count, percentage #> • window2_b: count, percentage #> • window2_c: count, percentage #> • window1_untreated: count, percentage #> • window2_untreated: count, percentage #> → Start summary of data, at 2024-07-19 02:54:22.486893 #> ✔ Summary finished, at 2024-07-19 02:54:22.54916  tableTreatment(result) #> ! Results have not been suppressed.     Treatment       Estimate name                Window name            0 to 180       181 to 360     DUS MOCK; Cohort 1     A N (%) 1 (25.00 %) 1 (25.00 %)C N (%) 1 (25.00 %) 0 (0.00 %)B N (%) 0 (0.00 %) 1 (25.00 %)Untreated N (%) 3 (75.00 %) 1 (33.33 %)DUS MOCK; Cohort 2     A N (%) 0 (0.00 %) 0 (0.00 %)C N (%) 1 (50.00 %) 0 (0.00 %)B N (%) 0 (0.00 %) 0 (0.00 %)Untreated N (%) 1 (50.00 %) 1 (100.00 %)DUS MOCK; Cohort 3     A N (%) 1 (25.00 %) 0 (0.00 %)C N (%) 0 (0.00 %) 0 (0.00 %)B N (%) 2 (50.00 %) 0 (0.00 %)Untreated N (%) 2 (50.00 %) 2 (100.00 %)# }"},{"path":"https://darwin-eu-dev.github.io/DrugUtilisation/news/index.html","id":"drugutilisation-070","dir":"Changelog","previous_headings":"","what":"DrugUtilisation 0.7.0","title":"DrugUtilisation 0.7.0","text":"Complete refactor addDrugUse function.","code":""}]
